/*!

   MPEG-DASH engine plugin for Flowplayer HTML5

   Copyright (c) 2015-2016, Flowplayer Oy

   Released under the MIT License:
   http://www.opensource.org/licenses/mit-license.php

   Includes hls.js
   Copyright (c) 2015 Dailymotion (http://www.dailymotion.com)
   https://github.com/dailymotion/hls.js/blob/master/LICENSE

   Includes es5.js
   https://github.com/inexorabletash/polyfill/blob/master/es5.js
   for compatibility with legacy browsers

   Requires Flowplayer HTML5 version 6.x
   revision: ea66a8e

*/
!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){n(174),e.exports=n(69)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,n,r){var i=o(r);!i[e]&&t&&(i[e]={instance:t,override:n})}function t(e,t){for(var n in l){var r=l[n];if(r.context===e&&r.name===t)return r.instance}return null}function n(e,t,n){for(var r in l){var i=l[r];if(i.context===e&&i.name===t)return void(l[r].instance=n)}l.push({name:t,context:e,instance:n})}function r(e){return function(t){return void 0===t&&(t={}),{create:function(){return a(e.__dashjs_factory_name,e.apply({context:t},arguments),t,arguments)}}}}function i(e){return function(n){var r=void 0;return void 0===n&&(n={}),{getInstance:function(){return r||(r=t(n,e.__dashjs_factory_name)),r||(r=a(e.__dashjs_factory_name,e.apply({context:n},arguments),n,arguments),l.push({name:e.__dashjs_factory_name,context:n,instance:r})),r}}}}function a(e,t,n,r){var i=o(n),a=i[e];if(a){var u=a.instance;if(!a.override)return u.apply({context:n,factory:s},r);u=u.apply({context:n,factory:s,parent:t},r);for(var l in u)t.hasOwnProperty(l)&&(t[l]=u[l])}return t}function o(e){var t=void 0;return u.forEach(function(n){n===e&&(t=n)}),t||(t=u.push(e)),t}var s=void 0,u=[],l=[];return s={extend:e,getSingletonInstance:t,setSingletonInstance:n,getSingletonFactory:i,getClassFactory:r}}();t["default"]=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(72),u=r(s),l=function(e){function t(){return i(this,t),a(this,Object.getPrototypeOf(t).apply(this,arguments))}return o(t,e),t}(u["default"]),d=new l;t["default"]=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e,t,n){if(!e)throw new Error("event type cannot be null or undefined");if(!t||"function"!=typeof t)throw new Error("listener must be a function: "+t);if(!(i(e,t,n)>=0)){var r={callback:t,scope:n};o[e]=o[e]||[],o[e].push(r)}}function t(e,t,n){if(e&&t&&o[e]){var r=i(e,t,n);0>r||o[e].splice(r,1)}}function n(e,t){if(e&&o[e]){if(t=t||{},t.hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");t.type=e,o[e].forEach(function(e){e.callback.call(e.scope,t)})}}function r(){o={}}function i(e,t,n){var r=o[e],i=-1;if(!r||0===r.length)return i;for(var a=0;a<r.length;a++)if(r[a].callback===t&&(!n||n===r[a].scope))return a;return i}var a=void 0,o={};return a={on:e,off:t,trigger:n,reset:r}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a);i.__dashjs_factory_name="EventBus",t["default"]=o["default"].getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){d=!0,f=!0,c=(new Date).getTime()}function t(e){f=e}function n(e){d=e}function r(){return d}function i(){var e="",t=null;f&&(t=(new Date).getTime(),e+="["+(t-c)+"]"),e.length>0&&(e+=" "),Array.apply(null,arguments).forEach(function(t){e+=t+" "}),d&&console.log(e),s.trigger(u["default"].LOG,{message:e})}var a=this.context,s=(0,o["default"])(a).getInstance(),l=void 0,d=void 0,f=void 0,c=void 0;return l={log:i,setLogTimestampVisible:t,setLogToBrowserConsole:n,getLogToBrowserConsole:r},e(),l}Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),o=r(a),s=n(2),u=r(s),l=n(1),d=r(l);i.__dashjs_factory_name="Debug",t["default"]=d["default"].getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(){function e(){var e,t;_e=[],ve=!1,me=!0,Te=!0,Fe=!1,Re={enabled:!0,ttl:c},Ae={enabled:!0,ttl:g},ye=f,Ee=void 0,Se=m,Ie=v,Me=_,Ce=y,be=E,De=T,Oe=S,we=h,Ne=p,xe=D,e={},i(e,l["default"].MPD_TYPE,A),i(e,l["default"].XLINK_EXPANSION_TYPE,C),i(e,l["default"].MEDIA_SEGMENT_TYPE,I),i(e,l["default"].INIT_SEGMENT_TYPE,I),i(e,l["default"].BITSTREAM_SWITCHING_SEGMENT_TYPE,I),i(e,l["default"].INDEX_SEGMENT_TYPE,I),i(e,l["default"].OTHER_TYPE,I),Pe=e,t={},i(t,l["default"].MPD_TYPE,M),i(t,l["default"].XLINK_EXPANSION_TYPE,b),i(t,l["default"].MEDIA_SEGMENT_TYPE,R),i(t,l["default"].INIT_SEGMENT_TYPE,R),i(t,l["default"].BITSTREAM_SWITCHING_SEGMENT_TYPE,R),i(t,l["default"].INDEX_SEGMENT_TYPE,R),i(t,l["default"].OTHER_TYPE,R),Le=t}function t(e){Fe=e}function n(){return Fe}function r(e){we=e}function a(){return we}function o(e){Ne=e}function s(){return Ne}function u(e){Me=e}function d(){return Me}function O(e){Ce=e}function w(){return Ce}function N(e){be=e}function P(){return be}function L(e){De=e}function x(){return De}function F(e){Oe=e}function U(){return Oe}function B(e){Se=e}function k(){return Se}function j(e,t){Re.enabled=e,void 0===t||isNaN(t)||"number"!=typeof t||(Re.ttl=t)}function K(){return Re}function Y(e,t){Ae.enabled=e,void 0===t||isNaN(t)||"number"!=typeof t||(Ae.ttl=t)}function H(){return Ae}function G(e){Ie=e}function q(){return Ie}function V(e){Pe[l["default"].MEDIA_SEGMENT_TYPE]=e}function z(e,t){Pe[e]=t}function W(){return Pe[l["default"].MEDIA_SEGMENT_TYPE]}function Q(e){return Pe[e]}function X(e){Le[l["default"].MEDIA_SEGMENT_TYPE]=e}function Z(e,t){Le[e]=t}function J(){return Le[l["default"].MEDIA_SEGMENT_TYPE]}function $(e){return Le[e]}function ee(e){xe=e}function te(){return xe}function ne(e){Te=e}function re(){return Te}function ie(e){ye=e}function ae(e){Ee=e}function oe(){return ye}function se(){return Ee}function ue(e){me=e}function le(){return me}function de(e){ve=e}function fe(){return ve}function ce(e){_e=e}function ge(){return _e}function he(){}var pe=void 0,me=void 0,ve=void 0,_e=void 0,ye=void 0,Ee=void 0,Te=void 0,Se=void 0,Ie=void 0,Re=void 0,Ae=void 0,Me=void 0,Ce=void 0,be=void 0,De=void 0,Oe=void 0,we=void 0,Ne=void 0,Pe=void 0,Le=void 0,xe=void 0,Fe=void 0;return pe={setBufferOccupancyABREnabled:t,getBufferOccupancyABREnabled:n,setBandwidthSafetyFactor:r,getBandwidthSafetyFactor:a,setAbandonLoadTimeout:o,getAbandonLoadTimeout:s,setLastBitrateCachingInfo:j,getLastBitrateCachingInfo:K,setLastMediaSettingsCachingInfo:Y,getLastMediaSettingsCachingInfo:H,setStableBufferTime:u,getStableBufferTime:d,setBufferTimeAtTopQuality:O,getBufferTimeAtTopQuality:w,setBufferTimeAtTopQualityLongForm:N,getBufferTimeAtTopQualityLongForm:P,setLongFormContentDurationThreshold:L,getLongFormContentDurationThreshold:x,setRichBufferThreshold:F,getRichBufferThreshold:U,setBufferToKeep:B,getBufferToKeep:k,setBufferPruningInterval:G,getBufferPruningInterval:q,setFragmentRetryAttempts:V,getFragmentRetryAttempts:W,setRetryAttemptsForType:z,getRetryAttemptsForType:Q,setFragmentRetryInterval:X,getFragmentRetryInterval:J,setRetryIntervalForType:Z,getRetryIntervalForType:$,setWallclockTimeUpdateInterval:ee,getWallclockTimeUpdateInterval:te,setScheduleWhilePaused:ne,getScheduleWhilePaused:re,getUseSuggestedPresentationDelay:fe,setUseSuggestedPresentationDelay:de,setLiveDelayFragmentCount:ie,getLiveDelayFragmentCount:oe,getLiveDelay:se,setLiveDelay:ae,setUseManifestDateHeaderTimeSource:ue,getUseManifestDateHeaderTimeSource:le,setUTCTimingSources:ce,getUTCTimingSources:ge,reset:he},e(),pe}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),s=r(o),u=n(6),l=r(u),d={scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"http://time.akamai.com/?iso"},f=4,c=36e4,g=36e4,h=.9,p=1e4,m=30,v=30,_=12,y=30,E=60,T=600,S=20,I=3,R=1e3,A=3,M=500,C=1,b=500,D=50;a.__dashjs_factory_name="MediaPlayerModel";var O=s["default"].getSingletonFactory(a);O.DEFAULT_UTC_TIMING_SOURCE=d,t["default"]=O},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function i(){n(this,i),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this._stream=null,this._tfinish=null,this._mediaduration=null,this._responseHeaders=null,this._serviceLocation=null};r.Trace=function(){function e(){n(this,e),this.s=null,this.d=null,this.b=[]}return e}(),r.MPD_TYPE="MPD",r.XLINK_EXPANSION_TYPE="XLinkExpansion",r.INIT_SEGMENT_TYPE="InitializationSegment",r.INDEX_SEGMENT_TYPE="IndexSegment",r.MEDIA_SEGMENT_TYPE="MediaSegment",r.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",r.OTHER_TYPE="other",t["default"]=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){var n=void 0===e?s:e,r=void 0===t?u:t,i={value:n,priority:r};return i}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),s=999,u=.5,l=1,d=0;i.__dashjs_factory_name="SwitchRequest";var f=o["default"].getClassFactory(i);f.NO_CHANGE=s,f.DEFAULT=u,f.STRONG=l,f.WEAK=d,t["default"]=f},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function i(e,t,r){n(this,i),this.code=e||null,this.message=t||null,this.data=r||null};t["default"]=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){re={video:!0,audio:!0},ie={},ae={},oe={},se={},ue={},le={},fe={},de={},ge=!1,_e=(0,d["default"])(Z).getInstance(),ve=(0,h["default"])(Z).getInstance(),he=(0,R["default"])(Z).getInstance(),pe=(0,M["default"])(Z).getInstance(),me=(0,b["default"])(Z).getInstance()}function t(e,t){de[e]=t,fe[e]=fe[e]||{},fe[e].state=O,J.on(E["default"].LOADING_PROGRESS,X,this)}function n(e){e&&(e.abrRulesCollection&&(ee=e.abrRulesCollection),e.rulesController&&(te=e.rulesController),e.streamController&&(ne=e.streamController))}function r(e,t){var n;return ie[t]=ie[t]||{},ie[t].hasOwnProperty(e)||(ie[t][e]=0),n=z(ie[t][e],e),n=W(n,e,ie[t][e]),n=Q(n,e)}function i(e){var t=_e.getSavedBitrateSettings(e);if(!se.hasOwnProperty(e))if(ue.hasOwnProperty(e)){var n=he.getValue(),r=pe.getAdaptationForType(n,0,e).Representation;if(Array.isArray(r)){var i=Math.max(Math.round(r.length*ue[e])-1,0);se[e]=r[i].bandwidth}else se[e]=0}else isNaN(t)?se[e]="video"===e?w:N:se[e]=t;return se[e]}function a(e,t){se[e]=t}function s(e){return ue.hasOwnProperty(e)?ue[e]:null}function l(e,t){ue[e]=t}function f(e){return se.hasOwnProperty("max")&&se.max.hasOwnProperty(e)?se.max[e]:NaN}function g(e,t){se.max=se.max||{},se.max[e]=t}function p(e){return ue.hasOwnProperty("max")&&ue.max.hasOwnProperty(e)?ue.max[e]:1}function v(e,t){ue.max=ue.max||{},ue.max[e]=t}function y(e){return re[e]}function T(e,t){re[e]=t}function S(){return ge}function I(e){ge=e}function A(e,t){var n,i,a,s,u=e.getType(),l=e.getStreamInfo(),d=l.id,f=function(a){var o=r(u,d);n=a.value,s=a.confidence,0>n&&(n=0),n>o&&(n=o),i=Y(u,l),n!==i&&(fe[u].state===O||n>i)&&(H(u,d,n),q(u,d,s),J.trigger(E["default"].QUALITY_CHANGED,{mediaType:u,streamInfo:e.getStreamInfo(),oldQuality:i,newQuality:n})),t&&t()};n=Y(u,l),s=G(u,d),y(u)?(a=ee.getRules(c["default"].QUALITY_SWITCH_RULES),te.applyRules(a,e,f,n,function(e,t){return e=e===o["default"].NO_CHANGE?0:e,Math.max(e,t)})):t&&t()}function C(e,t,n){var i=t.id,a=Y(e,t),o=null!==n&&!isNaN(n)&&n%1===0;if(!o)throw"argument is not an integer";n!==a&&n>=0&&n<=r(e,i)&&(H(e,i,n),J.trigger(E["default"].QUALITY_CHANGED,{mediaType:e,streamInfo:t,oldQuality:a,newQuality:n}))}function P(e,t){fe[e].state=t}function L(e){return fe[e].state}function x(e,t){var n=F(e),r=void 0;if(!n||0===n.length)return-1;for(var i=n.length-1;i>=0;i--)if(r=n[i],1e3*t>=r.bitrate)return i;return 0}function F(e){if(!e||!e.bitrateList)return null;for(var t,n=e.bitrateList,r=e.type,i=[],a=0,o=n.length;o>a;a++)t=new u["default"],t.mediaType=r,t.qualityIndex=a,t.bitrate=n[a].bandwidth,t.width=n[a].width,t.height=n[a].height,i.push(t);return i}function U(e,t){le[e]=t}function B(e){return le[e]}function k(e){var t=e.type,n=e.streamInfo.id,r=e.representationCount-1;return V(t,n,r),r}function j(e){var t,n=e.id,i=Y("audio",e),a=Y("video",e);return t=i===r("audio",n)&&a===r("video",n)}function K(){J.off(E["default"].LOADING_PROGRESS,X,this),clearTimeout(ce),ce=null,e()}function Y(e,t){var n,r=t.id;return ae[r]=ae[r]||{},ae[r].hasOwnProperty(e)||(ae[r][e]=0),n=ae[r][e]}function H(e,t,n){ae[t]=ae[t]||{},ae[t][e]=n}function G(e,t){var n;return oe[t]=oe[t]||{},oe[t].hasOwnProperty(e)||(oe[t][e]=0),n=oe[t][e]}function q(e,t,n){oe[t]=oe[t]||{},oe[t][e]=n}function V(e,t,n){ie[t]=ie[t]||{},ie[t][e]=n}function z(e,t){var n=f(t);if(isNaN(n)||!de[t])return e;var r=x(de[t].getMediaInfo(),n);return Math.min(e,r)}function W(e,t,n){var r=p(t);return isNaN(r)||r>=1||0>r?e:Math.min(e,Math.round(n*r))}function Q(e,t){if("video"!==t||!ge||!de[t])return e;var n=me.getElement(),r=n.clientWidth,i=n.clientHeight,a=he.getValue(),o=pe.getAdaptationForType(a,0,t).Representation,s=e;if(r>0&&i>0){for(;s>0&&o[s]&&r<o[s].width&&r-o[s-1].width<o[s].width-r;)s-=1;o.length-2>=s&&o[s].width===o[s+1].width&&(s=Math.min(e,s+1))}return s}function X(e){var t=e.request.mediaType;if(y(t)){var n=ee.getRules(c["default"].ABANDON_FRAGMENT_RULES),r=de[t].getScheduleController();if(!r)return;var i=r.getFragmentModel(),a=function(e){function n(e){ce=setTimeout(function(){P(e,O)},ve.getAbandonLoadTimeout())}if(e.confidence===o["default"].STRONG){var a=i.getRequests({state:m["default"].FRAGMENT_MODEL_LOADING}),s=e.value,u=Y(t,ne.getActiveStreamInfo());u>s&&(i.abortRequests(),P(t,D),C(t,ne.getActiveStreamInfo(),s),r.replaceCanceledRequests(a),n(t))}};te.applyRules(n,de[t],a,e,function(e,t){return t})}}var Z=this.context,J=(0,_["default"])(Z).getInstance(),$=void 0,ee=void 0,te=void 0,ne=void 0,re=void 0,ie=void 0,ae=void 0,oe=void 0,se=void 0,ue=void 0,le=void 0,de=void 0,fe=void 0,ce=void 0,ge=void 0,he=void 0,pe=void 0,me=void 0,ve=void 0,_e=void 0;return $={isPlayingAtTopQuality:j,updateTopQualityIndex:k,getAverageThroughput:B,getBitrateList:F,getQualityForBitrate:x,getMaxAllowedBitrateFor:f,setMaxAllowedBitrateFor:g,getMaxAllowedRepresentationRatioFor:p,setMaxAllowedRepresentationRatioFor:v,getInitialBitrateFor:i,setInitialBitrateFor:a,getInitialRepresentationRatioFor:s,setInitialRepresentationRatioFor:l,setAutoSwitchBitrateFor:T,getAutoSwitchBitrateFor:y,setLimitBitrateByPortal:I,getLimitBitrateByPortal:S,getConfidenceFor:G,getQualityFor:Y,getAbandonmentStateFor:L,setAbandonmentStateFor:P,setPlaybackQuality:C,getPlaybackQuality:A,setAverageThroughput:U,getTopQualityIndexFor:r,initialize:t,setConfig:n,reset:K},e(),$}Object.defineProperty(t,"__esModule",{value:!0});var a=n(7),o=r(a),s=n(153),u=r(s),l=n(49),d=r(l),f=n(46),c=r(f),g=n(5),h=r(g),p=n(38),m=r(p),v=n(3),_=r(v),y=n(2),E=r(y),T=n(1),S=r(T),I=n(27),R=r(I),A=n(11),M=r(A),C=n(17),b=r(C),D="abandonload",O="allowload",w=1e3,N=100;i.__dashjs_factory_name="AbrController";var P=S["default"].getSingletonFactory(i);P.ABANDON_LOAD=D,t["default"]=P},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){ce=0,ge=NaN,he=null,ve=null,ye=!1,pe={},_e=(0,d["default"])($).getInstance()}function t(e){me=e,re=fe.getElement(),Z(),ve=me.manifestInfo.isDynamic,ge=me.start,te.on(h["default"].DATA_UPDATE_COMPLETED,L,this),te.on(h["default"].LIVE_EDGE_SEARCH_COMPLETED,x,this),te.on(h["default"].BYTES_APPENDED,Q,this),te.on(h["default"].BUFFER_LEVEL_STATE_CHANGED,X,this),te.on(h["default"].PERIOD_SWITCH_STARTED,n,this),ye&&(ye=!1,l())}function n(e){e.fromStreamInfo&&pe[e.fromStreamInfo.id]&&delete pe[e.fromStreamInfo.id]}function r(){return b(!0)+me.duration-v()}function i(){return v()>0}function a(){return me.id}function s(){return me.duration}function l(){re?(re.autoplay=!0,re.play()):ye=!0}function f(){return re?re.paused:void 0}function g(){re&&(re.pause(),re.autoplay=!1)}function p(){return re?re.seeking:void 0}function m(e){fe&&(ee("Requesting seek to time: "+e),fe.setCurrentTime(e))}function v(){return re?re.currentTime:void 0}function y(){return re?re.playbackRate:void 0}function E(){return re?re.played:void 0}function T(){return re?re.ended:void 0}function S(){return ve}function I(e){ge=e}function R(){return ge}function A(e,t){var n=le.getMpd(ue.getValue()),r=void 0,i=10;r=_e.getUseSuggestedPresentationDelay()&&n.hasOwnProperty("suggestedPresentationDelay")?n.suggestedPresentationDelay:_e.getLiveDelay()?_e.getLiveDelay():isNaN(e)?2*me.manifestInfo.minBufferTime:e*_e.getLiveDelayFragmentCount();var a=Math.max(t-i,t/2);return Math.min(r,a)}function M(){fe&&re&&(te.off(h["default"].DATA_UPDATE_COMPLETED,L,this),te.off(h["default"].BUFFER_LEVEL_STATE_CHANGED,X,this),te.off(h["default"].LIVE_EDGE_SEARCH_COMPLETED,x,this),te.off(h["default"].BYTES_APPENDED,Q,this),w(),J()),fe=null,me=null,re=null,ve=null,e()}function C(e){e&&(e.streamController&&(ie=e.streamController),e.timelineConverter&&(ae=e.timelineConverter),e.metricsModel&&(oe=e.metricsModel),e.dashMetrics&&(se=e.dashMetrics),e.manifestModel&&(ue=e.manifestModel),e.dashManifestModel&&(le=e.dashManifestModel),e.adapter&&(de=e.adapter),e.videoModel&&(fe=e.videoModel))}function b(e){var t=void 0,n=e?NaN:parseInt((0,u["default"])($).getInstance().getURIFragmentData().s,10);if(ve)!isNaN(n)&&n>1262304e3&&(t=n-me.manifestInfo.availableFrom.getTime()/1e3,(t>ge||t<ge-me.manifestInfo.DVRWindowSize)&&(t=null)),t=t||ge;else if(!isNaN(n)&&n<Math.max(me.manifestInfo.duration,me.duration)&&n>=0)t=n;else{var r=pe[me.id];void 0===r&&(r=ie.getActiveStreamCommonEarliestTime()),t=Math.max(r,me.start)}return t}function D(e){var t,n=oe.getReadOnlyMetricsFor("video")||oe.getReadOnlyMetricsFor("audio"),r=se.getCurrentDVRInfo(n),i=r?r.range:null;return i?e>=i.start&&e<=i.end?e:t=Math.max(i.end-2*me.manifestInfo.minBufferTime,i.start):NaN}function O(){if(null===he){var e=function(){W()};he=setInterval(e,_e.getWallclockTimeUpdateInterval())}}function w(){clearInterval(he),he=null}function N(){var e=b(!1);e>0&&(m(e),ee("Starting playback at offset: "+e))}function P(){if(!f()&&ve&&0!==re.readyState){var e=v(),t=D(e),n=!isNaN(t)&&t!==e;n&&m(t)}}function L(e){if(!e.error){var t=de.convertDataToTrack(ue.getValue(),e.currentRepresentation),n=t.mediaInfo.streamInfo;me.id===n.id&&(me=n,P())}}function x(e){e.error||0===re.readyState||N()}function F(){te.trigger(h["default"].CAN_PLAY)}function U(){ee("Native video element event: play"),P(),O(),te.trigger(h["default"].PLAYBACK_STARTED,{startTime:v()})}function B(){ee("Native video element event: playing"),te.trigger(h["default"].PLAYBACK_PLAYING,{playingTime:v()})}function k(){ee("Native video element event: pause"),te.trigger(h["default"].PLAYBACK_PAUSED,{ended:T()})}function j(){var e=v();ee("Seeking to: "+e),O(),te.trigger(h["default"].PLAYBACK_SEEKING,{seekTime:e})}function K(){ee("Native video element event: seeked"),te.trigger(h["default"].PLAYBACK_SEEKED)}function Y(){var e=v();e!==ce&&(ce=e,te.trigger(h["default"].PLAYBACK_TIME_UPDATED,{timeToEnd:r(),time:e}))}function H(){te.trigger(h["default"].PLAYBACK_PROGRESS)}function G(){var e=y();ee("Native video element event: ratechange: ",e),te.trigger(h["default"].PLAYBACK_RATE_CHANGED,{playbackRate:e})}function q(){ee("Native video element event: loadedmetadata"),(!ve&&me.isFirst||ae.isTimeSyncCompleted())&&N(),te.trigger(h["default"].PLAYBACK_METADATA_LOADED),O()}function V(){ee("Native video element event: ended"),g(),w(),te.trigger(h["default"].PLAYBACK_ENDED)}function z(e){var t=e.target||e.srcElement;te.trigger(h["default"].PLAYBACK_ERROR,{error:t.error})}function W(){te.trigger(h["default"].WALLCLOCK_TIME_UPDATED,{isDynamic:ve,time:new Date})}function Q(e){var t=e.bufferedRanges;if(t&&t.length){var n=Math.max(t.start(0),me.start),r=void 0===pe[me.id]?n:Math.max(pe[me.id],n);r!==pe[me.id]&&(!ve&&b(!0)<r&&v()<r&&m(r),pe[me.id]=r)}}function X(e){e.streamInfo.id===me.id&&fe.setStallState(e.mediaType,e.state===o["default"].BUFFER_EMPTY)}function Z(){re.addEventListener("canplay",F),re.addEventListener("play",U),re.addEventListener("playing",B),re.addEventListener("pause",k),re.addEventListener("error",z),re.addEventListener("seeking",j),re.addEventListener("seeked",K),re.addEventListener("timeupdate",Y),re.addEventListener("progress",H),re.addEventListener("ratechange",G),re.addEventListener("loadedmetadata",q),re.addEventListener("ended",V)}function J(){re.removeEventListener("canplay",F),re.removeEventListener("play",U),re.removeEventListener("playing",B),re.removeEventListener("pause",k),re.removeEventListener("error",z),re.removeEventListener("seeking",j),re.removeEventListener("seeked",K),re.removeEventListener("timeupdate",Y),re.removeEventListener("progress",H),re.removeEventListener("ratechange",G),re.removeEventListener("loadedmetadata",q),re.removeEventListener("ended",V)}var $=this.context,ee=(0,_["default"])($).getInstance().log,te=(0,c["default"])($).getInstance(),ne=void 0,re=void 0,ie=void 0,ae=void 0,oe=void 0,se=void 0,ue=void 0,le=void 0,de=void 0,fe=void 0,ce=void 0,ge=void 0,he=void 0,pe=void 0,me=void 0,ve=void 0,_e=void 0,ye=void 0;return ne={initialize:t,setConfig:C,getStreamStartTime:b,getTimeToStreamEnd:r,isPlaybackStarted:i,getStreamId:a,getStreamDuration:s,getTime:v,getPlaybackRate:y,getPlayedRanges:E,getEnded:T,getIsDynamic:S,setLiveStartTime:I,getLiveStartTime:R,computeLiveDelay:A,play:l,isPaused:f,pause:g,isSeeking:p,seek:m,reset:M},e(),ne}Object.defineProperty(t,"__esModule",{value:!0});var a=n(15),o=r(a),s=n(39),u=r(s),l=n(5),d=r(l),f=n(3),c=r(f),g=n(2),h=r(g),p=n(1),m=r(p),v=n(4),_=r(v);i.__dashjs_factory_name="PlaybackController",t["default"]=m["default"].getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e,t){var n,r,i,a=!1,o=!1,s=e.ContentComponent_asArray,u="text"!==t?new RegExp(t):new RegExp("(vtt|ttml)");if(e.Representation_asArray.length>0&&e.Representation_asArray[0].hasOwnProperty("codecs")){var l=e.Representation_asArray[0].codecs;if("stpp"===l||"wvtt"===l)return"fragmentedText"===t}if(s){if(s.length>1)return"muxed"==t;s[0]&&s[0].contentType===t&&(a=!0,o=!0)}if(e.hasOwnProperty("mimeType")&&(a=u.test(e.mimeType),o=!0),!o)for(n=0,r=e.Representation_asArray.length;!o&&r>n;)i=e.Representation_asArray[n],i.hasOwnProperty("mimeType")&&(a=u.test(i.mimeType),o=!0),n++;return a}function t(t){return e(t,"audio")}function n(t){return e(t,"video")}function r(t){return e(t,"fragmentedText")}function i(t){return e(t,"text")}function a(t){return e(t,"muxed")}function s(e){return"text/vtt"===e||"application/ttml+xml"===e}function l(e){var t="";return e.hasOwnProperty("lang")&&(t=e.lang.replace(/[^A-Za-z0-9-]/g,"")),t}function f(e){return e.hasOwnProperty("Viewpoint")?e.Viewpoint:null}function g(e){return e.hasOwnProperty("Role_asArray")?e.Role_asArray:[]}function p(e){return e.hasOwnProperty("Accessibility_asArray")?e.Accessibility_asArray:[]}function v(e){return e.hasOwnProperty("AudioChannelConfiguration_asArray")?e.AudioChannelConfiguration_asArray:[]}function y(e){return g(e).filter(function(e){return"main"===e.value})[0]}function T(){return function(e,t){return e.bandwidth-t.bandwidth}}function I(e){return void 0!==e.Representation_asArray&&null!==e.Representation_asArray&&e.Representation_asArray.sort(T()),e}function A(e,t,n){var r,i,a=t.Period_asArray[n].AdaptationSet_asArray;for(r=0,i=a.length;i>r;r++)if(a[r].hasOwnProperty("id")&&a[r].id===e)return a[r];return null}function M(e,t,n){var r=t.Period_asArray[n].AdaptationSet_asArray;return r[e]}function C(e,t,n){var r,i,a=t.Period_asArray[n].AdaptationSet_asArray;for(r=0,i=a.length;i>r;r++)if(a[r]===e)return r;return-1}function b(t,n,r){var i,a,o=t.Period_asArray[n].AdaptationSet_asArray,s=[];for(i=0,a=o.length;a>i;i++)e(o[i],r)&&s.push(I(o[i]));return s}function D(e,t,n){var r,i,a;if(a=b(e,t,n),!a||0===a.length)return null;for(r=0,i=a.length;i>r;r++)if(y(a[r]))return a[r];return a[0]}function O(e){var t=e.Representation_asArray[0];return t.mimeType+';codecs="'+t.codecs+'"'}function w(e){return e.Representation_asArray[0].mimeType}function N(e){return e&&e.hasOwnProperty("cenc:default_KID")?e["cenc:default_KID"]:null}function P(e){return e&&e.hasOwnProperty("ContentProtection_asArray")&&0!==e.ContentProtection_asArray.length?e.ContentProtection_asArray:null}function L(e){var t=!1;return e.hasOwnProperty("type")&&(t="dynamic"===e.type),t}function x(e){var t,n,r=L(e);return t=!isNaN(e.timeShiftBufferDepth),n=r&&t}function F(e,t){var n=!1;return e.profiles&&e.profiles.length>0&&(n=-1!==e.profiles.indexOf(t)),n}function U(e){return F(e,"urn:mpeg:dash:profile:isoff-on-demand:2011")}function B(e){return F(e,"urn:dvb:dash:profile:dvb-dash:2014")}function k(e){var t;return t=e.hasOwnProperty("mediaPresentationDuration")?e.mediaPresentationDuration:Number.MAX_VALUE}function j(e){return e.bandwidth}function K(e){var t=NaN,n=2;return e.hasOwnProperty("minimumUpdatePeriod")&&(t=Math.max(parseFloat(e.minimumUpdatePeriod),n)),t}function Y(e){return e.Representation_asArray.length}function H(e){if(!e||!e.Representation_asArray||!e.Representation_asArray.length)return null;for(var t=I(e),n=t.Representation_asArray,r=n.length,i=[],a=0;r>a;a++)i.push({bandwidth:n[a].bandwidth,width:n[a].width||0,height:n[a].height||0});return i}function G(e,t){return t.Representation_asArray[e]}function q(e,t){for(var n,r,i,a,u,l=I(e.Period_asArray[t.period.index].AdaptationSet_asArray[t.index]),d=[],f=0;f<l.Representation_asArray.length;f++)a=l.Representation_asArray[f],n=new o["default"],n.index=f,n.adaptation=t,a.hasOwnProperty("id")&&(n.id=a.id),a.hasOwnProperty("bandwidth")&&(n.bandwidth=a.bandwidth),a.hasOwnProperty("maxPlayoutRate")&&(n.maxPlayoutRate=a.maxPlayoutRate),a.hasOwnProperty("SegmentBase")?(i=a.SegmentBase,n.segmentInfoType="SegmentBase"):a.hasOwnProperty("SegmentList")?(i=a.SegmentList,n.segmentInfoType="SegmentList",n.useCalculatedLiveEdgeTime=!0):a.hasOwnProperty("SegmentTemplate")?(i=a.SegmentTemplate,i.hasOwnProperty("SegmentTimeline")?(n.segmentInfoType="SegmentTimeline",u=i.SegmentTimeline.S_asArray[i.SegmentTimeline.S_asArray.length-1],(!u.hasOwnProperty("r")||u.r>=0)&&(n.useCalculatedLiveEdgeTime=!0)):n.segmentInfoType="SegmentTemplate",i.hasOwnProperty("initialization")&&(n.initialization=i.initialization.split("$Bandwidth$").join(a.bandwidth).split("$RepresentationID$").join(a.id))):(i=a.BaseURL,n.segmentInfoType="BaseURL"),i.hasOwnProperty("Initialization")?(r=i.Initialization,r.hasOwnProperty("sourceURL")?n.initialization=r.sourceURL:r.hasOwnProperty("range")&&(n.range=r.range)):a.hasOwnProperty("mimeType")&&s(a.mimeType)&&(n.range=0),i.hasOwnProperty("timescale")&&(n.timescale=i.timescale),i.hasOwnProperty("duration")&&(n.segmentDuration=i.duration/n.timescale),i.hasOwnProperty("startNumber")&&(n.startNumber=i.startNumber),i.hasOwnProperty("indexRange")&&(n.indexRange=i.indexRange),i.hasOwnProperty("presentationTimeOffset")&&(n.presentationTimeOffset=i.presentationTimeOffset/n.timescale),n.MSETimeOffset=se.calcMSETimeOffset(n),n.path=[t.period.index,t.index,f],d.push(n);return d}function V(e,i){for(var o,s,l=e.Period_asArray[i.index],d=[],f=0;f<l.AdaptationSet_asArray.length;f++)s=l.AdaptationSet_asArray[f],o=new u["default"],s.hasOwnProperty("id")&&(o.id=s.id),o.index=f,o.period=i,a(s)?o.type="muxed":t(s)?o.type="audio":n(s)?o.type="video":r(s)?o.type="fragmentedText":o.type="text",d.push(o);return d}function z(e,t){var n,r,i=L(e),a=[],o=null,s=null,u=null,l=null;for(r=0,n=e.Period_asArray.length;n>r;r++)s=e.Period_asArray[r],s.hasOwnProperty("start")?(l=new d["default"],l.start=s.start):null!==o&&s.hasOwnProperty("duration")&&null!==u?(l=new d["default"],l.start=u.start+u.duration,l.duration=s.duration):0!==r||i||(l=new d["default"],l.start=0),null!==u&&isNaN(u.duration)&&(u.duration=l.start-u.start),null!==l&&(l.id=W(s)),null!==l&&s.hasOwnProperty("duration")&&(l.duration=s.duration),null!==l&&(l.index=r,l.mpd=t,a.push(l),o=s,u=l),s=null,l=null;return 0===a.length?a:(null!==u&&isNaN(u.duration)&&(u.duration=J(e,u)-u.start),a)}function W(e){if(!e)throw new Error("Period cannot be null or undefined");var t=d["default"].DEFAULT_ID;return e.hasOwnProperty("id")&&"__proto__"!==e.id&&(t=e.id),t}function Q(e){var t=new c["default"];return t.manifest=e,e.hasOwnProperty("availabilityStartTime")?t.availabilityStartTime=new Date(e.availabilityStartTime.getTime()):t.availabilityStartTime=new Date(e.loadedTime.getTime()),e.hasOwnProperty("availabilityEndTime")&&(t.availabilityEndTime=new Date(e.availabilityEndTime.getTime())),e.hasOwnProperty("suggestedPresentationDelay")&&(t.suggestedPresentationDelay=e.suggestedPresentationDelay),e.hasOwnProperty("timeShiftBufferDepth")&&(t.timeShiftBufferDepth=e.timeShiftBufferDepth),e.hasOwnProperty("maxSegmentDuration")&&(t.maxSegmentDuration=e.maxSegmentDuration),t}function X(e,t){return se.calcPresentationTimeFromWallTime(e.loadedTime,t)}function Z(e,t){var n,r=NaN;return e.hasOwnProperty("minimumUpdatePeriod")&&(n=X(e,t),r=n+e.minimumUpdatePeriod),r}function J(e,t){var n,r=Z(e,t);if(e.mediaPresentationDuration)n=e.mediaPresentationDuration;else{if(isNaN(r))throw new Error("Must have @mediaPresentationDuration or @minimumUpdatePeriod on MPD or an explicit @duration on the last period.");n=r}return n}function $(e,t){var n=e.Period_asArray,r=n[t.index].EventStream_asArray,i=[];if(r)for(var a=0;a<r.length;a++){var o=new S["default"];if(o.period=t,o.timescale=1,!r[a].hasOwnProperty("schemeIdUri"))throw"Invalid EventStream. SchemeIdUri has to be set";o.schemeIdUri=r[a].schemeIdUri,r[a].hasOwnProperty("timescale")&&(o.timescale=r[a].timescale),r[a].hasOwnProperty("value")&&(o.value=r[a].value);for(var s=0;s<r[a].Event_asArray.length;s++){var u=new _["default"];u.presentationTime=0,u.eventStream=o,r[a].Event_asArray[s].hasOwnProperty("presentationTime")&&(u.presentationTime=r[a].Event_asArray[s].presentationTime),r[a].Event_asArray[s].hasOwnProperty("duration")&&(u.duration=r[a].Event_asArray[s].duration),r[a].Event_asArray[s].hasOwnProperty("id")&&(u.id=r[a].Event_asArray[s].id),i.push(u)}}return i}function ee(e,t){var n=[];if(!e)return n;for(var r=0;r<e.length;r++){var i=new S["default"];if(i.timescale=1,i.representation=t,!e[r].hasOwnProperty("schemeIdUri"))throw"Invalid EventStream. SchemeIdUri has to be set";i.schemeIdUri=e[r].schemeIdUri,e[r].hasOwnProperty("timescale")&&(i.timescale=e[r].timescale),e[r].hasOwnProperty("value")&&(i.value=e[r].value),n.push(i)}return n}function te(e,t){var n=e.Period_asArray[t.period.index].AdaptationSet_asArray[t.index].InbandEventStream_asArray;return ee(n,null)}function ne(e,t){var n=e.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index].Representation_asArray[t.index].InbandEventStream_asArray;return ee(n,t)}function re(e){var t=L(e),n=e.hasOwnProperty("availabilityStartTime"),r=e.UTCTiming_asArray,i=[];return(t||n)&&r&&r.forEach(function(e){var t=new h["default"];e.hasOwnProperty("schemeIdUri")&&(t.schemeIdUri=e.schemeIdUri,e.hasOwnProperty("value")&&(t.value=e.value.toString(),i.push(t)))}),i}function ie(e){var t=[],n=e.BaseURL_asArray||[e.baseUri]||[],r=!1;return n.some(function(n){if(n){var i=new E["default"],a=n.__text||n;return ue.isRelative(a)&&(r=!0,e.baseUri&&(a=e.baseUri+a)),i.url=a,n.hasOwnProperty("serviceLocation")&&n.serviceLocation.length?i.serviceLocation=n.serviceLocation:i.serviceLocation=a,
n.hasOwnProperty("dvb:priority")&&(i.dvb_priority=n["dvb:priority"]),n.hasOwnProperty("dvb:weight")&&(i.dvb_weight=n["dvb:weight"]),t.push(i),r}}),t}var ae=void 0,oe=this.context,se=(0,m["default"])(oe).getInstance(),ue=(0,R["default"])(oe).getInstance();return ae={getIsTypeOf:e,getIsAudio:t,getIsVideo:n,getIsText:i,getIsMuxed:a,getIsTextTrack:s,getIsFragmentedText:r,getIsMain:y,getLanguageForAdaptation:l,getViewpointForAdaptation:f,getRolesForAdaptation:g,getAccessibilityForAdaptation:p,getAudioChannelConfigurationForAdaptation:v,processAdaptation:I,getAdaptationForIndex:M,getIndexForAdaptation:C,getAdaptationForId:A,getAdaptationsForType:b,getAdaptationForType:D,getCodec:O,getMimeType:w,getKID:N,getContentProtectionData:P,getIsDynamic:L,getIsDVR:x,getIsOnDemand:U,getIsDVB:B,getDuration:k,getBandwidth:j,getRefreshDelay:K,getRepresentationCount:Y,getBitrateListForAdaptation:H,getRepresentationFor:G,getRepresentationsForAdaptation:q,getAdaptationsForPeriod:V,getRegularPeriods:z,getPeriodId:W,getMpd:Q,getFetchTime:X,getCheckTime:Z,getEndTimeForLastPeriod:J,getEventsForPeriod:$,getEventStreams:ee,getEventStreamForAdaptationSet:te,getEventStreamForRepresentation:ne,getUTCTimingSources:re,getBaseURLsFromElement:ie,getRepresentationSortFunction:T}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(86),o=r(a),s=n(82),u=r(s),l=n(85),d=r(l),f=n(84),c=r(f),g=n(57),h=r(g),p=n(23),m=r(p),v=n(55),_=r(v),y=n(54),E=r(y),T=n(83),S=r(T),I=n(30),R=r(I),A=n(1),M=r(A);i.__dashjs_factory_name="DashManifestModel",t["default"]=M["default"].getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){q={}}function t(e){e&&e.adapter&&(G=e.adapter)}function n(){Y.trigger(O["default"].METRICS_CHANGED)}function r(e){Y.trigger(O["default"].METRIC_CHANGED,{mediaType:e}),n()}function i(e,t,n){Y.trigger(O["default"].METRIC_UPDATED,{mediaType:e,metric:t,value:n}),r(e)}function a(e,t,n){Y.trigger(O["default"].METRIC_ADDED,{mediaType:e,metric:t,value:n}),r(e)}function s(e){delete q[e],r(e)}function l(){q={},n()}function f(e){return q.hasOwnProperty(e)?q[e]:null}function g(e){var t;return q.hasOwnProperty(e)?t=q[e]:(t=new o["default"],q[e]=t),t}function p(e,t,n,r,i,o){var s=new u["default"];return s.tcpid=t,s.dest=n,s.topen=r,s.tclose=i,s.tconnect=o,g(e).TcpList.push(s),a(e,G.metricsList.TCP_CONNECTION,s),s}function v(e,t,n,r){var i=new d["default"].Trace;return i.s=t,i.d=n,i.b=r,e.trace.push(i),e.interval||(e.interval=0),e.interval+=n,i}function y(e,t,n,r,i,o,s,u,l,f,c,h,p,m){var _=new d["default"];return i&&i!==r&&(y(e,null,n,r,null,null,s,u,null,null,null,h,null,null),_.actualurl=i),_.tcpid=t,_.type=n,_.url=r,_.range=s,_.trequest=u,_.tresponse=l,_.responsecode=c,_._tfinish=f,_._stream=e,_._mediaduration=h,_._responseHeaders=p,_._serviceLocation=o,m?m.forEach(function(e){v(_,e.s,e.d,e.b)}):(delete _.interval,delete _.trace),g(e).HttpList.push(_),a(e,G.metricsList.HTTP_REQUEST,_),_}function T(e,t,n,r,i){var o=new c["default"];return o.t=t,o.mt=n,o.to=r,i?o.lto=i:delete o.lto,g(e).RepSwitchList.push(o),a(e,G.metricsList.TRACK_SWITCH,o),o}function I(e,t,n){var r=new h["default"];return r.t=t,r.level=n,g(e).BufferLevel.push(r),a(e,G.metricsList.BUFFER_LEVEL,r),r}function A(e,t,n){var r=new m["default"];return r.target=n,r.state=t,g(e).BufferState.push(r),a(e,G.metricsList.BUFFER_STATE,r),r}function C(e,t,n,r){var i=new _["default"];return i.time=t,i.range=r,i.manifestInfo=n,g(e).DVRInfo.push(i),a(e,G.metricsList.DVR_INFO,i),i}function D(e,t){var n=new E["default"],r=g(e).DroppedFrames;return n.time=t.creationTime,n.droppedFrames=t.droppedVideoFrames,r.length>0&&r[r.length-1]==n?r[r.length-1]:(r.push(n),a(e,G.metricsList.DROPPED_FRAMES,n),n)}function w(e,t,n,r,i,o,s,u,l){var d=new R["default"];return d.mediaType=e,d.t=t,d.type=n,d.startTime=r,d.availabilityStartTime=i,d.duration=o,d.quality=s,d.range=u,d.state=l,g(e).SchedulingInfo.push(d),a(e,G.metricsList.SCHEDULING_INFO,d),d}function N(e,t,n){var r=new b["default"];r.loadingRequests=t,r.executedRequests=n,g(e).RequestsQueue=r,a(e,G.metricsList.REQUESTS_QUEUE,r)}function P(e,t,n,r,i,o,s,u,l,d){var f=new S["default"],c=g("stream");return f.mediaType=e,f.type=t,f.requestTime=n,f.fetchTime=r,f.availabilityStartTime=i,f.presentationStartTime=o,f.clientTimeOffset=s,f.currentTime=u,f.buffered=l,f.latency=d,c.ManifestUpdate.push(f),a(e,G.metricsList.MANIFEST_UPDATE,f),f}function x(e,t){if(e){for(var n in t)e[n]=t[n];i(e.mediaType,G.metricsList.MANIFEST_UPDATE,e)}}function F(e,t,n,r,a){if(e){var o=new S["default"].StreamInfo;return o.id=t,o.index=n,o.start=r,o.duration=a,e.streamInfo.push(o),i(e.mediaType,G.metricsList.MANIFEST_UPDATE_STREAM_INFO,e),o}return null}function U(e,t,n,r,a,o,s,u){if(e){var l=new S["default"].TrackInfo;return l.id=t,l.index=n,l.streamIndex=r,l.mediaType=a,l.startNumber=s,l.fragmentInfoType=u,l.presentationTimeOffset=o,e.trackInfo.push(l),i(e.mediaType,G.metricsList.MANIFEST_UPDATE_TRACK_INFO,e),l}return null}function B(e){var t="stream";return e.trace&&Array.isArray(e.trace)?e.trace.forEach(function(e){e.hasOwnProperty("subreplevel")&&!e.subreplevel&&delete e.subreplevel}):delete e.trace,g(t).PlayList.push(e),a(t,G.metricsList.PLAY_LIST,e),e}function k(e){var t="stream";return g(t).DVBErrors.push(e),a(t,G.metricsList.DVB_ERRORS,e),e}function j(e,t){var n=new L["default"];return n._s=t,g(e).BolaState=[n],a(e,"BolaState",n),n}var K=this.context,Y=(0,M["default"])(K).getInstance(),H=void 0,G=void 0,q=void 0;return H={metricsChanged:n,metricChanged:r,metricUpdated:i,metricAdded:a,clearCurrentMetricsForType:s,clearAllCurrentMetrics:l,getReadOnlyMetricsFor:f,getMetricsFor:g,addTcpConnection:p,addHttpRequest:y,addRepresentationSwitch:T,addBufferLevel:I,addBufferState:A,addDVRInfo:C,addDroppedFrames:D,addSchedulingInfo:w,addRequestsQueue:N,addManifestUpdate:P,updateManifestUpdateInfo:x,addManifestUpdateStreamInfo:F,addManifestUpdateRepresentationInfo:U,addPlayList:B,addDVBErrors:k,updateBolaState:j,setConfig:t},e(),H}Object.defineProperty(t,"__esModule",{value:!0});var a=n(159),o=r(a),s=n(173),u=r(s),l=n(6),d=r(l),f=n(170),c=r(f),g=n(165),h=r(g),p=n(166),m=r(p),v=n(167),_=r(v),y=n(168),E=r(y),T=n(169),S=r(T),I=n(172),R=r(I),A=n(3),M=r(A),C=n(171),b=r(C),D=n(2),O=r(D),w=n(1),N=r(w),P=n(164),L=r(P);i.__dashjs_factory_name="MetricsModel",t["default"]=N["default"].getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e,t){var n,r=C.getValue(),i=r.Period_asArray[t];return n=S(i,e),null===n?null:n.bandwidth}function t(e,t){var n,r=C.getValue(),i=r.Period_asArray[t];return n=T(i,e)}function n(e,t){var n,r=C.getValue(),i=r.Period_asArray[t];return n=R(i,e)}function r(e,t){var n=0,r=(0,u["default"])(M).getInstance();return r&&(n=r.getTopQualityIndexFor(e,t)),n}function i(e){if(null===e)return null;var t,n,r,i=e.RepSwitchList;return null===i||i.length<=0?null:(t=i.length,n=t-1,r=i[n])}function a(e){if(null===e)return null;var t=e.BufferLevel;return null===t||t.length<=0?null:t[t.length-1]}function s(e){if(null===e)return 0;var t=e.BufferLevel;return null===t||t.length<=0?0:t[t.length-1].level/1e3}function l(e){return e.RequestsQueue}function f(e){if(null===e)return null;var t,n,r=e.HttpList,i=null;if(null===r||r.length<=0)return null;for(t=r.length,n=t-1;n>=0;){if(r[n].responsecode){i=r[n];break}n--}return i}function g(e){return null===e?[]:e.HttpList?e.HttpList:[]}function h(e){if(null===e)return null;var t,n,r,i=e.DroppedFrames;return null===i||i.length<=0?null:(t=i.length,n=t-1,r=i[n])}function p(e){if(null===e)return null;var t,n,r,i=e.SchedulingInfo;return null===i||i.length<=0?null:(t=i.length,n=t-1,r=i[n])}function m(e){if(null===e)return null;var t,n,r,i=e.ManifestUpdate;return null===i||i.length<=0?null:(t=i.length,n=t-1,r=i[n])}function v(e){if(null===e)return null;var t,n,r=e.DVRInfo;return null===r||r.length<=0?null:(t=r.length-1,n=r[t])}function _(e,t){var n,r,i,a={};if(null===e)return null;for(n=g(e),i=n.length-1;i>=0;i--)if(r=n[i],r.type===o["default"].MPD_TYPE){a=E(r._responseHeaders);break}return void 0===a[t]?null:a[t]}function y(e,t){if(null===e)return null;var n,r=f(e);return null===r||null===r._responseHeaders?null:(n=E(r._responseHeaders),void 0===n[t]?null:n[t])}function E(e){var t={};if(!e)return t;for(var n=e.split("\r\n"),r=0,i=n.length;i>r;r++){var a=n[r],o=a.indexOf(": ");o>0&&(t[a.substring(0,o)]=a.substring(o+2))}return t}function T(e,t){var n,r,i,a,o,s;for(r=e.AdaptationSet_asArray,o=0;o<r.length;o+=1)for(n=r[o],a=n.Representation_asArray,s=0;s<a.length;s+=1)if(i=a[s],t===i.id)return s;return-1}function S(e,t){var n,r,i,a,o,s;for(r=e.AdaptationSet_asArray,o=0;o<r.length;o+=1)for(n=r[o],a=n.Representation_asArray,s=0;s<a.length;s+=1)if(i=a[s],t===i.id)return i;return null}function I(e,t){return(0,c["default"])(M).getInstance().getIsTypeOf(e,t)}function R(e,t){var n,r,i,a;if(!e||!t)return-1;for(r=e.AdaptationSet_asArray,a=0;a<r.length;a+=1)if(n=r[a],i=n.Representation_asArray,I(n,t))return i.length;return-1}var A=void 0,M=this.context,C=(0,d["default"])(M).getInstance();return A={getBandwidthForRepresentation:e,getIndexForRepresentation:t,getMaxIndexForBufferType:n,getMaxAllowedIndexForBufferType:r,getCurrentRepresentationSwitch:i,getLatestBufferLevelVO:a,getCurrentBufferLevel:s,getCurrentHttpRequest:f,getHttpRequests:g,getCurrentDroppedFrames:h,getCurrentSchedulingInfo:p,getCurrentDVRInfo:v,getCurrentManifestUpdate:m,getLatestFragmentRequestHeaderValueByID:y,getLatestMPDRequestHeaderValueByID:_,getRequestsQueue:l}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),o=r(a),s=n(9),u=r(s),l=n(27),d=r(l),f=n(11),c=r(f),g=n(1),h=r(g);i.__dashjs_factory_name="DashMetrics",t["default"]=h["default"].getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e,n){B=!1,k=null,V=null,z=!1,W=NaN,Q=[],J=null,O||t();var r=n.getStreamProcessor();if(H=r.getMediaInfoArr(),G.setConfig({videoModel:X}),G.initialize(),q=!F.getIsTextTrack(e),P=(0,d["default"])(b).getInstance(),Y=(0,u["default"])(b).getInstance(),Y.setConfig({boxParser:P}),q){V=r.getFragmentModel(),this.buffered=(0,c["default"])(b).create(),Q=U.getTracksFor("fragmentedText",Z.getActiveStreamInfo());for(var i=U.getCurrentTrackFor("fragmentedText",Z.getActiveStreamInfo()),a=0;a<Q.length;a++)if(Q[a]===i){$=a;break}}}function t(){ee=[],H=[],X=(0,_["default"])(b).getInstance(),G=(0,E["default"])(b).getInstance(),G.setConfig({videoModel:X}),G.initialize(),P=(0,d["default"])(b).getInstance(),Y=(0,u["default"])(b).getInstance(),Y.setConfig({boxParser:P}),q=!1,$=null,te=!1,ne=0,ae=[],ie=[],re=null,O=!0}function n(e,t){function n(e,t){var n=new o["default"],r={subtitle:"subtitles",caption:"captions"},i=function(){var e=t.roles.length>0?r[t.roles[0]]:r.caption;return e=e===r.caption||e===r.subtitle?e:r.caption},a=function(){var e=!1;return t.codec&&t.codec.search("stpp")>=0&&(e=!0),t.mimeType&&t.mimeType.search("ttml")>=0&&(e=!0),e};n.captionData=e,n.lang=t.lang,n.label=t.id,n.index=t.index,n.isTTML=a(),n.video=X.getElement(),n.defaultTrack=M(t),n.isFragmented=q,n.isEmbedded=!!t.isEmbedded,n.kind=i();var s=(H?H.length:0)+ee.length;G.addTextTrack(n,s)}var i,a,s,u,l,d=t.mediaInfo,f=d.type,c=d.mimeType,g=d.codec||c;if(!g)return void D("No text type defined");if("fragmentedText"===f)if(z)if(u=Y.getSamplesInfo(e),a=u.sampleList,!J&&a.length>0&&(J=a[0].cts-t.start*W),g.search("stpp")>=0)for(k=null!==k?k:C(g),s=0;s<a.length;s++){var p=a[s],m=p.cts,v=m-J;this.buffered.add(v/W,(v+p.duration)/W);var _=new DataView(e,p.offset,p.size);l=S["default"].Utils.dataViewToString(_,"utf-8");try{i=k.parse(l,m/W,(m+p.duration)/W),G.addCaptions($,J/W,i)}catch(y){D("TTML parser error: "+y.message)}}else{var E=[];for(s=0;s<a.length;s++){var T=a[s];T.cts-=J,this.buffered.add(T.cts/W,(T.cts+T.duration)/W);for(var I=e.slice(T.offset,T.offset+T.size),A=S["default"].parseBuffer(I),b=0;b<A.boxes.length;b++){var O=A.boxes[b];if(D("VTT box1: "+O.type),"vtte"!==O.type&&"vttc"===O.type){D("VTT vttc boxes.length = "+O.boxes.length);for(var w=0;w<O.boxes.length;w++){var N=O.boxes[w];if(D("VTT box2: "+N.type),"payl"===N.type){var P=N.cue_text;D("VTT cue_text = "+P);var x=T.cts/W,F=(T.cts+T.duration)/W;E.push({start:x,end:F,data:P,styles:{}}),D("VTT "+x+"-"+F+" : "+P)}}}}}E.length>0&&G.addCaptions($,0,E)}else{for(z=!0,s=0;s<H.length;s++)n(null,H[s]);W=Y.getMediaTimescaleFromMoov(e)}else if("text"===f){var U=new DataView(e,0,e.byteLength);l=S["default"].Utils.dataViewToString(U,"utf-8");try{i=C(g).parse(l),n(i,d)}catch(y){L.timedTextError(y,"parse",l)}}else if("video"===f)if("InitializationSegment"===t.segmentType){if(0===ne)for(ne=Y.getMediaTimescaleFromMoov(e),s=0;s<ee.length;s++)n(null,ee[s])}else{if(0===ne)return void D("CEA-608: No timescale for embeddedTextTrack yet");var B=function(e,t){function n(e,n,r){var i=null;if(X.getTTMLRenderingDiv())i=h(X.getElement(),e,n,r);else{var a=r.getDisplayText();i=[{start:e,end:n,data:a,styles:{}}]}i&&G.addCaptions(t,0,i)}return n};u=Y.getSamplesInfo(e);var j=u.sequenceNumber;if(!ae[0]&&!ae[1]){var K=void 0,V=void 0,Q=void 0;for(s=0;s<ee.length;s++){if("CC1"===ee[s].id?(K=0,Q=G.getTrackIdxForId("CC1")):"CC3"===ee[s].id&&(K=1,Q=G.getTrackIdxForId("CC3")),-1===Q)return void D("CEA-608: data before track is ready.");V=B(this,Q),ae[s]=new R["default"].Cea608Parser(s,{newCue:V},null)}}if(ne&&-1==ie.indexOf(j)){if(null!==re&&j!==re+1)for(s=0;s<ae.length;s++)ae[s]&&ae[s].reset();for(var Z=r(e),te=0;te<ae.length;te++){var oe=Z.fields[te],se=ae[te];if(se){for(s=0;s<oe.length;s++)se.addData(oe[s][0]/ne,oe[s][1]);Z.endTime&&se.cueSplitAtTime(Z.endTime/ne)}}re=j,ie.push(j)}}}function r(e){var t=function(e,t,n){var r=e.length;if(r>0){if(t>=e[r-1][0])e.push([t,n]);else for(var i=r-1;i>=0;i--)if(t<e[i][0]){e.splice(i,0,[t,n]);break}}else e.push([t,n])},n=P.parse(e),r=n.getBox("moof"),i=n.getBox("tfdt"),a=n.getBoxes("trun"),o=null;if(0===a.length)return null;o=a[0],a.length>1&&D("Warning: Too many truns");for(var s=r.offset+o.data_offset,u=o.sample_count,l=s,d=i.baseMediaDecodeTime,f=new DataView(e),c={startTime:null,endTime:null,fields:[[],[]]},g=0,h=0;u>h;h++){for(var p=o.samples[h],m=d+g+p.sample_composition_time_offset,v=R["default"].findCea608Nalus(f,l,p.sample_size),_=0;_<v.length;_++)for(var y=R["default"].extractCea608DataFromRange(f,v[_]),E=0;2>E;E++)y[E].length>0&&t(c.fields[E],m,y[E]);g+=p.sample_duration,l+=p.sample_size}var T=d+g;return c.startTime=d,c.endTime=T,c}function i(e){for(var t="",n=0;n<e.length;++n){var r=e[n];t+=r.uchar}var i=t.length,a=t.replace(/^\s+/,"").length;return i-a}function a(e){return"left: "+3.125*e.x+"%; top: "+6.66*e.y1+"%; width: "+(100-3.125*e.x)+"%; height: "+6.66*Math.max(e.y2-1-e.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function s(e){return"red"==e?"rgb(255, 0, 0)":"green"==e?"rgb(0, 255, 0)":"blue"==e?"rgb(0, 0, 255)":"cyan"==e?"rgb(0, 255, 255)":"magenta"==e?"rgb(255, 0, 255)":"yellow"==e?"rgb(255, 255, 0)":"white"==e?"rgb(255, 255, 255)":"black"==e?"rgb(0, 0, 0)":e}function l(e,t){var n=e.videoHeight/15;return t?"font-size: "+n+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(t.foreground?s(t.foreground):"rgb(255, 255, 255)")+"; font-style: "+(t.italics?"italic":"normal")+"; text-decoration: "+(t.underline?"underline":"none")+"; white-space: pre; background-color: "+(t.background?s(t.background):"transparent")+";":"font-size: "+n+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function f(e){var t=e.replace(/^\s+/g,"");return t}function g(e){var t=e.replace(/\s+$/g,"");return t}function h(e,t,n,r){var o=null,s=null,u=!1,d=-1,c={start:t,end:n,spans:[]},h="style_cea608_white_black",p={},m={},v=[],_=void 0,y=void 0;for(_=0;15>_;++_){var E=r.rows[_],T="",S=null;if(!1===E.isEmpty()){var I=i(E.chars);null===o&&(o={x:I,y1:_,y2:_+1,p:[]}),I!==d&&u&&(o.p.push(c),c={start:t,end:n,spans:[]},o.y2=_,o.name="region_"+o.x+"_"+o.y1+"_"+o.y2,!1===p.hasOwnProperty(o.name)?(v.push(o),p[o.name]=o):(s=p[o.name],s.p.contat(o.p)),o={x:I,y1:_,y2:_+1,p:[]});for(var R=0;R<E.chars.length;++R){var A=E.chars[R],M=A.penState;if(null===S||!M.equals(S)){T.trim().length>0&&(c.spans.push({name:h,line:T,row:_}),T="");var C="style_cea608_"+M.foreground+"_"+M.background;M.underline&&(C+="_underline"),M.italics&&(C+="_italics"),m.hasOwnProperty(C)||(m[C]=JSON.parse(JSON.stringify(M))),S=M,h=C}T+=A.uchar}T.trim().length>0&&c.spans.push({name:h,line:T,row:_}),u=!0,d=I}else u=!1,d=-1,o&&(o.p.push(c),c={start:t,end:n,spans:[]},o.y2=_,o.name="region_"+o.x+"_"+o.y1+"_"+o.y2,!1===p.hasOwnProperty(o.name)?(v.push(o),p[o.name]=o):(s=p[o.name],s.p.contat(o.p)),o=null)}o&&(o.p.push(c),o.y2=_+1,o.name="region_"+o.x+"_"+o.y1+"_"+o.y2,!1===p.hasOwnProperty(o.name)?(v.push(o),p[o.name]=o):(s=p[o.name],s.p.contat(o.p)),o=null);var b=[];for(_=0;_<v.length;++_){var D=v[_],O="sub_"+w++,N=document.createElement("div");N.id="subtitle_"+O;var P=a(D);N.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+P;var L=document.createElement("div");L.className="paragraph bodyStyle",L.style.cssText=l(e);var x=document.createElement("div");x.className="cueUniWrapper",x.style.cssText="unicode-bidi: normal; direction: ltr;";for(var F=0;F<D.p.length;++F){var U=D.p[F],B=0;for(y=0;y<U.spans.length;++y){var k=U.spans[y];if(k.line.length>0){if(0!==y&&B!=k.row){var j=document.createElement("br");j.className="lineBreak",x.appendChild(j)}var K=!1;B===k.row&&(K=!0),B=k.row;var Y=m[k.name],H=document.createElement("span");H.className="spanPadding "+k.name+" customSpanColor",H.style.cssText=l(e,Y),0!==y&&K?y===U.spans.length-1?H.textContent=g(k.line):H.textContent=k.line:0===y&&U.spans.length>1&&k.row===U.spans[1].row?H.textContent=f(k.line):H.textContent=k.line.trim(),x.appendChild(H)}}}L.appendChild(x),N.appendChild(L);var G={bodyStyle:90};for(y in m)m.hasOwnProperty(y)&&(G[y]=90);b.push({type:"html",start:t,end:n,cueHTMLElement:N,cueID:O,cellResolution:[32,15],isFromCEA608:!0,regions:v,regionID:D.name,videoHeight:e.videoHeight,videoWidth:e.videoWidth,fontSize:G||{defaultFontSize:"100"},lineHeight:{},linePadding:{}})}return b}function p(){G.deleteAllTextTracks(),B=!1,k=null,Y=null,H=null,G=null,q=!1,V=null,z=!1,W=NaN,Q=[],X=null,Z=null,O=!1,ee=null}function v(e){O||t(),"CC1"===e.id||"CC3"===e.id?ee.push(e):D("Warning: Embedded track "+e.id+" not supported!")}function y(){O=!1,ee=[],ae=[null,null],ie=[],re=null}function T(){return B}function I(e){e&&(e.errHandler&&(L=e.errHandler),e.adapter&&(x=e.adapter),e.dashManifestModel&&(F=e.dashManifestModel),e.mediaController&&(U=e.mediaController),e.videoModel&&(X=e.videoModel),e.streamController&&(Z=e.streamController),e.textTracks&&(G=e.textTracks),e.VTTParser&&(j=e.VTTParser),e.TTMLParser&&(K=e.TTMLParser))}function A(){for(var e=X.getElement(),t=e.textTracks,n=t.length,r=n-ee.length,i=G.getCurrentTrackIdx(),a=0;n>a;a++){var o=t[a];if(B="showing"!==o.mode,"showing"===o.mode){if(i!==a&&(G.setCurrentTrackIdx(a),G.addCaptions(a,0,null),q&&r>a)){var s=U.getCurrentTrackFor("fragmentedText",Z.getActiveStreamInfo()),u=Q[a];u!==s&&(V.abortRequests(),G.deleteTrackCues(s),U.setTrack(u),$=a)}break}}B&&G.setCurrentTrackIdx(-1)}function M(e){var t=!1;return ee.length>1?t=e.id&&"CC1"===e.id:1===ee.length?e.id&&"CC"===e.id.substring(0,2)&&(t=!0):t=e.index===H[0].index,t}function C(e){var t;return e.search("vtt")>=0?t=j:(e.search("ttml")>=0||e.search("stpp")>=0)&&(t=K,t.setConfig({videoModel:X})),t}var b=this.context,D=(0,m["default"])(b).getInstance().log,O=!1,w=0,N=void 0,P=void 0,L=void 0,x=void 0,F=void 0,U=void 0,B=void 0,k=void 0,j=void 0,K=void 0,Y=void 0,H=void 0,G=void 0,q=void 0,V=void 0,z=void 0,W=void 0,Q=void 0,X=void 0,Z=void 0,J=void 0,$=void 0,ee=void 0,te=void 0,ne=void 0,re=void 0,ie=void 0,ae=void 0;return N={initialize:e,append:n,abort:p,getAllTracksAreDisabled:T,setTextTrack:A,setConfig:I,addEmbeddedTrack:v,resetEmbedded:y}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(161),o=r(a),s=n(77),u=r(s),l=n(48),d=r(l),f=n(29),c=r(f),g=n(1),h=r(g),p=n(4),m=r(p),v=n(17),_=r(v),y=n(35),E=r(y),T=n(53),S=r(T),I=n(52),R=r(I);i.__dashjs_factory_name="TextSourceBuffer",t["default"]=h["default"].getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){Se=-1,Ie=-1,Re=!1,Ae=0,Me=0,Ce=Number.POSITIVE_INFINITY,De=-1,Oe=-1,Ne=null,Pe=N,xe=0,Fe=!1,Ue=!1,Be=!1,ke=!1,Ve=null}function n(e,t,n){we=e,re(t),Ke=n,qe=(0,u["default"])(ue).getInstance(),je=(0,m["default"])(ue).getInstance(),Ye=(0,h["default"])(ue).getInstance(),He=Ke.getFragmentController(),Ge=Ke.getScheduleController(),Se=Ye.getQualityFor(we,Ke.getStreamInfo()),de.on(R["default"].DATA_UPDATE_COMPLETED,G,this),de.on(R["default"].INIT_FRAGMENT_LOADED,a,this),de.on(R["default"].MEDIA_FRAGMENT_LOADED,s,this),de.on(R["default"].QUALITY_CHANGED,v,this),de.on(R["default"].STREAM_COMPLETED,q,this),de.on(R["default"].PLAYBACK_PROGRESS,T,this),de.on(R["default"].PLAYBACK_TIME_UPDATED,T,this),de.on(R["default"].PLAYBACK_RATE_CHANGED,Q,this),de.on(R["default"].PLAYBACK_SEEKING,y,this),de.on(R["default"].WALLCLOCK_TIME_UPDATED,W,this),de.on(R["default"].CURRENT_TRACK_CHANGED,z,this),de.on(R["default"].SOURCEBUFFER_APPEND_COMPLETED,p,this),de.on(R["default"].SOURCEBUFFER_REMOVE_COMPLETED,j,this),de.on(R["default"].CHUNK_APPENDED,V,this)}function r(e){if(!e||!be||!Ke)return null;var t=null;try{t=ge.createSourceBuffer(be,e),t&&t.hasOwnProperty("initialize")&&t.initialize(we,this)}catch(n){he.mediaSourceError("Error creating "+we+" source buffer.")}return ee(t),K(Ke.getRepresentationInfoForQuality(Se).MSETimeOffset),l(),t}function i(){var e=Ke.getStreamInfo().id,t=me.getActiveStreamInfo().id;return e===t}function a(e){var t;e.fragmentModel===Ke.getFragmentModel()&&(le("Initialization finished loading"),t=e.chunk,ye.append(t),f(Y(),Se))}function s(e){if(e.fragmentModel===Ke.getFragmentModel()){var t,n=e.chunk,r=n.bytes,i=n.quality,a=n.index,s=Ke.getFragmentModel().getRequests({state:o["default"].FRAGMENT_MODEL_EXECUTED,quality:i,index:a})[0],u=Ke.getRepresentationInfoForQuality(i),d=ce.getValue(),f=_e.getEventsFor(d,u.mediaInfo,Ke),c=_e.getEventsFor(d,u,Ke);(f.length>0||c.length>0)&&(t=L(r,s,f,c),Ke.getEventController().addInbandEvents(t)),n.bytes=x(r),ye.append(n),l()}}function l(){if(Ne&&!Ue&&F()){var e,t=Y();if(Fe)e=Fe;else{if(e=ye.extract({streamId:t,mediaType:we,segmentType:d["default"].MEDIA_SEGMENT_TYPE,limit:1})[0],!e)return;Fe=e}e.quality===Ie?(Fe=!1,g(e)):f(t,Fe.quality)}}function f(e,t){var n={streamId:e,mediaType:we,segmentType:d["default"].INIT_SEGMENT_TYPE,quality:t},r=ye.getChunks(n)[0];if(r){if(!Ne)return;g(r)}else de.trigger(R["default"].INIT_REQUESTED,{sender:Te,requiredQuality:t})}function g(e){Ue=!0,Le=e,ge.append(Ne,e),"video"===e.mediaInfo.type&&e.mediaInfo.embeddedCaptions&&Ee.append(e.bytes,e)}function p(e){if(Ne===e.buffer){T(),Re&&Ke.getStreamInfo().isLast&&pe.signalEndOfStream(be);var t;if(e.error)return e.error.code===c["default"].QUOTA_EXCEEDED_ERROR_CODE&&(ye.append(Le),Ce=.8*ge.getTotalBufferedTime(Ne),de.trigger(R["default"].QUOTA_EXCEEDED,{sender:Te,criticalBufferLevel:Ce}),k(B())),void(Ue=!1);if(F()||(de.trigger(R["default"].QUOTA_EXCEEDED,{sender:Te,criticalBufferLevel:Ce}),k(B())),t=ge.getAllRanges(Ne),t&&t.length>0){var n,r;for(n=0,r=t.length;r>n;n++)le("Buffered Range: "+t.start(n)+" - "+t.end(n))}Ue=!1,isNaN(Le.index)?(Ie=Le.quality,Ke.isDynamic()||l()):(ye.storeAppendedChunk(Le,Ne),H(),De=Math.max(Le.index,De),C()),de.trigger(R["default"].BYTES_APPENDED,{sender:Te,quality:Le.quality,startTime:Le.start,index:Le.index,bufferedRanges:t})}}function v(e){var t=e.newQuality;Se!==t&&we===e.mediaType&&Ke.getStreamInfo().id===e.streamInfo.id&&(K(Ke.getRepresentationInfoForQuality(t).MSETimeOffset),Se=t)}function y(){Ue=!1,T()}function T(){I(),A()}function I(){var e=je.getTime();Ae=ge.getBufferLength(Ne,e),de.trigger(R["default"].BUFFER_LEVEL_UPDATED,{sender:Te,bufferLevel:Ae}),b()}function A(){i()&&(fe.addBufferState(we,Pe,Me),fe.addBufferLevel(we,new Date,1e3*Ae))}function C(){var e=De===Oe-1;e&&!Re&&(Re=!0,de.trigger(R["default"].BUFFERING_COMPLETED,{sender:Te,streamInfo:Ke.getStreamInfo()}))}function b(){D(P>Ae&&!Re?N:w)}function D(e){if(!(Pe===e||"fragmentedText"===we&&Ee.getAllTracksAreDisabled())){Pe=e,A(),de.trigger(R["default"].BUFFER_LEVEL_STATE_CHANGED,{sender:Te,state:e,mediaType:we,streamInfo:Ke.getStreamInfo()});var t=e===w?R["default"].BUFFER_LOADED:R["default"].BUFFER_EMPTY;de.trigger(t,{mediaType:we}),le(e===w?"Got enough buffer to start.":"Waiting for more buffer before starting playback.")}}function L(e,t,n,r){var i,a,o,s,u=Math.max(isNaN(t.startTime)?0:t.startTime,0),l=[],d=[];ke=!1,s=n.concat(r);for(var f=0;f<s.length;f++)l[s[f].schemeIdUri]=s[f];o=(0,M["default"])(ue).getInstance().parse(e),i=o.getBoxes("emsg");for(var c=0,g=i.length;g>c;c++)a=_e.getEvent(i[c],l,u),a&&d.push(a);return d}function x(e){if(!ke)return e;for(var t,n,r=e.length,i=Math.pow(256,2),a=Math.pow(256,3),o=new Uint8Array(e.length),s=0,u=0;r>s;){if(t=String.fromCharCode(e[s+4],e[s+5],e[s+6],e[s+7]),n=e[s]*a+e[s+1]*i+256*e[s+2]+1*e[s+3],"emsg"!=t)for(var l=s;s+n>l;l++)o[u]=e[l],u++;s+=n}return o.subarray(0,u)}function F(){var e=ge.getTotalBufferedTime(Ne);return Ce>e}function U(){if("fragmentedText"!==we){le("try to prune buffer");var e=Ne.buffered.length?Ne.buffered.start(0):0,t=je.getTime(),n=t-e-qe.getBufferToKeep();n>0&&(le("pruning buffer: "+n+" seconds."),Be=!0,ge.remove(Ne,0,Math.round(e+n),be))}}function B(){var e,t,n,r,i;return Ne?(e=je.getTime(),i=Ke.getFragmentModel().getRequests({state:o["default"].FRAGMENT_MODEL_EXECUTED,time:e})[0],n=i&&!isNaN(i.startTime)?i.startTime:Math.floor(e),r=ge.getBufferRange(Ne,e),null===r&&Ne.buffered.length>0&&(n=Ne.buffered.end(Ne.buffered.length-1)),t=Ne.buffered.start(0),{start:t,end:n}):null}function k(e){if(e&&Ne){var t=e.start,n=e.end;ge.remove(Ne,t,n,be)}}function j(e){Ne===e.buffer&&(Be&&(Be=!1),ye.updateBufferedRanges({streamId:Y(),mediaType:we},ge.getAllRanges(Ne)),I(),de.trigger(R["default"].BUFFER_CLEARED,{sender:Te,from:e.from,to:e.to,hasEnoughSpaceToAppend:F()}),F()||null===Ve&&(Ve=setTimeout(function(){Ve=null,k(B())},1e3*Ke.getStreamInfo().manifestInfo.minBufferTime)))}function K(e){Ne&&Ne.timestampOffset!==e&&!isNaN(e)&&(Ne.timestampOffset=e)}function Y(){return Ke.getStreamInfo().id}function H(){var e,t,n,r=ye.getChunks({streamId:Y(),mediaType:we,segmentType:d["default"].MEDIA_SEGMENT_TYPE,appended:!0}),i=(0,E["default"])(ue),a=i.create(),o=i.create(),s=je.getTime(),u=2*Ke.getCurrentRepresentationInfo().fragmentDuration;if(r.forEach(function(e){t=ve.isCurrentTrack(e.mediaInfo)?o:a,t.add(e.bufferedRange.start,e.bufferedRange.end)}),0!==a.length&&0!==o.length&&(e=ge.getBufferLength({buffered:o},s),!(u>e)))for(var l=0,f=a.length;f>l;l++)n={start:a.start(l),end:a.end(l)},(ve.getSwitchMode(we)===_["default"].TRACK_SWITCH_MODE_ALWAYS_REPLACE||n.start>s)&&k(n)}function G(e){e.sender.getStreamProcessor()===Ke&&(e.error||K(e.currentRepresentation.MSETimeOffset))}function q(e){e.fragmentModel===Ke.getFragmentModel()&&(Oe=e.request.index,C())}function V(e){e.sender===ye&&A()}function z(e){if(Ne&&e.newMediaInfo.type===we&&e.newMediaInfo.streamInfo.id===Ke.getStreamInfo().id){var t=e.newMediaInfo,n=t.type,r=e.switchMode,i=je.getTime(),a={start:0,end:i};if(we===n)switch(r){case _["default"].TRACK_SWITCH_MODE_ALWAYS_REPLACE:k(a);break;case _["default"].TRACK_SWITCH_MODE_NEVER_REPLACE:break;default:le("track switch mode is not supported: "+r)}}}function W(){var e;xe++,e=xe*(qe.getWallclockTimeUpdateInterval()/1e3),e>=qe.getBufferPruningInterval()&&!Ue&&(xe=0,U())}function Q(){b()}function X(){return we}function Z(){return Ke}function J(e){Ke=e}function $(){return Ne}function ee(e){Ne=e}function te(){return Ae}function ne(){return Ce}function re(e){be=e}function ie(){return be}function ae(){return Re}function oe(){return Ue}function se(e){de.off(R["default"].DATA_UPDATE_COMPLETED,G,this),de.off(R["default"].QUALITY_CHANGED,v,this),de.off(R["default"].INIT_FRAGMENT_LOADED,a,this),de.off(R["default"].MEDIA_FRAGMENT_LOADED,s,this),de.off(R["default"].STREAM_COMPLETED,q,this),de.off(R["default"].CURRENT_TRACK_CHANGED,z,this),de.off(R["default"].PLAYBACK_PROGRESS,T,this),de.off(R["default"].PLAYBACK_TIME_UPDATED,T,this),de.off(R["default"].PLAYBACK_RATE_CHANGED,Q,this),de.off(R["default"].PLAYBACK_SEEKING,y,this),de.off(R["default"].WALLCLOCK_TIME_UPDATED,W,this),de.off(R["default"].SOURCEBUFFER_APPEND_COMPLETED,p,this),de.off(R["default"].SOURCEBUFFER_REMOVE_COMPLETED,j,this),de.off(R["default"].CHUNK_APPENDED,V,this),clearTimeout(Ve),Ve=null,Ce=Number.POSITIVE_INFINITY,Pe=N,Ie=-1,Oe=-1,De=-1,Se=0,Le=null,Fe=!1,Re=!1,Ue=!1,Be=!1,je=null,Ke=null,Ye=null,He=null,Ge=null,e||(ge.abort(be,Ne),ge.removeSourceBuffer(be,Ne)),Ne=null}var ue=this.context,le=(0,O["default"])(ue).getInstance().log,de=(0,S["default"])(ue).getInstance(),fe=e.metricsModel,ce=e.manifestModel,ge=e.sourceBufferController,he=e.errHandler,pe=e.mediaSourceController,me=e.streamController,ve=e.mediaController,_e=e.adapter,ye=e.virtualBuffer,Ee=e.textSourceBuffer,Te=void 0,Se=void 0,Ie=void 0,Re=void 0,Ae=void 0,Me=void 0,Ce=void 0,be=void 0,De=void 0,Oe=void 0,we=void 0,Ne=void 0,Pe=void 0,Le=void 0,xe=void 0,Fe=void 0,Ue=void 0,Be=void 0,ke=void 0,je=void 0,Ke=void 0,Ye=void 0,He=void 0,Ge=void 0,qe=void 0,Ve=void 0;return Te={initialize:n,createBuffer:r,getType:X,getStreamProcessor:Z,setStreamProcessor:J,getBuffer:$,setBuffer:ee,getBufferLevel:te,getCriticalBufferLevel:ne,setMediaSource:re,getMediaSource:ie,getIsBufferingCompleted:ae,getIsAppendingInProgress:oe,reset:se},t(),Te}Object.defineProperty(t,"__esModule",{value:!0});var a=n(38),o=r(a),s=n(5),u=r(s),l=n(6),d=r(l),f=n(24),c=r(f),g=n(9),h=r(g),p=n(10),m=r(p),v=n(16),_=r(v),y=n(29),E=r(y),T=n(3),S=r(T),I=n(2),R=r(I),A=n(48),M=r(A),C=n(1),b=r(C),D=n(4),O=r(D),w="bufferLoaded",N="bufferStalled",P=.5;i.__dashjs_factory_name="BufferController";var L=b["default"].getClassFactory(i);L.BUFFER_LOADED=w,L.BUFFER_EMPTY=N,t["default"]=L},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){k={},O(),D()}function t(e,t){var n=d(e),i=r(e,t),a=[];return"fragmentedText"===e?void s(i[0]):(n||(n=U.getSavedMediaSettings(e),l(e,n)),void(i&&0!==i.length&&(n&&i.forEach(function(e){b(n,e)&&a.push(e)}),s(0===a.length?w(i):a.length>1?w(a):a[0]))))}function n(e){var t=e?e.type:null,n=e?e.streamInfo.id:null,r=d(t);return e&&I(t)?(k[n]=k[n]||N(),k[n][t].list.indexOf(e)>=0?!1:(k[n][t].list.push(e),r&&b(r,e)&&!i(t,e.streamInfo)&&s(e),!0)):!1}function r(e,t){if(!e||!t)return[];var n=t.id;return k[n]&&k[n][e]?k[n][e].list:[]}function i(e,t){return e&&t?k[t.id][e].current:null}function a(e){var t=e.type,n=e.streamInfo.id;return k[n]&&k[n][t]&&R(k[n][t].current,e)}function s(e){if(e){var t=e.type,n=e.streamInfo,r=n.id,a=i(t,n);if(k[r]&&k[r][t]&&(!a||!R(e,a))){k[r][t].current=e,a&&x.trigger(o["default"].CURRENT_TRACK_CHANGED,{oldMediaInfo:a,newMediaInfo:e,switchMode:Y[t]});var s=C(e);s&&k[r][t].storeLastSettings&&(s.roles&&(s.role=s.roles[0],delete s.roles),s.accessibility&&(s.accessibility=s.accessibility[0]),s.audioChannelConfiguration&&(s.audioChannelConfiguration=s.audioChannelConfiguration[0]),U.setSavedMediaSettings(t,s))}}}function l(e,t){e&&t&&(j[e]=t)}function d(e){return e?j[e]:null}function f(e,t){var n=-1!==G.indexOf(t);return n?void(Y[e]=t):void L("track switch mode is not supported: "+t)}function g(e){return Y[e]}function p(e){var t=-1!==q.indexOf(e);return t?void(K=e):void L("track selection mode is not supported: "+e);
}function S(){return K||T}function I(e){return"audio"===e||"video"===e||"text"===e||"fragmentedText"===e}function R(e,t){var n=e.id===t.id,r=e.viewpoint===t.viewpoint,i=e.lang===t.lang,a=e.roles.toString()==t.roles.toString(),o=e.accessibility.toString()==t.accessibility.toString(),s=e.audioChannelConfiguration.toString()==t.audioChannelConfiguration.toString();return n&&r&&i&&a&&o&&s}function A(e){e&&e.errHandler&&(H=e.errHandler)}function M(){e(),F.resetEmbedded()}function C(e){var t={lang:e.lang,viewpoint:e.viewpoint,roles:e.roles,accessibility:e.accessibility,audioChannelConfiguration:e.audioChannelConfiguration},n=t.lang||t.viewpoint||t.role&&t.role.length>0||t.accessibility&&t.accessibility.length>0||t.audioChannelConfiguration&&t.audioChannelConfiguration.length>0;return n?t:null}function b(e,t){var n=!e.lang||e.lang===t.lang,r=!e.viewpoint||e.viewpoint===t.viewpoint,i=!e.role||!!t.roles.filter(function(t){return t===e.role})[0],a=!e.accessibility||!!t.accessibility.filter(function(t){return t===e.accessibility})[0],o=!e.audioChannelConfiguration||!!t.audioChannelConfiguration.filter(function(t){return t===e.audioChannelConfiguration})[0];return n&&r&&i&&a&&o}function D(){Y={audio:_,video:v}}function O(){j={audio:null,video:null}}function w(e){var t=S(),n=[],r=function(e){var t,n=0,r=[];return e.forEach(function(e){t=Math.max.apply(Math,e.bitrateList.map(function(e){return e.bandwidth})),t>n?(n=t,r=[e]):t===n&&r.push(e)}),r},i=function(e){var t,n=0,r=[];return e.forEach(function(e){t=e.representationCount,t>n?(n=t,r=[e]):t===n&&r.push(e)}),r};switch(t){case y:n=r(e),n.length>1&&(n=i(n));break;case E:n=i(e),n.length>1&&(n=r(e));break;default:L("track selection mode is not supported: "+t)}return n[0]}function N(){return{audio:{list:[],storeLastSettings:!0,current:null},video:{list:[],storeLastSettings:!0,current:null},text:{list:[],storeLastSettings:!0,current:null},fragmentedText:{list:[],storeLastSettings:!0,current:null}}}var P=this.context,L=(0,c["default"])(P).getInstance().log,x=(0,u["default"])(P).getInstance(),F=(0,h["default"])(P).getInstance(),U=(0,m["default"])(P).getInstance(),B=void 0,k=void 0,j=void 0,K=void 0,Y=void 0,H=void 0,G=[_,v],q=[y,E];return B={initialize:e,checkInitialMediaSettingsForType:t,addTrack:n,getTracksFor:r,getCurrentTrackFor:i,isCurrentTrack:a,setTrack:s,setInitialSettings:l,getInitialSettings:d,setSwitchMode:f,getSwitchMode:g,setSelectionModeForInitialTrack:p,getSelectionModeForInitialTrack:S,isMultiTrackSupportedByType:I,isTracksEqual:R,setConfig:A,reset:M}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=r(a),s=n(3),u=r(s),l=n(1),d=r(l),f=n(4),c=r(f),g=n(14),h=r(g),p=n(49),m=r(p),v="neverReplace",_="alwaysReplace",y="highestBitrate",E="widestRange",T=y;i.__dashjs_factory_name="MediaController";var S=d["default"].getSingletonFactory(i);S.TRACK_SWITCH_MODE_NEVER_REPLACE=v,S.TRACK_SWITCH_MODE_ALWAYS_REPLACE=_,S.TRACK_SELECTION_MODE_HIGHEST_BITRATE=y,S.TRACK_SELECTION_MODE_WIDEST_RANGE=E,S.DEFAULT_INIT_TRACK_SELECTION_MODE=T,t["default"]=S},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){T=[]}function t(e){!_||_.readyState<2||(_.playbackRate=e)}function n(e){if(_.currentTime!=e)try{_.currentTime=e}catch(t){0===_.readyState&&t.code===t.INVALID_STATE_ERR&&setTimeout(function(){_.currentTime=e},400)}}function r(){return _}function i(e){_=e,_.preload="auto"}function a(e){e?_.src=e:(_.removeAttribute("src"),_.load())}function o(){return _.src}function s(){return E}function u(e){E=e}function l(){return y}function d(e){y=e,y.style.position="absolute",y.style.display="flex",y.style.overflow="hidden",y.style.pointerEvents="none",y.style.top=0,y.style.left=0}function f(e,t){p(e,t)}function c(){return T.length>0}function g(e){var n=void 0;null===e||_.seeking||-1!==T.indexOf(e)||(T.push(e),1===T.length&&(n=document.createEvent("Event"),n.initEvent("waiting",!0,!1),S=_.playbackRate,t(0),_.dispatchEvent(n)))}function h(e){var n=T.indexOf(e),r=void 0;null!==e&&(-1!==n&&T.splice(n,1),c()===!1&&0===_.playbackRate&&(r=document.createEvent("Event"),r.initEvent("playing",!0,!1),t(S||1),_.dispatchEvent(r)))}function p(e,t){t?g(e):h(e)}function m(){var e="webkitDroppedFrameCount"in _,t="getVideoPlaybackQuality"in _,n=null;return t?n=_.getVideoPlaybackQuality():e&&(n={droppedVideoFrames:_.webkitDroppedFrameCount,creationTime:new Date}),n}var v=void 0,_=void 0,y=void 0,E=void 0,T=void 0,S=void 0;return v={initialize:e,setCurrentTime:n,setStallState:f,getElement:r,setElement:i,setSource:a,getSource:o,getVideoContainer:s,setVideoContainer:u,getTTMLRenderingDiv:l,setTTMLRenderingDiv:d,getPlaybackQuality:m}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a);i.__dashjs_factory_name="VideoModel",t["default"]=o["default"].getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e){f.trigger(u["default"].ERROR,{error:"capability",event:e})}function t(e,t,n){f.trigger(u["default"].ERROR,{error:"download",event:{id:e,url:t,request:n}})}function n(e,t,n){f.trigger(u["default"].ERROR,{error:"manifestError",event:{message:e,id:t,manifest:n}})}function r(e,t,n){f.trigger(u["default"].ERROR,{error:"cc",event:{message:e,id:t,cc:n}})}function i(e){f.trigger(u["default"].ERROR,{error:"mediasource",event:e})}function a(e){f.trigger(u["default"].ERROR,{error:"key_session",event:e})}function s(e){f.trigger(u["default"].ERROR,{error:"key_message",event:e})}var l=void 0,d=this.context,f=(0,o["default"])(d).getInstance();return l={capabilityError:e,downloadError:t,manifestError:n,timedTextError:r,mediaSourceError:i,mediaKeySessionError:a,mediaKeyMessageError:s}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),o=r(a),s=n(2),u=r(s),l=n(1),d=r(l),f="mediasource",c="mediakeys",g="manifest",h="SIDX",p="content",m="initialization",v="xlink",_="codec",y="parse",E="nostreams",T="parse";i.__dashjs_factory_name="ErrorHandler";var S=d["default"].getSingletonFactory(i);S.CAPABILITY_ERROR_MEDIASOURCE=f,S.CAPABILITY_ERROR_MEDIAKEYS=c,S.DOWNLOAD_ERROR_ID_MANIFEST=g,S.DOWNLOAD_ERROR_ID_SIDX=h,S.DOWNLOAD_ERROR_ID_CONTENT=p,S.DOWNLOAD_ERROR_ID_INITIALIZATION=m,S.DOWNLOAD_ERROR_ID_XLINK=v,S.MANIFEST_ERROR_ID_CODEC=_,S.MANIFEST_ERROR_ID_PARSE=y,S.MANIFEST_ERROR_ID_NOSTREAMS=E,S.TIMED_TEXT_ERROR_ID_PARSE=T,t["default"]=S},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e){e&&e.dashManifestModel&&(L=e.dashManifestModel)}function t(){x=[],F={}}function n(e,t){return t.getRepresentationForQuality(e.quality)}function r(e){return F[e.streamInfo.id][e.index]}function i(e){for(var t=x.length,n=0;t>n;n++){var r=x[n];if(e.id===r.id)return r}return null}function a(e,t){var n=new o["default"],r=t.adaptation.period.mpd.manifest.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index],i=L.getRepresentationFor(t.index,r);return n.id=t.id,n.quality=t.index,n.bandwidth=L.getBandwidth(i),n.DVRWindow=t.segmentAvailabilityRange,n.fragmentDuration=t.segmentDuration||(t.segments&&t.segments.length>0?t.segments[0].duration:NaN),n.MSETimeOffset=t.MSETimeOffset,n.useCalculatedLiveEdgeTime=t.useCalculatedLiveEdgeTime,n.mediaInfo=s(e,t.adaptation),n}function s(e,t){var n,r=new u["default"],i=t.period.mpd.manifest.Period_asArray[t.period.index].AdaptationSet_asArray[t.index];return r.id=t.id,r.index=t.index,r.type=t.type,r.streamInfo=f(e,t.period),r.representationCount=L.getRepresentationCount(i),r.lang=L.getLanguageForAdaptation(i),n=L.getViewpointForAdaptation(i),r.viewpoint=n?n.value:void 0,r.accessibility=L.getAccessibilityForAdaptation(i).map(function(e){var t=e.value,n=t;return e.schemeIdUri&&e.schemeIdUri.search("cea-608")>=0&&"undefined"!=typeof _["default"]&&(n=t?"cea-608:"+t:"cea-608",r.embeddedCaptions=!0),n}),r.audioChannelConfiguration=L.getAudioChannelConfigurationForAdaptation(i).map(function(e){return e.value}),r.roles=L.getRolesForAdaptation(i).map(function(e){return e.value}),r.codec=L.getCodec(i),r.mimeType=L.getMimeType(i),r.contentProtection=L.getContentProtectionData(i),r.bitrateList=L.getBitrateListForAdaptation(i),r.contentProtection&&r.contentProtection.forEach(function(e){e.KID=L.getKID(e)}),r.isText=L.getIsTextTrack(r.mimeType),r}function l(e,t,n){e.id=t,e.index=100+parseInt(t.substring(2,3)),e.type="embeddedText",e.codec="cea-608-in-SEI",e.isText=!0,e.isEmbedded=!0,e.lang=t+" "+n,e.roles=["caption"]}function f(e,t){var n=new d["default"],r=1;return n.id=t.id,n.index=t.index,n.start=t.start,n.duration=t.duration,n.manifestInfo=g(e,t.mpd),n.isLast=1===e.Period_asArray.length||Math.abs(n.start+n.duration-n.manifestInfo.duration)<r,n.isFirst=1===e.Period_asArray.length||L.getRegularPeriods(e,L.getMpd(e))[0].id===t.id,n}function g(e,t){var n=new c["default"];return n.DVRWindowSize=t.timeShiftBufferDepth,n.loadedTime=t.manifest.loadedTime,n.availableFrom=t.availabilityStartTime,n.minBufferTime=t.manifest.minBufferTime,n.maxFragmentDuration=t.maxSegmentDuration,n.duration=L.getDuration(e),n.isDynamic=L.getIsDynamic(e),n}function p(e,t,n){var r,a=i(t),o=a.id,u=L.getAdaptationForType(e,t.index,n);return u?(r=L.getIndexForAdaptation(u,e,t.index),F[o]=F[o]||L.getAdaptationsForPeriod(e,a),s(e,F[o][r])):null}function m(e,t,n){var r,a,o,u,d,f,c=i(t),g=c.id,h=L.getAdaptationsForType(e,t.index,"embeddedText"!==n?n:"video"),p=[];if(!h)return p;for(F[g]=F[g]||L.getAdaptationsForPeriod(e,c),u=0,f=h.length;f>u;u++){if(r=h[u],o=L.getIndexForAdaptation(r,e,t.index),a=s(e,F[g][o]),"embeddedText"===n){var m=a.accessibility.length;for(d=0;m>d;d++)if(a){var v=a.accessibility[d];if(0===v.indexOf("cea-608:")){var _=v.substring(8),y=_.split(";");if("CC"===y[0].substring(0,2))for(d=0;d<y.length;d++)a||(a=s.call(this,e,F[g][o])),l(a,y[d].substring(0,3),y[d].substring(4)),p.push(a),a=null;else for(d=0;d<y.length;d++)a||(a=s.call(this,e,F[g][o])),l(a,"CC"+(d+1),y[d]),p.push(a),a=null}else 0===v.indexOf("cea-608")&&(l(a,"CC1","eng"),p.push(a),a=null)}}a&&"embeddedText"!==n&&p.push(a)}return p}function v(e){var t,n,r,i=[];if(!e)return null;for(t=L.getMpd(e),x=L.getRegularPeriods(e,t),t.checkTime=L.getCheckTime(e,x[0]),F={},n=x.length,r=0;n>r;r++)i.push(f(e,x[r]));return i}function E(e){var t=L.getMpd(e);return g(e,t)}function T(e,t){var n=e.getRepresentationController().getRepresentationForQuality(t);return e.getIndexHandler().getInitRequest(n)}function S(e,t){var r=n(t,e.getRepresentationController());return e.getIndexHandler().getNextSegmentRequest(r)}function I(e,t,r,i){var a=n(t,e.getRepresentationController());return e.getIndexHandler().getSegmentRequestForTime(a,r,i)}function R(e,t,r){var i=n(t,e.getRepresentationController());return e.getIndexHandler().generateSegmentRequestForTime(i,r)}function A(e){return e.getIndexHandler().getCurrentTime()}function M(e,t){return e.getIndexHandler().setCurrentTime(t)}function C(e,t){var n,a,o=i(t.getStreamInfo()),s=t.getMediaInfo(),u=r(s),l=t.getType();n=s.id,a=n?L.getAdaptationForId(n,e,o.index):L.getAdaptationForIndex(s.index,e,o.index),t.getRepresentationController().updateData(a,u,l)}function b(e,t,n){var r=t.getRepresentationForQuality(n);return r?a(e,r):null}function D(e,t){var n=t.getCurrentRepresentation();return n?a(e,n):null}function O(e,t,n){var r=new h["default"],i=e.scheme_id_uri,a=e.value,o=e.timescale,s=e.presentation_time_delta,u=e.event_duration,l=e.id,d=e.message_data,f=n*o+s;return t[i]?(r.eventStream=t[i],r.eventStream.value=a,r.eventStream.timescale=o,r.duration=u,r.id=l,r.presentationTime=f,r.messageData=d,r.presentationTimeDelta=s,r):null}function w(e,t,a){var s=[];return t instanceof d["default"]?s=L.getEventsForPeriod(e,i(t)):t instanceof u["default"]?s=L.getEventStreamForAdaptationSet(e,r(t)):t instanceof o["default"]&&(s=L.getEventStreamForRepresentation(e,n(t,a.getRepresentationController()))),s}function N(){x=[],F={}}var P=void 0,L=void 0,x=void 0,F=void 0;return P={initialize:t,convertDataToTrack:a,convertDataToMedia:s,convertDataToStream:f,getDataForTrack:n,getDataForMedia:r,getDataForStream:i,getStreamsInfo:v,getManifestInfo:E,getMediaInfoForType:p,getAllMediaInfoForType:m,getCurrentRepresentationInfo:D,getRepresentationInfoForQuality:b,updateData:C,getInitRequest:T,getNextFragmentRequest:S,getFragmentRequestForTime:I,generateFragmentRequestForTime:R,getIndexHandlerTime:A,setIndexHandlerTime:M,getEventsFor:w,getEvent:O,setConfig:e,reset:N,metricsList:y}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(162),o=r(a),s=n(158),u=r(s),l=n(160),d=r(l),f=n(157),c=r(f),g=n(55),h=r(g),p=n(1),m=r(p),v=n(52),_=r(v),y={TCP_CONNECTION:"TcpList",HTTP_REQUEST:"HttpList",TRACK_SWITCH:"RepSwitchList",BUFFER_LEVEL:"BufferLevel",BUFFER_STATE:"BufferState",DVR_INFO:"DVRInfo",DROPPED_FRAMES:"DroppedFrames",SCHEDULING_INFO:"SchedulingInfo",REQUESTS_QUEUE:"RequestsQueue",MANIFEST_UPDATE:"ManifestUpdate",MANIFEST_UPDATE_STREAM_INFO:"ManifestUpdatePeriodInfo",MANIFEST_UPDATE_TRACK_INFO:"ManifestUpdateRepresentationInfo",PLAY_LIST:"PlayList",DVB_ERRORS:"DVBErrors"};i.__dashjs_factory_name="DashAdapter",t["default"]=m["default"].getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(32),s=r(o),u=function(){function e(){i(this,e)}return a(e,null,[{key:"findCencContentProtection",value:function(e){for(var t=null,n=0;n<e.length;++n){var r=e[n];"urn:mpeg:dash:mp4protection:2011"===r.schemeIdUri.toLowerCase()&&"cenc"===r.value.toLowerCase()&&(t=r)}return t}},{key:"getPSSHData",value:function(e){var t=8,n=new DataView(e),r=n.getUint8(t);return t+=20,r>0&&(t+=4+16*n.getUint32(t)),t+=4,e.slice(t)}},{key:"getPSSHForKeySystem",value:function(t,n){var r=e.parsePSSHList(n);return r.hasOwnProperty(t.uuid.toLowerCase())?r[t.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(e){return"pssh"in e?s["default"].decodeArray(e.pssh.__text).buffer:null}},{key:"parsePSSHList",value:function(e){if(null===e)return[];for(var t=new DataView(e),n=!1,r={},i=0;!n;){var a,o,s,u,l,d=i;if(i>=t.buffer.byteLength)break;if(a=t.getUint32(i),o=i+a,i+=4,1886614376===t.getUint32(i))if(i+=4,s=t.getUint8(i),0===s||1===s){i++,i+=3,u="";var f,c;for(f=0;4>f;f++)c=t.getUint8(i+f).toString(16),u+=1===c.length?"0"+c:c;for(i+=4,u+="-",f=0;2>f;f++)c=t.getUint8(i+f).toString(16),u+=1===c.length?"0"+c:c;for(i+=2,u+="-",f=0;2>f;f++)c=t.getUint8(i+f).toString(16),u+=1===c.length?"0"+c:c;for(i+=2,u+="-",f=0;2>f;f++)c=t.getUint8(i+f).toString(16),u+=1===c.length?"0"+c:c;for(i+=2,u+="-",f=0;6>f;f++)c=t.getUint8(i+f).toString(16),u+=1===c.length?"0"+c:c;i+=6,u=u.toLowerCase(),l=t.getUint32(i),i+=4,r[u]=t.buffer.slice(d,o),i=o}else i=o;else i=o}return r}}]),e}();t["default"]=u},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){n(this,e)}return r(e,[{key:"extend",value:function(e,t){if(e){var n=t?t.override:!1,r=t?t.publicOnly:!1;for(var i in e)!e.hasOwnProperty(i)||this[i]&&!n||r&&-1===e[i].indexOf("public_")||(this[i]=e[i])}}}]),e}();t["default"]=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){for(;e.length<t;)e="0"+e;return e}function a(e,t){return e.representation.startNumber+t}function o(e,t,n){for(var r,a,o,s,u,l,d="%0",f=t.length,c=d.length;;){if(r=e.indexOf("$"+t),0>r)return e;if(a=e.indexOf("$",r+f),0>a)return e;if(o=e.indexOf(d,r+f),o>r&&a>o)switch(s=e.charAt(a-1),u=parseInt(e.substring(o+c,a-1),10),s){case"d":case"i":case"u":l=i(n.toString(),u);break;case"x":l=i(n.toString(16),u);break;case"X":l=i(n.toString(16),u).toUpperCase();break;case"o":l=i(n.toString(8),u);break;default:return e}else l=n;e=e.substring(0,r)+l+e.substring(a+1)}}function s(e,t,n,r){var i,o,s,u;return o=n.segmentDuration,isNaN(o)&&(o=n.adaptation.period.duration),s=n.adaptation.period.start+r*o,u=s+o,i=new g["default"],i.representation=n,i.duration=o,i.presentationStartTime=s,i.mediaStartTime=e.calcMediaTimeFromPresentationTime(i.presentationStartTime,n),i.availabilityStartTime=e.calcAvailabilityStartTimeFromPresentationTime(i.presentationStartTime,n.adaptation.period.mpd,t),i.availabilityEndTime=e.calcAvailabilityEndTimeFromPresentationTime(u,n.adaptation.period.mpd,t),i.wallStartTime=e.calcWallTimeForSegment(i,t),i.replacementNumber=a(i,r),i.availabilityIdx=r,i}function u(e,t,n,r,i,s,u,l,d){var f,c,h,p=r/s,m=Math.min(i/s,n.adaptation.period.mpd.maxSegmentDuration);return f=e.calcPresentationTimeFromMediaTime(p,n),c=f+m,h=new g["default"],h.representation=n,h.duration=m,h.mediaStartTime=p,h.presentationStartTime=f,h.availabilityStartTime=n.adaptation.period.mpd.manifest.loadedTime,h.availabilityEndTime=e.calcAvailabilityEndTimeFromPresentationTime(c,n.adaptation.period.mpd,t),h.wallStartTime=e.calcWallTimeForSegment(h,t),h.replacementTime=r,h.replacementNumber=a(h,d),u=o(u,"Number",h.replacementNumber),u=o(u,"Time",h.replacementTime),h.media=u,h.mediaRange=l,h.availabilityIdx=d,h}function l(e,t){if(!t||!t.segments)return null;var n,r,i=t.segments.length;if(i>e&&(n=t.segments[e],n&&n.availabilityIdx===e))return n;for(r=0;i>r;r++)if(n=t.segments[r],n&&n.availabilityIdx===e)return n;return null}function d(e,t,n,r,i){var a,o,s,u=2,l=i||10,d=0,f=Number.POSITIVE_INFINITY;return t&&!e.isTimeSyncCompleted()?s={start:d,end:f}:!t&&n||0>r?null:(a=Math.max(r-u,d),o=Math.min(r+l,f),s={start:a,end:o})}function f(e,t,n,r,i,a){var o,s,u,d=n.segmentDuration,f=n.adaptation.period.mpd.manifest.minBufferTime,c=n.segmentAvailabilityRange,g={start:e.calcPeriodRelativeTimeFromMpdRelativeTime(n,c.start),end:e.calcPeriodRelativeTimeFromMpdRelativeTime(n,c.end)},h=n.segments,p=2*d,m=a||Math.max(2*f,10*d),v=NaN,_=null;return g.start=Math.max(g.start,0),t&&!e.isTimeSyncCompleted()?(o=Math.floor(g.start/d),s=Math.floor(g.end/d),u={start:o,end:s}):(h&&h.length>0?(_=l(i,n),v=_?e.calcPeriodRelativeTimeFromMpdRelativeTime(n,_.presentationStartTime):i>0?i*d:e.calcPeriodRelativeTimeFromMpdRelativeTime(n,r)):v=i>0?i*d:t?g.end:g.start,o=Math.floor(Math.max(v-p,g.start)/d),s=Math.floor(Math.min(o+m/d,g.end/d)),u={start:o,end:s})}Object.defineProperty(t,"__esModule",{value:!0}),t.replaceTokenForTemplate=o,t.getIndexBasedSegment=s,t.getTimeBasedSegment=u,t.getSegmentByIndex=l,t.decideSegmentListRangeForTimeline=d,t.decideSegmentListRangeForTemplate=f;var c=n(56),g=r(c)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){A=0,M=!1,C=NaN,I.on(u["default"].LIVE_EDGE_SEARCH_COMPLETED,_,this),I.on(u["default"].TIME_SYNCHRONIZATION_COMPLETED,y,this)}function t(){return M}function n(e){M=e}function r(){return A}function i(){return C}function a(e){C=e}function s(e,t,n,r){var i=NaN;return i=r?n&&t.timeShiftBufferDepth!=Number.POSITIVE_INFINITY?new Date(t.availabilityStartTime.getTime()+1e3*(e+t.timeShiftBufferDepth)):t.availabilityEndTime:n?new Date(t.availabilityStartTime.getTime()+1e3*(e-A)):t.availabilityStartTime}function l(e,t,n){return s.call(this,e,t,n)}function d(e,t,n){return s.call(this,e,t,n,!0)}function f(e,t){return(e.getTime()-t.mpd.availabilityStartTime.getTime()+1e3*A)/1e3}function c(e,t){var n=t.adaptation.period.start,r=t.presentationTimeOffset;return e+(n-r)}function g(e,t){var n=t.adaptation.period.start,r=t.presentationTimeOffset;return e-n+r}function h(e,t){var n,r,i;return t&&(n=e.representation.adaptation.period.mpd.suggestedPresentationDelay,r=e.presentationStartTime+n,i=new Date(e.availabilityStartTime.getTime()+1e3*r)),i}function p(e,t){var n,r,i=e.adaptation.period.start,a=i+e.adaptation.period.duration,o={start:i,end:a},s=e.segmentDuration||(e.segments&&e.segments.length?e.segments[e.segments.length-1].duration:0);if(!t)return o;if(!M&&e.segmentAvailabilityRange)return e.segmentAvailabilityRange;n=e.adaptation.period.mpd.checkTime,r=f(new Date,e.adaptation.period),i=Math.max(r-e.adaptation.period.mpd.timeShiftBufferDepth,e.adaptation.period.start);var u=isNaN(n)?r:Math.min(n,r),l=e.adaptation.period.start+e.adaptation.period.duration;return a=(u>=l&&l>u-s?l:u)-s,o={start:i,end:a}}function m(e,t){var n=e.adaptation.period.start;return t-n}function v(e,t){var n=e.adaptation.period.start;return t+n}function _(e){M||e.error||(A+=e.liveEdge-(C+e.searchTime),M=!0)}function y(e){M||e.error||(A=e.offset/1e3,M=!0)}function E(e){var t=e.presentationTimeOffset,n=e.adaptation.period.start;return n-t}function T(){I.off(u["default"].LIVE_EDGE_SEARCH_COMPLETED,_,this),I.off(u["default"].TIME_SYNCHRONIZATION_COMPLETED,y,this),A=0,M=!1,C=NaN}var S=this.context,I=(0,o["default"])(S).getInstance(),R=void 0,A=void 0,M=void 0,C=void 0;return R={initialize:e,isTimeSyncCompleted:t,setTimeSyncCompleted:n,getClientTimeOffset:r,getExpectedLiveEdge:i,setExpectedLiveEdge:a,calcAvailabilityStartTimeFromPresentationTime:l,calcAvailabilityEndTimeFromPresentationTime:d,calcPresentationTimeFromWallTime:f,calcPresentationTimeFromMediaTime:c,calcPeriodRelativeTimeFromMpdRelativeTime:m,calcMpdRelativeTimeFromPeriodRelativeTime:v,calcMediaTimeFromPresentationTime:g,calcSegmentAvailabilityRange:p,calcWallTimeForSegment:h,calcMSETimeOffset:E,reset:T}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),o=r(a),s=n(2),u=r(s),l=n(1),d=r(l);i.__dashjs_factory_name="TimelineConverter",t["default"]=d["default"].getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e,t){var n=t.codec,r=null;try{if(n.match(/application\/mp4;\s*codecs="(stpp|wvtt)"/i))throw new R["default"]("not really supported");r=e.addSourceBuffer(n)}catch(i){if(!t.isText&&-1===n.indexOf('codecs="stpp"')&&-1===n.indexOf('codecs="wvtt"'))throw i;r=(0,o["default"])(y).getInstance(),r.setConfig({errHandler:(0,c["default"])(y).getInstance(),adapter:(0,d["default"])(y).getInstance(),dashManifestModel:A,mediaController:(0,u["default"])(y).getInstance(),videoModel:(0,S["default"])(y).getInstance(),streamController:(0,h["default"])(y).getInstance(),textTracks:(0,m["default"])(y).getInstance(),VTTParser:(0,_["default"])(y).getInstance(),TTMLParser:(0,E["default"])(y).getInstance()})}return r}function t(e,t){try{e.removeSourceBuffer(t)}catch(n){}}function n(e,t,n){var r,i,a=null,o=0,s=0,u=null,l=null,d=0,f=n||.15;try{a=e.buffered}catch(c){return null}if(null!==a&&void 0!==a){for(i=0,r=a.length;r>i;i++)if(o=a.start(i),s=a.end(i),null===u)d=Math.abs(o-t),t>=o&&s>t?(u=o,l=s):f>=d&&(u=o,l=s);else{if(d=o-l,!(f>=d))break;l=s}if(null!==u)return{start:u,end:l}}return null}function r(e){var t=null;try{return t=e.buffered}catch(n){return null}}function i(e){var t,n,i=r(e),a=0;if(!i)return a;for(n=0,t=i.length;t>n;n++)a+=i.end(n)-i.start(n);return a}function a(e,t,r){var i,a;return i=n(e,t,r),a=null===i?0:i.end-t}function s(e,t){if(!t)return null;var n,i,a,o,s,u,l,d,f,c=r(t);if(!c)return null;for(var g=0,h=c.length;h>g;g++){if(d=e.length>g,s=d?{start:e.start(g),end:e.end(g)}:null,n=c.start(g),i=c.end(g),!s)return f={start:n,end:i};if(a=s.start===n,o=s.end===i,!a||!o){if(a)f={start:s.end,end:i};else{if(!o)return f={start:n,end:i};f={start:n,end:s.start}}return u=e.length>g+1?{start:e.start(g+1),end:e.end(g+1)}:null,l=h>g+1?{start:c.start(g+1),end:c.end(g+1)}:null,!u||l&&l.start===u.start&&l.end===u.end||(f.end=u.start),f}}return null}function l(e,t){var n=t.bytes,r="append"in e?"append":"appendBuffer"in e?"appendBuffer":null,i="Object"===Object.prototype.toString.call(e).slice(8,-1);if(r)try{v(e,function(){i?e[r](n,t):e[r](n),v(e,function(){T.trigger(b["default"].SOURCEBUFFER_APPEND_COMPLETED,{buffer:e,bytes:n})})})}catch(a){T.trigger(b["default"].SOURCEBUFFER_APPEND_COMPLETED,{buffer:e,bytes:n,error:new R["default"](a.code,a.message,null)})}}function f(e,t,n,r){try{v(e,function(){t>=0&&n>t&&"ended"!==r.readyState&&e.remove(t,n),v(e,function(){T.trigger(b["default"].SOURCEBUFFER_REMOVE_COMPLETED,{buffer:e,from:t,to:n})})})}catch(i){T.trigger(b["default"].SOURCEBUFFER_REMOVE_COMPLETED,{buffer:e,from:t,to:n,error:new R["default"](i.code,i.message,null)})}}function g(e,t){try{"open"===e.readyState&&t.abort()}catch(n){}}function p(e){e&&e.dashManifestModel&&(A=e.dashManifestModel)}function v(e,t){var n,r=50,i=function(){e.updating||(clearInterval(n),t())},a=function s(){e.updating||(e.removeEventListener("updateend",s,!1),t())};if(!e.updating)return void t();if("function"==typeof e.addEventListener)try{e.addEventListener("updateend",a,!1)}catch(o){n=setInterval(i,r)}else n=setInterval(i,r)}var y=this.context,T=(0,M["default"])(y).getInstance(),I=void 0,A=void 0;return I={append:l,remove:f,abort:g,createSourceBuffer:e,removeSourceBuffer:t,getBufferRange:n,getAllRanges:r,getTotalBufferedTime:i,getBufferLength:a,getRangeDifference:s,setConfig:p}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(14),o=r(a),s=n(16),u=r(s),l=n(19),d=r(l),f=n(18),c=r(f),g=n(25),h=r(g),p=n(35),m=r(p),v=n(152),_=r(v),y=n(151),E=r(y),T=n(17),S=r(T),I=n(8),R=r(I),A=n(3),M=r(A),C=n(2),b=r(C),D=n(1),O=r(D),w=22;i.__dashjs_factory_name="SourceBufferController";var N=O["default"].getSingletonFactory(i);N.QUOTA_EXCEEDED_ERROR_CODE=w,t["default"]=N},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){fe=null,le=[],Te=(0,E["default"])(G).getInstance(),ge=!0,he=!1,pe=!1,Se=!1,Ie=!0,Re=null,me=!1,ve=!1}function t(e,t){ge=e,ce=t,ue.initialize(),Q=(0,d["default"])(G).getInstance(),Q.setConfig({log:q,manifestModel:Z,dashManifestModel:J}),Q.initialize(X),ye=(0,_["default"])(G).getInstance(),Ee=(0,o["default"])(G).getInstance(),Ee.setConfig({streamController:z,timelineConverter:ue,metricsModel:ee,dashMetrics:te,manifestModel:Z,dashManifestModel:J,adapter:$,videoModel:ye}),V.on(h["default"].TIME_SYNCHRONIZATION_COMPLETED,P,this),V.on(h["default"].PLAYBACK_SEEKING,g,this),V.on(h["default"].PLAYBACK_TIME_UPDATED,l,this),V.on(h["default"].PLAYBACK_ENDED,f,this),V.on(h["default"].PLAYBACK_ERROR,s,this),V.on(h["default"].PLAYBACK_STARTED,p,this),V.on(h["default"].PLAYBACK_PAUSED,v,this),V.on(h["default"].MANIFEST_UPDATED,L,this),V.on(h["default"].STREAM_BUFFERING_COMPLETED,y,this)}function n(e,t){t=t||new Date,Re&&(de&&de.getProcessors().forEach(function(n){var r=n.getScheduleController();r&&r.finalisePlayList(t,e)}),ee.addPlayList(Re),Re=null)}function r(e){Re=new R["default"],Re.start=new Date,Re.mstart=1e3*Ee.getTime(),Re.starttype=e,de&&de.getProcessors().forEach(function(e){var t=e.getScheduleController();t&&t.setPlayList(Re)})}function i(e,t,n){V.trigger(e,{fromStreamInfo:t?t.getStreamInfo():null,toStreamInfo:n.getStreamInfo()})}function a(){de.isActivated()&&Ie&&0===de.getStreamInfo().index&&(de.startEventController(),ge&&Ee.play())}function s(e){var t=e.error?e.error.code:0,n="";if(-1!==t){switch(t){case 1:n="MEDIA_ERR_ABORTED";break;case 2:n="MEDIA_ERR_NETWORK";break;case 3:n="MEDIA_ERR_DECODE";break;case 4:n="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:n="MEDIA_ERR_ENCRYPTED";break;default:n="UNKNOWN"}me=!0,e.error.msExtendedCode&&(n+=" (0x"+(e.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),q("Video Element Error: "+n),e.error&&q(e.error),se.mediaSourceError(n),Y()}}function l(e){var t=ye.getPlaybackQuality();t&&ee.addDroppedFrames("video",t),Ee.isSeeking()||e.timeToEnd<H&&re.signalEndOfStream(_e)}function f(){var e=T();e&&C(de,e,NaN),n(e?R["default"].Trace.END_OF_PERIOD_STOP_REASON:R["default"].Trace.END_OF_CONTENT_STOP_REASON)}function g(e){var t=S(e.seekTime);t&&t!==de?(n(R["default"].Trace.END_OF_PERIOD_STOP_REASON),C(de,t,e.seekTime)):n(R["default"].Trace.USER_REQUEST_STOP_REASON),r(R["default"].SEEK_START_REASON)}function p(){Ie?(Ie=!1,r(R["default"].INITIAL_PLAYOUT_START_REASON)):Se&&(Se=!1,r(R["default"].RESUME_FROM_PAUSE_START_REASON))}function v(e){e.ended||(Se=!0,n(R["default"].Trace.USER_REQUEST_STOP_REASON))}function y(e){var t=e.streamInfo.isLast;_e&&t&&re.signalEndOfStream(_e)}function T(){var e=de.getStreamInfo().start,t=de.getStreamInfo().duration;return le.filter(function(n){return n.getStreamInfo().start===e+t})[0]}function S(e){var t=0,n=null,r=le.length;r>0&&(t+=le[0].getStartTime());for(var i=0;r>i;i++)if(n=le[i],t+=n.getDuration(),t>e)return n;return null}function I(e,t){for(var n=null,r=0,i=0,a=null,o=le.length,s=0;o>s;s++){if(n=le[s],i=n.getStartTime(),a=n.getDuration(),Number.isFinite(i)&&(r=i),n.getId()===t)return e-r;Number.isFinite(a)&&(r+=a)}return null}function A(){var e=[];return de.getProcessors().forEach(function(t){e.push(t.getIndexHandler().getEarliestTime())}),Math.min.apply(Math,e)}function C(e,t,n){function r(){isNaN(n)?!function(){var e=Ee.getStreamStartTime(!0);de.getProcessors().forEach(function(t){$.setIndexHandlerTime(t,e)}),Ee.seek(e)}():Ee.seek(n),Ee.play(),de.startEventController(),he=!1,i(h["default"].PERIOD_SWITCH_COMPLETED,e,t)}!he&&e&&t&&e!==t&&(he=!0,i(h["default"].PERIOD_SWITCH_STARTED,e,t),e.deactivate(),de=t,Ee.initialize(de.getStreamInfo()),b(r))}function b(e){function t(){q("MediaSource is open!"),window.URL.revokeObjectURL(n),_e.removeEventListener("sourceopen",t),_e.removeEventListener("webkitsourceopen",t),D(),de.activate(_e),e&&e()}var n=void 0;_e?re.detachMediaSource(ye):_e=re.createMediaSource(),_e.addEventListener("sourceopen",t,!1),_e.addEventListener("webkitsourceopen",t,!1),n=re.attachMediaSource(_e,ye),q("MediaSource attached to element.  Waiting on open...")}function D(){var e,t;e=de.getStreamInfo().manifestInfo.duration,t=re.setDuration(_e,e),q("Duration successfully set to: "+t)}function O(){var e,t,n,r,a,o,s,l=Z.getValue(),d=ee.getMetricsFor("stream"),f=te.getCurrentManifestUpdate(d),c=[];if(l){o=$.getStreamsInfo(l),fe&&(V.trigger(h["default"].PROTECTION_CREATED,{controller:fe,manifest:l}),fe.setMediaElement(ye.getElement()),ce&&fe.setProtectionData(ce));try{if(0===o.length)throw new Error("There are no streams");for(ee.updateManifestUpdateInfo(f,{currentTime:Ee.getTime(),buffered:ye.getElement().buffered,presentationStartTime:o[0].start,clientTimeOffset:ue.getClientTimeOffset()}),pe=!0,r=0,t=o.length;t>r;r++){for(e=o[r],a=0,n=le.length;n>a;a++)le[a].getId()===e.id&&(s=le[a],c.push(s),s.updateData(e));s||(s=(0,u["default"])(G).create({manifestModel:Z,manifestUpdater:Q,adapter:$,timelineConverter:ue,capabilities:W,errHandler:se,baseURLController:ae}),s.initialize(e,fe),V.on(h["default"].STREAM_INITIALIZED,N,this),c.push(s),de&&s.updateData(e)),ee.addManifestUpdateStreamInfo(f,e.id,e.index,e.start,e.duration),s=null}le=c,de||(de=le[0],i(h["default"].PERIOD_SWITCH_STARTED,null,de),Ee.initialize(de.getStreamInfo()),i(h["default"].PERIOD_SWITCH_COMPLETED,null,de)),_e||b(),pe=!1,w()}catch(g){se.manifestError(g.message,"nostreamscomposed",l),ve=!0,Y()}}}function w(){if(!pe){var e=le.length,t=0;for(a(),t;e>t;t++)if(!le[t].isInitialized())return;V.trigger(h["default"].STREAMS_COMPOSED)}}function N(){w()}function P(){O()}function L(e){if(e.error)ve=!0,Y();else{var t,n,r=e.manifest,i=$.getStreamsInfo(r)[0],a=$.getMediaInfoForType(r,i,"video")||$.getMediaInfoForType(r,i,"audio");a&&(t=$.getDataForMedia(a),n=J.getRepresentationsForAdaptation(r,t)[0].useCalculatedLiveEdgeTime,n&&(q("SegmentTimeline detected using calculated Live Edge Time"),Te.setUseManifestDateHeaderTimeSource(!1)));var o=J.getUTCTimingSources(e.manifest),s=!J.getIsDynamic(r)||n?o:o.concat(Te.getUTCTimingSources()),u=(0,m["default"])(G).getInstance().isManifestHTTPS();
s.forEach(function(e){e.value.replace(/.*?:\/\//g,"")===E["default"].DEFAULT_UTC_TIMING_SOURCE.value.replace(/.*?:\/\//g,"")&&(e.value=e.value.replace(u?new RegExp(/^(http:)?\/\//i):new RegExp(/^(https:)?\/\//i),u?"https://":"http://"),q("Matching default timing source protocol to manifest protocol: ",e.value))}),ae.initialize(r),ie.setConfig({metricsModel:ee,dashMetrics:te}),ie.initialize(s,Te.getUseManifestDateHeaderTimeSource())}}function x(){return ge}function F(){return de?de.getStreamInfo():null}function U(e){return de.getId()===e.id}function B(e){return le.filter(function(t){return t.getId()===e})[0]}function k(e){X.load(e)}function j(e){Q.setManifest(e)}function K(e){e&&(e.capabilities&&(W=e.capabilities),e.manifestLoader&&(X=e.manifestLoader),e.manifestModel&&(Z=e.manifestModel),e.dashManifestModel&&(J=e.dashManifestModel),e.protectionController&&(fe=e.protectionController),e.adapter&&($=e.adapter),e.metricsModel&&(ee=e.metricsModel),e.dashMetrics&&(te=e.dashMetrics),e.liveEdgeFinder&&(ne=e.liveEdgeFinder),e.mediaSourceController&&(re=e.mediaSourceController),e.timeSyncController&&(ie=e.timeSyncController),e.baseURLController&&(ae=e.baseURLController),e.virtualBuffer&&(oe=e.virtualBuffer),e.errHandler&&(se=e.errHandler),e.timelineConverter&&(ue=e.timelineConverter))}function Y(){ie.reset(),n(me||ve?R["default"].Trace.FAILURE_STOP_REASON:R["default"].Trace.USER_REQUEST_STOP_REASON);for(var e=0,t=le.length;t>e;e++){var r=le[e];V.off(h["default"].STREAM_INITIALIZED,N,this),r.reset(me)}le=[],V.off(h["default"].PLAYBACK_TIME_UPDATED,l,this),V.off(h["default"].PLAYBACK_SEEKING,g,this),V.off(h["default"].PLAYBACK_ERROR,s,this),V.off(h["default"].PLAYBACK_STARTED,p,this),V.off(h["default"].PLAYBACK_PAUSED,v,this),V.off(h["default"].PLAYBACK_ENDED,f,this),V.off(h["default"].MANIFEST_UPDATED,L,this),V.off(h["default"].STREAM_BUFFERING_COMPLETED,y,this),ae.reset(),Q.reset(),ee.clearAllCurrentMetrics(),Z.setValue(null),X.reset(),ue.reset(),ne.reset(),$.reset(),oe.reset(),he=!1,pe=!1,de=null,me=!1,ve=!1,Ie=!0,Se=!1,_e&&(re.detachMediaSource(ye),_e=null),ye=null,fe&&(fe.setMediaElement(null),fe=null,ce=null,Z.getValue()&&V.trigger(h["default"].PROTECTION_DESTROYED,{data:Z.getValue().url})),V.trigger(h["default"].STREAM_TEARDOWN_COMPLETE)}var H=1,G=this.context,q=(0,M["default"])(G).getInstance().log,V=(0,c["default"])(G).getInstance(),z=void 0,W=void 0,Q=void 0,X=void 0,Z=void 0,J=void 0,$=void 0,ee=void 0,te=void 0,ne=void 0,re=void 0,ie=void 0,ae=void 0,oe=void 0,se=void 0,ue=void 0,le=void 0,de=void 0,fe=void 0,ce=void 0,ge=void 0,he=void 0,pe=void 0,me=void 0,ve=void 0,_e=void 0,ye=void 0,Ee=void 0,Te=void 0,Se=void 0,Ie=void 0,Re=void 0;return z={initialize:t,getAutoPlay:x,getActiveStreamInfo:F,isStreamActive:U,getStreamById:B,getTimeRelativeToStreamId:I,load:k,loadWithManifest:j,getActiveStreamCommonEarliestTime:A,setConfig:K,reset:Y},e(),z}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),o=r(a),s=n(91),u=r(s),l=n(89),d=r(l),f=n(3),c=r(f),g=n(2),h=r(g),p=n(39),m=r(p),v=n(17),_=r(v),y=n(5),E=r(y),T=n(1),S=r(T),I=n(68),R=r(I),A=n(4),M=r(A);i.__dashjs_factory_name="StreamController",t["default"]=S["default"].getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(21),u=r(s),l=function(e){function t(){i(this,t);var e=a(this,Object.getPrototypeOf(t).call(this));return e.METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",e.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",e}return o(t,e),t}(u["default"]),d=new l;t["default"]=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){return a}function t(e){a=e,r.trigger(u["default"].MANIFEST_LOADED,{data:e})}var n=this.context,r=(0,o["default"])(n).getInstance(),i=void 0,a=void 0;return i={getValue:e,setValue:t}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),o=r(a),s=n(2),u=r(s),l=n(1),d=r(l);i.__dashjs_factory_name="ManifestModel",t["default"]=d["default"].getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e){e&&e.log&&(y=e.log)}function t(){T=[];var e;e=(0,c["default"])(p).getInstance(),T.push(e),e=(0,d["default"])(p).getInstance(),T.push(e),e=(0,u["default"])(p).getInstance(),T.push(e),S=e}function n(){return T}function r(e){for(var t=0;t<T.length;t++)if(T[t].systemString===e)return T[t];return null}function i(e){return e===S}function a(e,t){if(e.byteLength===t.byteLength){for(var n=new Uint8Array(e),r=new Uint8Array(t),i=0;i<n.length;i++)if(n[i]!==r[i])return!1;return!0}return!1}function s(e){var t,n,r,i,a=[];if(e)for(r=0;r<T.length;++r)for(n=T[r],i=0;i<e.length;++i)if(t=e[i],t.schemeIdUri.toLowerCase()===n.schemeIdURI){var o=n.getInitData(t);o&&a.push({ks:T[r],initData:o})}return a}function l(e){var t,n=[],r=o["default"].parsePSSHList(e);for(t=0;t<T.length;++t)T[t].uuid in r&&n.push({ks:T[t],initData:r[T[t].uuid]});return n}function f(e,t,n){if("license-release"===n||"individualization-request"==n)return null;var r=null;return t&&t.hasOwnProperty("drmtoday")?r=(0,h["default"])(p).getInstance():"com.widevine.alpha"===e.systemString?r=(0,_["default"])(p).getInstance():"com.microsoft.playready"===e.systemString?r=(0,m["default"])(p).getInstance():"org.w3.clearkey"===e.systemString&&(r=(0,E["default"])(p).getInstance()),r}function g(e,t){try{return S.getClearKeysFromProtectionData(e,t)}catch(n){return y("Failed to retrieve clearkeys from ProtectionData"),null}}var p=this.context,v=void 0,y=void 0,T=void 0,S=void 0;return v={initialize:t,isClearKey:i,initDataEquals:a,getKeySystems:n,getKeySystemBySystemString:r,getSupportedKeySystemsFromContentProtection:s,getSupportedKeySystems:l,getLicenseServer:f,processClearKeyLicenseRequest:g,setConfig:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(20),o=r(a),s=n(124),u=r(s),l=n(126),d=r(l),f=n(125),c=r(f),g=n(131),h=r(g),p=n(132),m=r(p),v=n(133),_=r(v),y=n(130),E=r(y),T=n(1),S=r(T);i.__dashjs_factory_name="ProtectionKeyController",t["default"]=S["default"].getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e,t){var n=0;for(n=0;n<this.customTimeRangeArray.length&&e>this.customTimeRangeArray[n].start;n++);for(this.customTimeRangeArray.splice(n,0,{start:e,end:t}),n=0;n<this.customTimeRangeArray.length-1;n++)this.mergeRanges(n,n+1)&&n--;this.length=this.customTimeRangeArray.length}function t(){this.customTimeRangeArray=[],this.length=0}function n(e,t){for(var n=0;n<this.customTimeRangeArray.length;n++)if(e<=this.customTimeRangeArray[n].start&&t>=this.customTimeRangeArray[n].end)this.customTimeRangeArray.splice(n,1),n--;else{if(e>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end){this.customTimeRangeArray.splice(n+1,0,{start:t,end:this.customTimeRangeArray[n].end}),this.customTimeRangeArray[n].end=e;break}e>this.customTimeRangeArray[n].start&&e<this.customTimeRangeArray[n].end?this.customTimeRangeArray[n].end=e:t>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end&&(this.customTimeRangeArray[n].start=t)}this.length=this.customTimeRangeArray.length}function r(e,t){var n=this.customTimeRangeArray[e],r=this.customTimeRangeArray[t];return n.start<=r.start&&r.start<=n.end&&n.end<=r.end?(n.end=r.end,this.customTimeRangeArray.splice(t,1),!0):r.start<=n.start&&n.start<=r.end&&r.end<=n.end?(n.start=r.start,this.customTimeRangeArray.splice(t,1),!0):r.start<=n.start&&n.start<=r.end&&n.end<=r.end?(this.customTimeRangeArray.splice(e,1),!0):n.start<=r.start&&r.start<=n.end&&r.end<=n.end?(this.customTimeRangeArray.splice(t,1),!0):!1}function i(e){return this.customTimeRangeArray[e].start}function a(e){return this.customTimeRangeArray[e].end}var o=[],s=0;return{customTimeRangeArray:o,length:s,add:e,clear:t,remove:n,mergeRanges:r,start:i,end:a}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a);i.__dashjs_factory_name="CustomTimeRanges",t["default"]=o["default"].getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e){var t="";return-1!==e.indexOf("/")&&(-1!==e.indexOf("?")&&(e=e.substring(0,e.indexOf("?"))),t=e.substring(0,e.lastIndexOf("/")+1)),t}function t(e){return!r.test(e)}var n=void 0,r=/^(?:(?:[a-z]+:)?\/)?\//i;return n={parseBaseUrl:e,isRelative:t}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a);i.__dashjs_factory_name="URLUtils",t["default"]=o["default"].getSingletonFactory(i)},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function i(){n(this,i),this.action=i.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer"};r.ACTION_DOWNLOAD="download",r.ACTION_COMPLETE="complete",t["default"]=r},function(e,t,n){"use strict";var r={};r.encode=function(e){for(var t=[],n=0;n<e.length;++n){var r=e.charCodeAt(n);128>r?t.push(r):2048>r?(t.push(192|r>>6),t.push(128|63&r)):65536>r?(t.push(224|r>>12),t.push(128|63&r>>6),t.push(128|63&r)):(t.push(240|r>>18),t.push(128|63&r>>12),t.push(128|63&r>>6),t.push(128|63&r))}return t},r.decode=function(e){for(var t=[],n=0;n<e.length;){var r=e[n++];128>r||(224>r?(r=(31&r)<<6,r|=63&e[n++]):240>r?(r=(15&r)<<12,r|=(63&e[n++])<<6,r|=63&e[n++]):(r=(7&r)<<18,r|=(63&e[n++])<<12,r|=(63&e[n++])<<6,r|=63&e[n++])),t.push(String.fromCharCode(r))}return t.join("")};var i={};!function(e){var t=function(t){for(var n=0,r=[],i=0|t.length/3;0<i--;){var a=(t[n]<<16)+(t[n+1]<<8)+t[n+2];n+=3,r.push(e.charAt(63&a>>18)),r.push(e.charAt(63&a>>12)),r.push(e.charAt(63&a>>6)),r.push(e.charAt(63&a))}if(2==t.length-n){var a=(t[n]<<16)+(t[n+1]<<8);r.push(e.charAt(63&a>>18)),r.push(e.charAt(63&a>>12)),r.push(e.charAt(63&a>>6)),r.push("=")}else if(1==t.length-n){var a=t[n]<<16;r.push(e.charAt(63&a>>18)),r.push(e.charAt(63&a>>12)),r.push("==")}return r.join("")},n=function(){for(var t=[],n=0;n<e.length;++n)t[e.charCodeAt(n)]=n;return t["=".charCodeAt(0)]=0,t}(),o=function(e){for(var t=0,r=[],i=0|e.length/4;0<i--;){var a=(n[e.charCodeAt(t)]<<18)+(n[e.charCodeAt(t+1)]<<12)+(n[e.charCodeAt(t+2)]<<6)+n[e.charCodeAt(t+3)];r.push(255&a>>16),r.push(255&a>>8),r.push(255&a),t+=4}return r&&("="==e.charAt(t-2)?(r.pop(),r.pop()):"="==e.charAt(t-1)&&r.pop()),r},u={};u.encode=function(e){for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t},u.decode=function(e){for(var t=0;t<s.length;++t)a[t]=String.fromCharCode(a[t]);return a.join("")},i.decodeArray=function(e){var t=o(e);return new Uint8Array(t)},i.encodeASCII=function(e){var n=u.encode(e);return t(n)},i.decodeASCII=function(e){var t=o(e);return u.decode(t)},i.encode=function(e){var n=r.encode(e);return t(n)},i.decode=function(e){var t=o(e);return r.decode(t)}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),t.decode=i.decode,t.decodeArray=i.decodeArray},function(e,t){"use strict";function n(e,t,n){function r(e){var t=e.localName;return null==t&&(t=e.baseName),null!=t&&""!=t||(t=e.nodeName),t}function i(e){return e.prefix}function a(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;"):e}function o(e){return e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/")}function s(a){if(a.nodeType==E.DOCUMENT_NODE){var u,l,d,f=a.firstChild;for(l=0,d=a.childNodes.length;d>l;l+=1)if(a.childNodes[l].nodeType!==E.COMMENT_NODE){f=a.childNodes[l];break}if(n)u=s(f);else{u={};var c=r(f);u[c]=s(f)}return u}if(a.nodeType==E.ELEMENT_NODE){var u=new Object;u.__cnt=0;for(var g=[],h=a.childNodes,p=0;p<h.length;p++){var f=h.item(p),c=r(f);if(u.__cnt++,null==u[c]){var m=s(f);if("#text"!=c||/[^\s]/.test(m)){var v={};v[c]=m,g.push(v)}u[c]=m,u[c+"_asArray"]=new Array(1),u[c+"_asArray"][0]=u[c]}else{if(null!=u[c]&&!(u[c]instanceof Array)){var _=u[c];u[c]=new Array,u[c][0]=_,u[c+"_asArray"]=u[c]}for(var T=0;null!=u[c][T];)T++;var m=s(f);if("#text"!=c||/[^\s]/.test(m)){var v={};v[c]=m,g.push(v)}u[c][T]=m}}u.__children=g;for(var S=0;S<a.attributes.length;S++){var I=a.attributes.item(S);u.__cnt++;for(var R=I.value,A=0,M=e.length;M>A;A++){var C=e[A];C.test.call(this,I)&&(R=C.converter.call(this,I.value))}u[t+I.name]=R}var b=i(a);return null!=b&&""!=b&&(u.__cnt++,u.__prefix=b),1==u.__cnt&&null!=u["#text"]&&(u=u["#text"]),null!=u["#text"]&&(u.__text=u["#text"],y&&(u.__text=o(u.__text)),delete u["#text"],delete u["#text_asArray"]),null!=u["#cdata-section"]&&(u.__cdata=u["#cdata-section"],delete u["#cdata-section"],delete u["#cdata-section_asArray"]),null==u.__text&&null==u.__cdata||(u.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),u}return a.nodeType==E.TEXT_NODE||a.nodeType==E.CDATA_SECTION_NODE?a.nodeValue:a.nodeType==E.COMMENT_NODE?null:void 0}function u(e,t,n,r){var i="<"+(null!=e&&null!=e.__prefix?e.__prefix+":":"")+t;if(null!=n)for(var a=0;a<n.length;a++){var o=n[a],s=e[o];i+=" "+o.substr(1)+"='"+s+"'"}return i+=r?"/>":">"}function l(e,t){return"</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}function d(e,t){return-1!==e.indexOf(t,e.length-t.length)}function f(e,t){return!!(d(t.toString(),"_asArray")||0==t.toString().indexOf("_")||e[t]instanceof Function)}function c(e){var t=0;if(e instanceof Object)for(var n in e)f(e,n)||t++;return t}function g(e){var t=[];if(e instanceof Object)for(var n in e)-1==n.toString().indexOf("__")&&0==n.toString().indexOf("_")&&t.push(n);return t}function h(e){var t="";return null!=e.__cdata&&(t+="<![CDATA["+e.__cdata+"]]>"),null!=e.__text&&(t+=y?a(e.__text):e.__text),t}function p(e){var t="";return e instanceof Object?t+=h(e):null!=e&&(t+=y?a(e):e),t}function m(e,t,n){var r="";if(0==e.length)r+=u(e,t,n,!0);else for(var i=0;i<e.length;i++)r+=u(e[i],t,g(e[i]),!1),r+=v(e[i]),r+=l(e[i],t);return r}function v(e){var t="",n=c(e);if(n>0)for(var r in e)if(!f(e,r)){var i=e[r],a=g(i);if(null==i||void 0==i)t+=u(i,r,a,!0);else if(i instanceof Object)if(i instanceof Array)t+=m(i,r,a);else{var o=c(i);o>0||null!=i.__text||null!=i.__cdata?(t+=u(i,r,a,!1),t+=v(i),t+=l(i,r)):t+=u(i,r,a,!0)}else t+=u(i,r,a,!1),t+=p(i),t+=l(i,r)}return t+=p(e)}null!==t&&void 0!==t||(t="_"),null!==n&&void 0!==n||(n=!1);var _="1.0.11",y=!1,E={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};this.parseXmlString=function(e){var t,n,r;if(window.DOMParser){n=new window.DOMParser;try{r=n.parseFromString("<","text/xml").getElementsByTagName("parsererror")[0].namespaceURI}catch(i){}try{t=n.parseFromString(e,"text/xml"),r&&t.getElementsByTagNameNS(r,"parsererror").length&&(t=void 0)}catch(i){}}else 0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e);return t},this.xml2json=function(e){return s(e)},this.xml_str2json=function(e){var t=this.parseXmlString(e);return t?this.xml2json(t):void 0},this.json2xml_str=function(e){return v(e)},this.json2xml=function(e){var t=this.json2xml_str(e);return this.parseXmlString(t)},this.getVersion=function(){return _},this.escapeMode=function(e){y=e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(21),u=r(s),l=function(e){function t(){i(this,t);var e=a(this,Object.getPrototypeOf(t).call(this));return e.BUFFER_EMPTY="bufferstalled",e.BUFFER_LOADED="bufferloaded",e.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",e.ERROR="error",e.LOG="log",e.MANIFEST_LOADED="manifestloaded",e.METRICS_CHANGED="metricschanged",e.METRIC_CHANGED="metricchanged",e.METRIC_ADDED="metricadded",e.METRIC_UPDATED="metricupdated",e.PERIOD_SWITCH_COMPLETED="streamswitchcompleted",e.PERIOD_SWITCH_STARTED="streamswitchstarted",e.STREAM_INITIALIZED="streaminitialized",e.TEXT_TRACKS_ADDED="alltexttracksadded",e.TEXT_TRACK_ADDED="texttrackadded",e.CAN_PLAY="canPlay",e.PLAYBACK_ENDED="playbackEnded",e.PLAYBACK_ERROR="playbackError",e.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",e.PLAYBACK_PAUSED="playbackPaused",e.PLAYBACK_PLAYING="playbackPlaying",e.PLAYBACK_PROGRESS="playbackProgress",e.PLAYBACK_RATE_CHANGED="playbackRateChanged",e.PLAYBACK_SEEKED="playbackSeeked",e.PLAYBACK_SEEKING="playbackSeeking",e.PLAYBACK_STARTED="playbackStarted",e.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",e}return o(t,e),t}(u["default"]),d=new l;t["default"]=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){C=window.VTTCue||window.TextTrackCue,O=[],w=[],N=-1,P=0,L=0,x=0,F=0,U=null,B=null,K=!1,Y=2147483647,k=!!navigator.userAgent.match(/Chrome/)&&!navigator.userAgent.match(/Edge/),void 0!==document.fullscreenElement?j="fullscreenElement":void 0!==document.webkitIsFullScreen?j="webkitIsFullScreen":document.msFullscreenElement?j="msFullscreenElement":document.mozFullScreen&&(j="mozFullScreen")}function t(e){var t=O[e].kind,n=void 0!==O[e].label?O[e].label:O[e].lang,r=O[e].lang,i=k?document.createElement("track"):D.addTextTrack(t,n,r);return k&&(i.kind=t,i.label=n,i.srclang=r),i}function n(e){K=e,U&&!document[j]&&(U.style.zIndex=e?Y:null)}function r(e,n){if(O.length===n)return void A("Trying to add too many tracks.");if(O.push(e),void 0===D&&(D=e.video),O.length===n){O.sort(function(e,t){return e.index-t.index}),U=b.getTTMLRenderingDiv();for(var r=-1,i=0;i<O.length;i++){var a=t.call(this,i);w.push(a),O[i].defaultTrack&&(a["default"]=!0,r=i),k&&D.appendChild(a);var o=D.textTracks[i];o.nonAddedCues=[],U&&(O[i].isTTML||O[i].isEmbedded)?o.renderingType="html":o.renderingType="default",this.addCaptions(i,0,O[i].captionData),R.trigger(u["default"].TEXT_TRACK_ADDED)}h.call(this,r),r>=0&&(D.textTracks[r].mode="showing",this.addCaptions(r,0,null)),R.trigger(u["default"].TEXT_TRACKS_ADDED,{index:N,tracks:O})}}function i(e,t,n,r,i,a){var o=e/t,s=n/r,u=0,l=0,d=0,f=0;o>s?(f=t,d=f/r*n,u=(e-d)/2,l=0):(d=e,f=d/n*r,u=0,l=(t-f)/2);var c=0,g=0,h=0,p=0,m=d/f;return m>i?(p=f,h=f/(1/i),c=(e-h)/2,g=0):(h=d,p=d/i,c=0,g=(t-p)/2),a?{x:c+.1*h,y:g+.1*p,w:.8*h,h:.8*p}:{x:c,y:g,w:h,h:p}}function a(){var e=this.getCurrentTextTrack();if(e&&"html"===e.renderingType){var t=1;e.cellResolution&&(t=e.cellResolution[0]/e.cellResolution[1]);var n=!1;e.isFromCEA608&&(t=3.5/3,n=!0);var r=i.call(this,D.clientWidth,D.clientHeight,D.videoWidth,D.videoHeight,t,n),a=r.w,o=r.h;if(a!=x||o!=F){P=r.x,L=r.y,x=a,F=o,U.style.left=P+"px",U.style.top=L+"px",U.style.width=x+"px",U.style.height=F+"px";for(var s=0;e.activeCues&&s<e.activeCues.length;++s){var u=e.activeCues[s];u.scaleCue(u)}j&&document[j]||K?U.style.zIndex=Y:U.style.zIndex=null}}}function s(e){var t,n,r,i=x,a=F,o=[i/e.cellResolution[0],a/e.cellResolution[1]];if(e.linePadding)for(t in e.linePadding)if(e.linePadding.hasOwnProperty(t)){var s=e.linePadding[t];n=(s*o[0]).toString();for(var u=document.getElementsByClassName("spanPadding"),l=0;l<u.length;l++)u[l].style.cssText=u[l].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+n),u[l].style.cssText=u[l].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+n)}if(e.fontSize)for(t in e.fontSize)if(e.fontSize.hasOwnProperty(t)){var d=e.fontSize[t]/100;n=(d*o[1]).toString(),r="defaultFontSize"!==t?document.getElementsByClassName(t):document.getElementsByClassName("paragraph");for(var f=0;f<r.length;f++)r[f].style.cssText=r[f].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+n)}if(e.lineHeight)for(t in e.lineHeight)if(e.lineHeight.hasOwnProperty(t)){var c=e.lineHeight[t]/100;n=(c*o[1]).toString(),r=document.getElementsByClassName(t);for(var g=0;g<r.length;g++)r[g].style.cssText=r[g].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+n)}}function l(e,t,n){var r=e>=0?D.textTracks[e]:null,i=this;if(r){if("showing"!==r.mode)return void(n&&n.length>0&&(r.nonAddedCues=r.nonAddedCues.concat(n)));if(n||(n=r.nonAddedCues,r.nonAddedCues=[]),n&&0!==n.length)for(var o in n){var u,l=n[o];r.cellResolution=l.cellResolution,r.isFromCEA608=l.isFromCEA608,B||"html"!=l.type||(B=setInterval(a.bind(this),500)),"image"==l.type?(u=new C(l.start-t,l.end-t,""),u.image=l.data,u.id=l.id,u.size=0,u.type="image",u.onenter=function(){var e=new Image;e.id="ttmlImage_"+this.id,e.src=this.image,e.className="cue-image",U?U.appendChild(e):D.parentNode.appendChild(e)},u.onexit=function(){var e,t,n;for(e=U?U:D.parentNode,n=e.childNodes,t=0;t<n.length;t++)n[t].id=="ttmlImage_"+this.id&&e.removeChild(n[t])}):"html"===l.type?(u=new C(l.start-t,l.end-t,""),u.cueHTMLElement=l.cueHTMLElement,u.regions=l.regions,u.regionID=l.regionID,u.cueID=l.cueID,u.videoWidth=l.videoWidth,u.videoHeight=l.videoHeight,u.cellResolution=l.cellResolution,u.fontSize=l.fontSize,u.lineHeight=l.lineHeight,u.linePadding=l.linePadding,u.scaleCue=s.bind(i),U.style.left=P+"px",U.style.top=L+"px",U.style.width=x+"px",U.style.height=F+"px",u.onenter=function(){"showing"==r.mode&&(U.appendChild(this.cueHTMLElement),s.call(i,this))},u.onexit=function(){for(var e=U.childNodes,t=0;t<e.length;++t)e[t].id=="subtitle_"+this.cueID&&U.removeChild(e[t])}):(u=new C(l.start-t,l.end-t,l.data),l.styles&&(void 0!==l.styles.align&&u.hasOwnProperty("align")&&(u.align=l.styles.align),void 0!==l.styles.line&&u.hasOwnProperty("line")&&(u.line=l.styles.line),void 0!==l.styles.position&&u.hasOwnProperty("position")&&(u.position=l.styles.position),void 0!==l.styles.size&&u.hasOwnProperty("size")&&(u.size=l.styles.size))),r.addCue(u)}}}function d(){return N>=0?D.textTracks[N]:null}function f(){return N}function g(e){for(var t=-1,n=0;n<D.textTracks.length;n++)if(D.textTracks[n].label===e){t=n;break}return t}function h(e){if(N=e,T.call(this),e>=0){var t=D.textTracks[e];"html"===t.renderingType?y.call(this):E.call(this)}else E.call(this)}function p(e){return D.textTracks[e]}function m(e){if(e.cues){for(var t=e.cues,n=t.length-1,r=n;r>=0;r--)e.removeCue(t[r]);e.mode="disabled"}}function v(){for(var e=w.length,t=0;e>t;t++)if(k)D.removeChild(w[t]);else{var n=p.call(this,t);n.nonAddedCues=[],m.call(this,n)}w=[],O=[],B&&(clearInterval(B),B=null),T.call(this)}function _(e){D.removeChild(w[e]),w.splice(e,1)}function y(){if(k){var e=document.getElementById("native-cue-style");if(!e){e=document.createElement("style"),e.id="native-cue-style",document.head.appendChild(e);var t=e.sheet;D.id?t.insertRule("#"+D.id+"::cue {background: transparent}",0):0!==D.classList.length?t.insertRule("."+D.className+"::cue {background: transparent}",0):t.insertRule("video::cue {background: transparent}",0)}}}function E(){if(k){var e=document.getElementById("native-cue-style");e&&document.head.removeChild(e)}}function T(){if(U)for(;U.firstChild;)U.removeChild(U.firstChild)}function S(e){e&&e.videoModel&&(b=e.videoModel)}var I=this.context,R=(0,o["default"])(I).getInstance(),A=(0,c["default"])(I).getInstance().log,M=void 0,C=void 0,b=void 0,D=void 0,O=void 0,w=void 0,N=void 0,P=void 0,L=void 0,x=void 0,F=void 0,U=void 0,B=void 0,k=void 0,j=void 0,K=void 0,Y=void 0;return M={initialize:e,displayCConTop:n,addTextTrack:r,addCaptions:l,getTextTrack:p,getCurrentTextTrack:d,getCurrentTrackIdx:f,setCurrentTrackIdx:h,getTrackIdxForId:g,deleteTrackCues:m,deleteAllTextTracks:v,deleteTextTrack:_,setConfig:S}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),o=r(a),s=n(2),u=r(s),l=n(1),d=r(l),f=n(4),c=r(f);i.__dashjs_factory_name="TextTracks",t["default"]=d["default"].getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){T={}}function t(e){var t=e.streamId,n=e.mediaInfo.type,r=e.segmentType,i=e.start,a=e.end;T[t]=T[t]||v(),T[t][n][r].push(e),g(T[t][n][r],"index"),isNaN(i)||isNaN(a)||(T[t][n].calculatedBufferedRanges.add(i,a),y.trigger(h["default"].CHUNK_APPENDED,{chunk:e,sender:this}))}function n(e,t){if(e&&t){var n,r,a=e.streamId,o=e.mediaInfo.type,s=T[a][o].actualBufferedRanges,u=i({streamId:a,mediaType:o,appended:!0,start:e.start})[0];if(u?(r=T[a][o].appended.indexOf(u),T[a][o].appended[r]=e):T[a][o].appended.push(e),g(T[a][o].appended,"start"),n=S.getRangeDifference(s,t),!n)return void(u?e.bufferedRange=u.bufferedRange:e.bufferedRange={start:e.start,end:e.end});e.bufferedRange=n,s.add(n.start,n.end),u&&(e.bufferedRange.start=Math.min(u.bufferedRange.start,n.start),e.bufferedRange.end=Math.max(u.bufferedRange.end,n.end))}}function r(e,t){if(e){var n,r,a=e.streamId,o=e.mediaType,s=i({streamId:a,mediaType:o,appended:!0}),l=[];if(T[a][o].actualBufferedRanges=(0,u["default"])(_).create(),!t||0===t.length)return void(T[a][o].appended=[]);for(var d=0,f=t.length;f>d;d++)n=t.start(d),r=t.end(d),T[a][o].actualBufferedRanges.add(n,r),l=l.concat(m(s,{start:n,end:r},!0));T[a][o].appended=l}}function i(e){var t,n=p(e),r=e.segmentType,i=e.appended,a=e.removeOrigin,s=e.limit||Number.POSITIVE_INFINITY,u=(0,o["default"])(_).getInstance(),l=0,d=[];return n?(delete e.streamId,delete e.mediaType,delete e.segmentType,delete e.removeOrigin,delete e.limit,delete e.appended,t=i?n.appended:r?n[r]:[],d=t.filter(function(t,r,i){if(l>=s)return!1;for(var o in e){if("mediaInfo"===o)return u.isTracksEqual(t[o],e[o]);if(e.hasOwnProperty(o)&&t[o]!=e[o])return!1}return a&&(n.calculatedBufferedRanges.remove(t.start,t.end),i.splice(r,1)),l++,!0}),e.forRange&&(d=m(d,e.forRange,!1)),d):d}function a(e){return e.removeOrigin=!0,i(e)}function s(e){var t=e.type,n=0;for(var r in T)T.hasOwnProperty(r)&&(n+=S.getTotalBufferedTime({buffered:T[r][t].calculatedBufferedRanges}));return n}function l(e){e&&e.sourceBufferController&&(S=e.sourceBufferController)}function f(){T={}}function g(e,t){var n=function(e,n){return e[t]<n[t]?-1:e[t]>n[t]?1:0};e.sort(n)}function p(e){var t=e.streamId,n=e.mediaType;return T[t]?T[t][n]:null}function m(e,t,n){var r,i,a,o,s=t.start,u=t.end,l=[];return e.forEach(function(e){r=e.bufferedRange.start,i=e.bufferedRange.end,a=r>=s&&u>r,o=i>s&&u>=i,(a||o)&&(l.push(e),n&&(e.bufferedRange.start=a?r:s,e.bufferedRange.end=o?i:u))}),l}function v(){var e={};return e.audio={calculatedBufferedRanges:(0,u["default"])(_).create(),actualBufferedRanges:(0,u["default"])(_).create(),appended:[]},e.audio[d["default"].MEDIA_SEGMENT_TYPE]=[],e.audio[d["default"].INIT_SEGMENT_TYPE]=[],e.video={calculatedBufferedRanges:(0,u["default"])(_).create(),actualBufferedRanges:(0,u["default"])(_).create(),appended:[]},e.video[d["default"].MEDIA_SEGMENT_TYPE]=[],e.video[d["default"].INIT_SEGMENT_TYPE]=[],e.fragmentedText={calculatedBufferedRanges:(0,u["default"])(_).create(),actualBufferedRanges:(0,u["default"])(_).create(),appended:[]},e.fragmentedText[d["default"].MEDIA_SEGMENT_TYPE]=[],e.fragmentedText[d["default"].INIT_SEGMENT_TYPE]=[],e}var _=this.context,y=(0,c["default"])(_).getInstance(),E=void 0,T=void 0,S=void 0;return E={append:t,extract:a,getChunks:i,storeAppendedChunk:n,updateBufferedRanges:r,getTotalBufferLevel:s,setConfig:l,reset:f},e(),E}Object.defineProperty(t,"__esModule",{value:!0});var a=n(16),o=r(a),s=n(29),u=r(s),l=n(6),d=r(l),f=n(3),c=r(f),g=n(2),h=r(g),p=n(1),m=r(p);i.__dashjs_factory_name="VirtualBuffer",t["default"]=m["default"].getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){function t(){var e;h=[],p=[],m=[],e={},i(e,s["default"].MPD_TYPE,l.DOWNLOAD_ERROR_ID_MANIFEST),i(e,s["default"].XLINK_EXPANSION_TYPE,l.DOWNLOAD_ERROR_ID_XLINK),i(e,s["default"].INIT_SEGMENT_TYPE,l.DOWNLOAD_ERROR_ID_CONTENT),i(e,s["default"].MEDIA_SEGMENT_TYPE,l.DOWNLOAD_ERROR_ID_CONTENT),i(e,s["default"].INDEX_SEGMENT_TYPE,l.DOWNLOAD_ERROR_ID_CONTENT),i(e,s["default"].BITSTREAM_SWITCHING_SEGMENT_TYPE,l.DOWNLOAD_ERROR_ID_CONTENT),i(e,s["default"].OTHER_TYPE,l.DOWNLOAD_ERROR_ID_CONTENT),v=e}function n(e,t){var r=e.request,i=new XMLHttpRequest,a=[],o=!0,s=!0,f=new Date,g=f,_=0,y=function(e){s=!1,r.requestStartDate=f,r.requestEndDate=new Date,r.firstByteDate=r.firstByteDate||f,r.checkExistenceOnly||d.addHttpRequest(r.mediaType,null,r.type,r.url,i.responseURL||null,r.serviceLocation||null,r.range||null,r.requestStartDate,r.firstByteDate,r.requestEndDate,i.status,r.duration,i.getAllResponseHeaders(),e?a:null)},E=function(){-1!==h.indexOf(i)&&(h.splice(h.indexOf(i),1),s&&(y(!1),t>0?(t--,m.push(setTimeout(function(){n(e,t)},u.getRetryIntervalForType(r.type)))):(l.downloadError(v[r.type],r.url,r),e.error&&e.error(r,"error",i.statusText),e.complete&&e.complete(r,i.statusText))))},T=function(t){var n=new Date;o&&(o=!1,(!t.lengthComputable||t.lengthComputable&&t.total!==t.loaded)&&(r.firstByteDate=n)),t.lengthComputable&&(r.bytesLoaded=t.loaded,r.bytesTotal=t.total),a.push({s:g,d:n.getTime()-g.getTime(),b:[t.loaded?t.loaded-_:0]}),g=n,_=t.loaded,e.progress&&e.progress()},S=function(){i.status>=200&&i.status<=299&&(y(!0),e.success&&e.success(i.response,i.statusText,i),e.complete&&e.complete(r,i.statusText))};try{var I=c.modifyRequestURL(r.url),R=r.checkExistenceOnly?"HEAD":"GET";i.open(R,I,!0),r.responseType&&(i.responseType=r.responseType),r.range&&i.setRequestHeader("Range","bytes="+r.range),r.requestStartDate||(r.requestStartDate=f),i=c.modifyRequestHeader(i),i.onload=S,i.onloadend=E,i.onerror=E,i.onprogress=T;var A=(new Date).getTime();isNaN(r.delayLoadingTime)||A>=r.delayLoadingTime?(h.push(i),i.send()):!function(){var e={xhr:i};p.push(e),e.delayTimeout=setTimeout(function(){if(-1!==p.indexOf(e)){p.splice(p.indexOf(e),1);try{h.push(e.xhr),e.xhr.send()}catch(t){e.xhr.onerror()}}},r.delayLoadingTime-A)}()}catch(M){i.onerror()}}function r(e){e.request&&n(e,u.getRetryAttemptsForType(e.request.type))}function a(){m.forEach(function(e){return clearTimeout(e)}),m=[],p.forEach(function(e){return clearTimeout(e.delayTimeout)}),p=[],h.forEach(function(e){e.onloadend=e.onerror=void 0,e.abort()}),h=[]}var o=this.context,u=(0,f["default"])(o).getInstance(),l=e.errHandler,d=e.metricsModel,c=e.requestModifier,g=void 0,h=void 0,p=void 0,m=void 0,v=void 0;return g={load:r,abort:a},t(),g}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),s=r(o),u=n(1),l=r(u),d=n(5),f=r(d);a.__dashjs_factory_name="XHRLoader";var c=l["default"].getClassFactory(a);
t["default"]=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){O=null,P=null,w=[],N=[],C.on(u["default"].LOADING_COMPLETED,R,D)}function n(e){P=e}function r(e){O=e}function i(){return O}function a(e){var t=function(e,t){return e.action===c["default"].ACTION_COMPLETE&&e.action===t.action},n=function(e,t){return!isNaN(e.index)&&e.index===t.index&&e.startTime===t.startTime&&e.adaptationIndex===t.adaptationIndex},r=function(e,t){return isNaN(e.index)&&isNaN(t.index)&&e.quality===t.quality},i=function(i){var a,o,s=!1,u=i.length;for(o=0;u>o;o++)if(a=i[o],n(e,a)||r(e,a)||t(e,a)){s=!0;break}return s};return i(N)||i(w)}function s(e){var t,n=[],r=[],i=1;if(!e||!e.state)return n;e.state instanceof Array?(i=e.state.length,t=e.state):t=[e.state];for(var a=0;i>a;a++)n=S(t[a]),r=r.concat(T(n,e));return r}function l(e){var t,n=w.length-1,r=NaN,i=null;for(t=n;t>=0;t--)i=w[t],r=i.startTime,!isNaN(r)&&e>r&&y(w,i)}function d(){var e=[];for(P.abort();N.length>0;)e.push(N[0]),y(N,N[0]);return N=[],e}function f(e){if(e)switch(e.action){case c["default"].ACTION_COMPLETE:w.push(e),I(e,m),C.trigger(u["default"].STREAM_COMPLETED,{request:e,fragmentModel:this});break;case c["default"].ACTION_DOWNLOAD:I(e,p),N.push(e),v(e);break;default:M("Unknown request action.")}}function g(){C.off(u["default"].LOADING_COMPLETED,R,this),P&&(P.reset(),P=null),A=null,w=[],N=[]}function v(e){C.trigger(u["default"].FRAGMENT_LOADING_STARTED,{sender:D,request:e}),P.load(e)}function y(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}function E(e,t,n){var r,i=e.length-1,a=NaN,o=NaN,s=null;for(r=i;r>=0;r--)if(s=e[r],a=s.startTime,o=a+s.duration,n=n||s.duration/2,!isNaN(a)&&!isNaN(o)&&t+n>=a&&o>t-n||isNaN(a)&&isNaN(t))return s;return null}function T(e,t){return t?t.hasOwnProperty("time")?[E(e,t.time,t.threshold)]:e.filter(function(e){for(var n in t)if("state"!==n&&t.hasOwnProperty(n)&&e[n]!=t[n])return!1;return!0}):e}function S(e){var t;switch(e){case p:t=N;break;case m:t=w;break;default:t=[]}return t}function I(e,t){if(e){var n=e.mediaType,r=new Date,i=e.type,a=e.startTime,o=e.availabilityStartTime,s=e.duration,u=e.quality,l=e.range;b.addSchedulingInfo(n,r,i,a,o,s,u,l,t),b.addRequestsQueue(n,N,w)}}function R(e){if(e.sender===P){var t=e.request,n=e.response,r=e.error;N.splice(N.indexOf(t),1),n&&!r&&w.push(t),I(t,r?_:m),C.trigger(u["default"].FRAGMENT_LOADING_COMPLETED,{request:t,response:n,error:r,sender:this})}}var A=this.context,M=(0,h["default"])(A).getInstance().log,C=(0,o["default"])(A).getInstance(),b=e.metricsModel,D=void 0,O=void 0,w=void 0,N=void 0,P=void 0;return D={setLoader:n,setScheduleController:r,getScheduleController:i,getRequests:s,isFragmentLoaded:a,removeExecutedRequestsBeforeTime:l,abortRequests:d,executeRequest:f,reset:g},t(),D}Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),o=r(a),s=n(2),u=r(s),l=n(1),d=r(l),f=n(31),c=r(f),g=n(4),h=r(g),p="loading",m="executed",v="canceled",_="failed";i.__dashjs_factory_name="FragmentModel";var y=d["default"].getClassFactory(i);y.FRAGMENT_MODEL_LOADING=p,y.FRAGMENT_MODEL_EXECUTED=m,y.FRAGMENT_MODEL_CANCELED=v,y.FRAGMENT_MODEL_FAILED=_,t["default"]=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){s=new o["default"],u=[],l=!1}function t(){return s}function n(){return u}function r(){return l}function i(e){function t(e,t,n,r){var i=r[0].split(/[=]/);return r.push({key:i[0],value:i[1]}),r.shift(),r}function n(e,t,n){return t>0&&(f&&0===u.length?u=n[t].split(/[&]/):c&&(i=n[t].split(/[&]/))),n}if(!e)return null;var r,i=[],a=new RegExp(/[?]/),o=new RegExp(/[#]/),d=new RegExp(/^(https:)?\/\//i),f=a.test(e),c=o.test(e);return l=d.test(e),r=e.split(/[?#]/).map(n),u.length>0&&(u=u.reduce(t,null)),i.length>0&&(i=i.reduce(t,null),i.forEach(function(e){s[e.key]=e.value})),e}var a=void 0,s=void 0,u=void 0,l=void 0;return a={initialize:e,parseURI:i,getURIFragmentData:t,getURIQueryData:n,isManifestHTTPS:r}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(163),o=r(a),s=n(1),u=r(s);i.__dashjs_factory_name="URIQueryAndFragmentModel",t["default"]=u["default"].getSingletonFactory(i)},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function i(e,t){n(this,i),this.sessionToken=e,this.error=t};t["default"]=r},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function i(e,t,r,a){n(this,i),this.sessionToken=e,this.message=t,this.defaultURL=r,this.messageType=a?a:"license-request"};t["default"]=r},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function i(e,t){n(this,i),this.keySystem=e,this.ksConfiguration=t};t["default"]=r},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function i(e,t,r,a,o){n(this,i),this.initDataTypes=["cenc"],this.audioCapabilities=e,this.videoCapabilities=t,this.distinctiveIdentifier=r,this.persistentState=a,this.sessionTypes=o};t["default"]=r},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function i(e,t){n(this,i),this.initData=e,this.initDataType=t};t["default"]=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){l={}}function t(e){e&&(e.abrRulesCollection&&(l[p]=e.abrRulesCollection),e.synchronizationRulesCollection&&(l[m]=e.synchronizationRulesCollection))}function n(e,t,n,r,a){var o,s,l={},d=e.length,f=d,c=i(t,r),g=function(e){var t,i;e.value!==u["default"].NO_CHANGE&&(l[e.priority]=a(l[e.priority],e.value)),--d||(l[u["default"].WEAK]!==u["default"].NO_CHANGE&&(i=u["default"].WEAK,t=l[u["default"].WEAK]),l[u["default"].DEFAULT]!==u["default"].NO_CHANGE&&(i=u["default"].DEFAULT,t=l[u["default"].DEFAULT]),l[u["default"].STRONG]!==u["default"].NO_CHANGE&&(i=u["default"].STRONG,t=l[u["default"].STRONG]),i!=u["default"].STRONG&&i!=u["default"].WEAK&&(i=u["default"].DEFAULT),n({value:void 0!==t?t:r,confidence:i}))};for(l[u["default"].STRONG]=u["default"].NO_CHANGE,l[u["default"].WEAK]=u["default"].NO_CHANGE,l[u["default"].DEFAULT]=u["default"].NO_CHANGE,s=0;f>s;s++)o=e[s],o.execute(c,g)}function r(){var e,t,n=l[p],r=l[m],i=(n.getRules(d["default"].QUALITY_SWITCH_RULES)||[]).concat(n.getRules(d["default"].ABANDON_FRAGMENT_RULES)||[]).concat(r.getRules(c["default"].TIME_SYNCHRONIZED_RULES)||[]).concat(r.getRules(c["default"].BEST_GUESS_RULES)||[]),a=i.length;for(t=0;a>t;t++)e=i[t],"function"==typeof e.reset&&e.reset();l={}}function i(e,t){return(0,o["default"])(a).create({streamProcessor:e,currentValue:t})}var a=this.context,s=void 0,l=void 0;return s={initialize:e,setConfig:t,applyRules:n,reset:r}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(135),o=r(a),s=n(7),u=r(s),l=n(46),d=r(l),f=n(47),c=r(f),g=n(1),h=r(g),p=0,m=1;i.__dashjs_factory_name="RulesController";var v=h["default"].getSingletonFactory(i);v.ABR_RULE=p,v.SYNC_RULE=m,t["default"]=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){i=[],a=[];var e=(0,E["default"])(n).getInstance(),t=(0,S["default"])(n).getInstance(),r=(0,_["default"])(n).getInstance();r.getBufferOccupancyABREnabled()?(i.push((0,h["default"])(n).create({metricsModel:e,dashMetrics:(0,S["default"])(n).getInstance()})),a.push((0,m["default"])(n).create({metricsModel:e,dashMetrics:(0,S["default"])(n).getInstance()}))):(i.push((0,o["default"])(n).create({metricsModel:e,dashMetrics:t})),i.push((0,u["default"])(n).create({metricsModel:e,dashMetrics:t})),i.push((0,d["default"])(n).create({metricsModel:e})),a.push((0,c["default"])(n).create()))}function t(e){switch(e){case A:return i;case M:return a;default:return null}}var n=this.context,r=void 0,i=void 0,a=void 0;return r={initialize:e,getRules:t}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(140),o=r(a),s=n(138),u=r(s),l=n(139),d=r(l),f=n(136),c=r(f),g=n(66),h=r(g),p=n(137),m=r(p),v=n(5),_=r(v),y=n(12),E=r(y),T=n(13),S=r(T),I=n(1),R=r(I),A="qualitySwitchRules",M="abandonFragmentRules";i.__dashjs_factory_name="ABRRulesCollection";var C=R["default"].getSingletonFactory(i);C.QUALITY_SWITCH_RULES=A,C.ABANDON_FRAGMENT_RULES=M,t["default"]=C},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){i=[],a=[],i.push((0,c["default"])(n).create({timelineConverter:(0,u["default"])(n).getInstance()})),a.push((0,d["default"])(n).create({timelineConverter:(0,u["default"])(n).getInstance(),adapter:(0,h["default"])(n).getInstance()}))}function t(e){switch(e){case p:return i;case m:return a;default:return null}}var n=this.context,r=void 0,i=void 0,a=void 0;return r={initialize:e,getRules:t}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),s=n(23),u=r(s),l=n(145),d=r(l),f=n(146),c=r(f),g=n(19),h=r(g),p="withAccurateTimeSourceRules",m="bestGuestRules";i.__dashjs_factory_name="SynchronizationRulesCollection";var v=o["default"].getSingletonFactory(i);v.TIME_SYNCHRONIZED_RULES=p,v.BEST_GUESS_RULES=m,t["default"]=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e){if(!e)return null;void 0===e.fileStart&&(e.fileStart=0);var t=d["default"].parseBuffer(e),r=(0,o["default"])(n).create();return r.setData(t),r}var t=void 0,n=this.context;return t={parse:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(149),o=r(a),s=n(1),u=r(s),l=n(53),d=r(l);i.__dashjs_factory_name="BoxParser",t["default"]=u["default"].getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e){if(void 0!==y)return y;y=!1;var t,n="1",r="1";try{"undefined"!=typeof window&&(t=window[e])}catch(i){return v("Warning: DOMStorage access denied: "+i.message),y}if(!t||e!==h&&e!==p)return y;try{t.setItem(n,r),t.removeItem(n),y=!0}catch(i){v("Warning: DOMStorage is supported, but cannot be used: "+i.message)}return y}function t(){e(h)&&f.forEach(function(e){var t=localStorage.getItem(e.oldKey);if(t){localStorage.removeItem(e.oldKey);try{localStorage.setItem(e.newKey,t)}catch(n){v(n.message)}}})}function n(){E=(0,u["default"])(m).getInstance(),t()}function r(){var e=6e5;return Math.round((new Date).getTime()/e)*e}function i(t,n){return e(t)&&E["get"+n+"CachingInfo"]().enabled}function a(e){if(!i(h,"LastMediaSettings"))return null;var t=g.replace(/\?/,e),n=JSON.parse(localStorage.getItem(t))||{},r=(new Date).getTime()-parseInt(n.timestamp,10)>=E.getLastMediaSettingsCachingInfo().ttl||!1,a=n.settings;return r&&(localStorage.removeItem(t),a=null),a}function o(e){var t=NaN;if(i(h,"LastBitrate")){var n=c.replace(/\?/,e),r=JSON.parse(localStorage.getItem(n))||{},a=(new Date).getTime()-parseInt(r.timestamp,10)>=E.getLastBitrateCachingInfo().ttl||!1,o=parseInt(r.bitrate,10);isNaN(o)||a?a&&localStorage.removeItem(n):(t=o,v("Last saved bitrate for "+e+" was "+o))}return t}function s(e,t){if(i(h,"LastMediaSettings")){var n=g.replace(/\?/,e);try{localStorage.setItem(n,JSON.stringify({settings:t,timestamp:r()}))}catch(a){v(a.message)}}}function l(e,t){if(i(h,"LastBitrate")&&t){var n=c.replace(/\?/,e);try{localStorage.setItem(n,JSON.stringify({bitrate:t/1e3,timestamp:r()}))}catch(a){v(a.message)}}}var m=this.context,v=(0,d["default"])(m).getInstance().log,_=void 0,y=void 0,E=void 0;return _={getSavedBitrateSettings:o,setSavedBitrateSettings:l,getSavedMediaSettings:a,setSavedMediaSettings:s,isSupported:e},n(),_}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),s=n(5),u=r(s),l=n(4),d=r(l),f=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],c="dashjs_?_bitrate",g="dashjs_?_settings",h="localStorage",p="sessionStorage";i.__dashjs_factory_name="DOMStorage";var m=o["default"].getSingletonFactory(i);t["default"]=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e,t){g=e,p=t,_=!1,y=NaN,T=null,m=(0,h["default"])(s).getInstance(),S=o["default"].BEST_GUESS_RULES,l.on(c["default"].STREAM_INITIALIZED,a,this)}function t(){_=!1,y=NaN}function n(){return T}function r(){l.off(c["default"].STREAM_INITIALIZED,a,this),t(),T=null,g=null,p=null,_=!1,y=NaN,S=null,m=null}function i(e){var t=((new Date).getTime()-y)/1e3;T=e.value,l.trigger(c["default"].LIVE_EDGE_SEARCH_COMPLETED,{liveEdge:T,searchTime:t,error:null===T?new u["default"](v,"live edge has not been found",null):null})}function a(e){!p.isDynamic()||_||e.error||(S=g.isTimeSyncCompleted()?o["default"].TIME_SYNCHRONIZED_RULES:o["default"].BEST_GUESS_RULES,E=(0,o["default"])(s).getInstance().getRules(S),_=!0,y=(new Date).getTime(),m.applyRules(E,p,i,null,function(e,t){return t}))}var s=this.context,l=(0,d["default"])(s).getInstance(),f=void 0,g=void 0,p=void 0,m=void 0,_=void 0,y=void 0,E=void 0,T=void 0,S=void 0;return f={initialize:e,abortSearch:t,getLiveEdge:n,reset:r}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(47),o=r(a),s=n(8),u=r(s),l=n(3),d=r(l),f=n(2),c=r(f),g=n(45),h=r(g),p=n(1),m=r(p),v=1;i.__dashjs_factory_name="LiveEdgeFinder";var _=m["default"].getSingletonFactory(i);_.LIVE_EDGE_NOT_FOUND_ERROR_CODE=v,t["default"]=_},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e){return e}function t(e){return e}var n=void 0;return n={modifyRequestURL:e,modifyRequestHeader:t}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a);i.__dashjs_factory_name="RequestModifier",t["default"]=o["default"].getSingletonFactory(i)},function(e,t,n){"use strict";!function(e){var t={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},n=function(e){var n=e;return t.hasOwnProperty(e)&&(n=t[e]),String.fromCharCode(n)},r=15,i=32,a={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},o={17:2,18:4,21:6,22:8,23:10,19:13,20:15},s={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},u={25:2,26:4,29:6,30:8,31:10,27:13,28:15},l=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],d={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){var n=this.verboseFilter[e];this.verboseLevel>=n&&console.log(this.time+" ["+e+"] "+t)}},f=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t},c=function(e,t,n,r,i){this.foreground=e||"white",this.underline=t||!1,this.italics=n||!1,this.background=r||"black",this.flash=i||!1};c.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var r=t[n];e.hasOwnProperty(r)&&(this[r]=e[r])}},isDefault:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},equals:function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},copy:function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var g=function(e,t,n,r,i,a){this.uchar=e||" ",this.penState=new c(t,n,r,i,a)};g.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(e,t){this.uchar=e,this.penState.copy(t)},setPenState:function(e){this.penState.copy(e)},equals:function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},copy:function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},isEmpty:function(){return" "===this.uchar&&this.penState.isDefault()}};var h=function(){this.chars=[];for(var e=0;i>e;e++)this.chars.push(new g);this.pos=0,this.currPenState=new c};h.prototype={equals:function(e){for(var t=!0,n=0;i>n;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t},copy:function(e){for(var t=0;i>t;t++)this.chars[t].copy(e.chars[t])},isEmpty:function(){for(var e=!0,t=0;i>t;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},setCursor:function(e){this.pos!==e&&(this.pos=e),this.pos<0?(d.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>i&&(d.log("ERROR","Too large cursor position "+this.pos),this.pos=i)},moveCursor:function(e){var t=this.pos+e;if(e>1)for(var n=this.pos+1;t+1>n;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(e){e>=144&&this.backSpace();var t=n(e);return this.pos>=i?void d.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),void this.moveCursor(1))},clearFromPos:function(e){var t;for(t=e;i>t;t++)this.chars[t].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var e=[],t=!0,n=0;i>n;n++){var r=this.chars[n].uchar;" "!==r&&(t=!1),e.push(r)}return t?"":e.join("")},setPenStyles:function(e){this.currPenState.setStyles(e);var t=this.chars[this.pos];t.setPenState(this.currPenState)}};var p=function(){this.rows=[];for(var e=0;r>e;e++)this.rows.push(new h);this.currRow=r-1,this.nrRollUpRows=null,this.reset()};p.prototype={reset:function(){for(var e=0;r>e;e++)this.rows[e].clear();this.currRow=r-1},equals:function(e){for(var t=!0,n=0;r>n;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},copy:function(e){for(var t=0;r>t;t++)this.rows[t].copy(e.rows[t])},isEmpty:function(){for(var e=!0,t=0;r>t;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},backSpace:function(){var e=this.rows[this.currRow];e.backSpace()},clearToEndOfRow:function(){var e=this.rows[this.currRow];e.clearToEndOfRow()},insertChar:function(e){var t=this.rows[this.currRow];t.insertChar(e)},setPen:function(e){var t=this.rows[this.currRow];t.setPenStyles(e)},moveCursor:function(e){var t=this.rows[this.currRow];t.moveCursor(e)},setCursor:function(e){d.log("INFO","setCursor: "+e);var t=this.rows[this.currRow];t.setCursor(e)},setPAC:function(e){d.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.currRow=t;var n=this.rows[this.currRow];if(null!==e.indent){var r=e.indent,i=Math.max(r-1,0);n.setCursor(e.indent),e.color=n.chars[i].penState.foreground}var a={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(a)},setBkgData:function(e){d.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},setRollUpRows:function(e){this.nrRollUpRows=e},rollUp:function(){if(null===this.nrRollUpRows)return void d.log("DEBUG","roll_up but nrRollUpRows not set yet");d.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),d.log("INFO","Rolling up")},getDisplayText:function(e){e=e||!1;for(var t=[],n="",i=-1,a=0;r>a;a++){var o=this.rows[a].getTextString();o&&(i=a+1,e?t.push("Row "+i+': "'+o+'"'):t.push(o.trim()))}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n},getTextAndFormat:function(){return this.rows}};var m=function(e,t){this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new p,this.nonDisplayedMemory=new p,this.lastOutputScreen=new p,this.currRollUpRow=this.displayedMemory.rows[r-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};m.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[r-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(e){this.outputFilter=e},setPAC:function(e){this.writeScreen.setPAC(e)},setBkgData:function(e){this.writeScreen.setBkgData(e)},setMode:function(e){e!==this.mode&&(this.mode=e,d.log("INFO","MODE="+e),"MODE_POP-ON"==this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},insertChars:function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";d.log("INFO",n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(d.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){d.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){d.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){d.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(e){d.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},cc_FON:function(){d.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){d.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){d.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){d.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){d.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){d.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){d.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(d.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,d.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(e){d.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},cc_MIDROW:function(e){var t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{var n=Math.floor(e/2)-16,r=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=r[n]}d.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},outputDataUpdate:function(){var e=d.time;null!==e&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(e,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}};var v=function(e,t,n){this.field=e||1,this.outputs=[t,n],this.channels=[new m(1,t),new m(2,n)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,"char":0,cmd:0,other:0}};v.prototype={getHandler:function(e){return this.channels[e].getHandler()},setHandler:function(e,t){this.channels[e].setHandler(t)},addData:function(e,t){var n,r,i,a=!1;this.lastTime=e,d.setTime(e);for(var o=0;o<t.length;o+=2)if(r=127&t[o],i=127&t[o+1],0!==r||0!==i){if(d.log("DATA","["+f([t[o],t[o+1]])+"] -> ("+f([r,i])+")"),n=this.parseCmd(r,i),n||(n=this.parseMidrow(r,i)),n||(n=this.parsePAC(r,i)),n||(n=this.parseBackgroundAttributes(r,i)),!n&&(a=this.parseChars(r,i)))if(this.currChNr&&this.currChNr>=0){var s=this.channels[this.currChNr-1];s.insertChars(a)}else d.log("WARNING","No channel found yet. TEXT-MODE?");n?this.dataCounters.cmd+=2:a?this.dataCounters["char"]+=2:(this.dataCounters.other+=2,d.log("WARNING","Couldn't parse cleaned data "+f([r,i])+" orig: "+f([t[o],t[o+1]])))}else this.dataCounters.padding+=2},parseCmd:function(e,t){var n=null,r=(20===e||28===e)&&t>=32&&47>=t,i=(23===e||31===e)&&t>=33&&35>=t;if(!r&&!i)return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,d.log("DEBUG","Repeated command ("+f([e,t])+") is dropped"),!0;n=20===e||23===e?1:2;var a=this.channels[n-1];return 20===e||28===e?32===t?a.cc_RCL():33===t?a.cc_BS():34===t?a.cc_AOF():35===t?a.cc_AON():36===t?a.cc_DER():37===t?a.cc_RU(2):38===t?a.cc_RU(3):39===t?a.cc_RU(4):40===t?a.cc_FON():41===t?a.cc_RDC():42===t?a.cc_TR():43===t?a.cc_RTD():44===t?a.cc_EDM():45===t?a.cc_CR():46===t?a.cc_ENM():47===t&&a.cc_EOC():a.cc_TO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},parseMidrow:function(e,t){var n=null;if((17===e||25===e)&&t>=32&&47>=t){if(n=17===e?1:2,n!==this.currChNr)return d.log("ERROR","Mismatch channel in midrow parsing"),!1;var r=this.channels[n-1];return r.cc_MIDROW(t),d.log("DEBUG","MIDROW ("+f([e,t])+")"),!0}return!1},parsePAC:function(e,t){var n=null,r=null,i=(e>=17&&23>=e||e>=25&&31>=e)&&t>=64&&127>=t,l=(16===e||24===e)&&t>=64&&95>=t;if(!i&&!l)return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;n=23>=e?1:2,r=t>=64&&95>=t?1===n?a[e]:s[e]:1===n?o[e]:u[e];var d=this.interpretPAC(r,t),f=this.channels[n-1];return f.setPAC(d),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},interpretPAC:function(e,t){var n=t,r={color:null,italics:!1,indent:null,underline:!1,row:e};return n=t>95?t-96:t-64,r.underline=1===(1&n),13>=n?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:15>=n?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r},parseChars:function(e,t){var r=null,i=null,a=null;if(e>=25?(r=2,a=e-8):(r=1,a=e),a>=17&&19>=a){var o=t;o=17===a?t+80:18===a?t+112:t+144,d.log("INFO","Special char '"+n(o)+"' in channel "+r),i=[o]}else e>=32&&127>=e&&(i=0===t?[e]:[e,t]);if(i){var s=f(i);d.log("DEBUG","Char codes =  "+s.join(",")),this.lastCmdA=null,this.lastCmdB=null}return i},parseBackgroundAttributes:function(e,t){var n,r,i,a,o=(16===e||24===e)&&t>=32&&47>=t,s=(23===e||31===e)&&t>=45&&47>=t;return o||s?(n={},16===e||24===e?(r=Math.floor((t-32)/2),n.background=l[r],t%2===1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0)),i=24>e?1:2,a=this.channels[i-1],a.setBkgData(n),this.lastCmdA=null,this.lastCmdB=null,!0):!1},reset:function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)}};var _=function(e,t,n){for(var r=0,i=t,a=0,o=[],s=function(e,t,n,r){if(4!==e||8>t)return null;var i=n.getUint8(r),a=n.getUint16(r+1),o=n.getUint32(r+3),s=n.getUint8(r+7);return 181==i&&49==a&&1195456820==o&&3==s};t+n>i;){if(r=e.getUint32(i),a=31&e.getUint8(i+4),6===a)for(var u=i+5,l=-1;i+4+r-1>u;){l=0;for(var d=255;255===d;)d=e.getUint8(u),l+=d,u++;var f=0;for(d=255;255===d;)d=e.getUint8(u),f+=d,u++;s(l,f,e,u)&&o.push([u,f]),u+=f}i+=r+4}return o},y=function(e,t){var n=t[0],r=[[],[]];n+=8;var i=31&e.getUint8(n);n+=2;for(var a=0;i>a;a++){var o=e.getUint8(n),s=4&o,u=3&o;n++;var l=e.getUint8(n);n++;var d=e.getUint8(n);n++,s&&(127&l)+(127&d)!==0&&(0===u?(r[0].push(l),r[0].push(d)):1===u&&(r[1].push(l),r[1].push(d)))}return r};e.logger=d,e.PenState=c,e.CaptionScreen=p,e.Cea608Parser=v,e.findCea608Nalus=_,e.extractCea608DataFromRange=y}(t)},function(e,t,n){"use strict";var r={};r.parseBuffer=function(e){return new i(e).parse()},r.Utils={},r.Utils.dataViewToString=function(e,t){var n=t||"utf-8";if("undefined"!=typeof TextDecoder)return new TextDecoder(n).decode(e);var r=[],i=0;if("utf-8"===n)for(;i<e.byteLength;){var a=e.getUint8(i++);128>a||(224>a?(a=(31&a)<<6,a|=63&e.getUint8(i++)):240>a?(a=(15&a)<<12,a|=(63&e.getUint8(i++))<<6,a|=63&e.getUint8(i++)):(a=(7&a)<<18,a|=(63&e.getUint8(i++))<<12,a|=(63&e.getUint8(i++))<<6,a|=63&e.getUint8(i++))),r.push(String.fromCharCode(a))}else for(;i<e.byteLength;)r.push(String.fromCharCode(e.getUint8(i++)));return r.join("")},t.parseBuffer=r.parseBuffer,t.Utils=r.Utils,r.Cursor=function(e){this.offset="undefined"==typeof e?0:e};var i=function(e){this._raw=new DataView(e),this._cursor=new r.Cursor,this.boxes=[]};i.prototype.fetch=function(e){var t=this.fetchAll(e,!0);return t.length?t[0]:null},i.prototype.fetchAll=function(e,t){var n=[];return i._sweep.call(this,e,n,t),n},i.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var e=a.parse(this);if("undefined"==typeof e.type)break;this.boxes.push(e)}return this},i._sweep=function(e,t,n){this.type&&this.type==e&&t.push(this);for(var r in this.boxes){if(t.length&&n)return;i._sweep.call(this.boxes[r],e,t,n)}};var a=function(){this._cursor=new r.Cursor};a.parse=function(e){var t=new a;return t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,t._parseBox(),e._cursor.offset=t._raw.byteOffset+t._raw.byteLength,t},a.prototype._readInt=function(e){var t=null;switch(e){case 8:t=this._raw.getInt8(this._cursor.offset-this._raw.byteOffset);break;case 16:t=this._raw.getInt16(this._cursor.offset-this._raw.byteOffset);break;case 32:t=this._raw.getInt32(this._cursor.offset-this._raw.byteOffset);break;case 64:var n=this._raw.getInt32(this._cursor.offset-this._raw.byteOffset),r=this._raw.getInt32(this._cursor.offset-this._raw.byteOffset+4);t=n*Math.pow(2,32)+r}return this._cursor.offset+=e>>3,t},a.prototype._readUint=function(e){var t=null;switch(e){case 8:t=this._raw.getUint8(this._cursor.offset-this._raw.byteOffset);break;case 16:t=this._raw.getUint16(this._cursor.offset-this._raw.byteOffset);break;case 24:var n=this._raw.getUint16(this._cursor.offset-this._raw.byteOffset),r=this._raw.getUint8(this._cursor.offset-this._raw.byteOffset+2);t=(n<<8)+r;break;case 32:t=this._raw.getUint32(this._cursor.offset-this._raw.byteOffset);break;case 64:var n=this._raw.getUint32(this._cursor.offset-this._raw.byteOffset),r=this._raw.getUint32(this._cursor.offset-this._raw.byteOffset+4);
t=n*Math.pow(2,32)+r}return this._cursor.offset+=e>>3,t},a.prototype._readString=function(e){for(var t="",n=0;e>n;n++){var r=this._readUint(8);t+=String.fromCharCode(r)}return t},a.prototype._readTerminatedString=function(){for(var e="";;){var t=this._readUint(8);if(0==t)break;e+=String.fromCharCode(t)}return e},a.prototype._readTemplate=function(e){var t=this._readUint(e/2),n=this._readUint(e/2);return t+n/Math.pow(2,e/2)},a.prototype._parseBox=function(){if(this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)return void(this._root._incomplete=!0);switch(this.size=this._readUint(32),this.type=this._readString(4),1==this.size&&(this.largesize=this._readUint(64)),"uuid"==this.type&&(this.usertype=this._readString(16)),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset,this._raw.byteLength-this._cursor.offset);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}!this._incomplete&&this._boxParsers[this.type]&&this._boxParsers[this.type].call(this)},a.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},a.prototype._boxParsers={},["moov","trak","tref","mdia","minf","stbl","edts","dinf","mvex","moof","traf","mfra","udta","meco","strk","vttc"].forEach(function(e){a.prototype._boxParsers[e]=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(a.parse(this))}}),a.prototype._boxParsers.elst=function(){this._parseFullBox(),this.entry_count=this._readUint(32),this.entries=[];for(var e=1;e<=this.entry_count;e++){var t={};1==this.version?(t.segment_duration=this._readUint(64),t.media_time=this._readInt(64)):(t.segment_duration=this._readUint(32),t.media_time=this._readInt(32)),t.media_rate_integer=this._readInt(16),t.media_rate_fraction=this._readInt(16),this.entries.push(t)}},a.prototype._boxParsers.emsg=function(){this._parseFullBox(),this.scheme_id_uri=this._readTerminatedString(),this.value=this._readTerminatedString(),this.timescale=this._readUint(32),this.presentation_time_delta=this._readUint(32),this.event_duration=this._readUint(32),this.id=this._readUint(32),this.message_data=new DataView(this._raw.buffer,this._cursor.offset,this._raw.byteLength-(this._cursor.offset-this._offset))},a.prototype._boxParsers.free=a.prototype._boxParsers.skip=function(){this.data=new DataView(this._raw.buffer,this._cursor.offset,this._raw.byteLength-(this._cursor.offset-this._offset))},a.prototype._boxParsers.ftyp=a.prototype._boxParsers.styp=function(){for(this.major_brand=this._readString(4),this.minor_versions=this._readUint(32),this.compatible_brands=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.compatible_brands.push(this._readString(4))},a.prototype._boxParsers.hdlr=function(){this._parseFullBox(),this.pre_defined=this._readUint(32),this.handler_type=this._readString(4),this.reserved=[this._readUint(32),this._readUint(32),this._readUint(32)],this.name=this._readTerminatedString()},a.prototype._boxParsers.mdat=function(){this.data=new DataView(this._raw.buffer,this._cursor.offset,this._raw.byteLength-(this._cursor.offset-this._offset))},a.prototype._boxParsers.mdhd=function(){this._parseFullBox(),1==this.version?(this.creation_time=this._readUint(64),this.modification_time=this._readUint(64),this.timescale=this._readUint(32),this.duration=this._readUint(64)):(this.creation_time=this._readUint(32),this.modification_time=this._readUint(32),this.timescale=this._readUint(32),this.duration=this._readUint(32));var e=this._readUint(16);this.pad=e>>15,this.language=String.fromCharCode((e>>10&31)+96,(e>>5&31)+96,(31&e)+96),this.pre_defined=this._readUint(16)},a.prototype._boxParsers.mfhd=function(){this._parseFullBox(),this.sequence_number=this._readUint(32)},a.prototype._boxParsers.mvhd=function(){this._parseFullBox(),1==this.version?(this.creation_time=this._readUint(64),this.modification_time=this._readUint(64),this.timescale=this._readUint(32),this.duration=this._readUint(64)):(this.creation_time=this._readUint(32),this.modification_time=this._readUint(32),this.timescale=this._readUint(32),this.duration=this._readUint(32)),this.rate=this._readTemplate(32),this.volume=this._readTemplate(16),this.reserved1=this._readUint(16),this.reserved2=[this._readUint(32),this._readUint(32)],this.matrix=[];for(var e=0;9>e;e++)this.matrix.push(this._readTemplate(32));this.pre_defined=[];for(var e=0;6>e;e++)this.pre_defined.push(this._readUint(32));this.next_track_ID=this._readUint(32)},a.prototype._boxParsers.payl=function(){var e=new DataView(this._raw.buffer,this._cursor.offset,this._raw.byteLength-(this._cursor.offset-this._offset));this.cue_text=r.Utils.dataViewToString(e)},a.prototype._boxParsers.sidx=function(){this._parseFullBox(),this.reference_ID=this._readUint(32),this.timescale=this._readUint(32),0==this.version?(this.earliest_presentation_time=this._readUint(32),this.first_offset=this._readUint(32)):(this.earliest_presentation_time=this._readUint(64),this.first_offset=this._readUint(64)),this.reserved=this._readUint(16),this.reference_count=this._readUint(16),this.references=[];for(var e=0;e<this.reference_count;e++){var t={},n=this._readUint(32);t.reference_type=n>>31&1,t.referenced_size=2147483647&n,t.subsegment_duration=this._readUint(32);var r=this._readUint(32);t.starts_with_SAP=r>>31&1,t.SAP_type=r>>28&7,t.SAP_delta_time=268435455&r,this.references.push(t)}},a.prototype._boxParsers.ssix=function(){this._parseFullBox(),this.subsegment_count=this._readUint(32),this.subsegments=[];for(var e=0;e<this.subsegment_count;e++){var t={};t.ranges_count=this._readUint(32),t.ranges=[];for(var n=0;n<t.ranges_count;n++){var r={};r.level=this._readUint(8),r.range_size=this._readUint(24),t.ranges.push(r)}this.subsegments.push(t)}},a.prototype._boxParsers.tfdt=function(){this._parseFullBox(),1==this.version?this.baseMediaDecodeTime=this._readUint(64):this.baseMediaDecodeTime=this._readUint(32)},a.prototype._boxParsers.tfhd=function(){this._parseFullBox(),this.track_ID=this._readUint(32),1&this.flags&&(this.base_data_offset=this._readUint(64)),2&this.flags&&(this.sample_description_offset=this._readUint(32)),8&this.flags&&(this.default_sample_duration=this._readUint(32)),16&this.flags&&(this.default_sample_size=this._readUint(32)),32&this.flags&&(this.default_sample_flags=this._readUint(32))},a.prototype._boxParsers.tkhd=function(){this._parseFullBox(),1==this.version?(this.creation_time=this._readUint(64),this.modification_time=this._readUint(64),this.track_ID=this._readUint(32),this.reserved1=this._readUint(32),this.duration=this._readUint(64)):(this.creation_time=this._readUint(32),this.modification_time=this._readUint(32),this.track_ID=this._readUint(32),this.reserved1=this._readUint(32),this.duration=this._readUint(32)),this.reserved2=[this._readUint(32),this._readUint(32)],this.layer=this._readUint(16),this.alternate_group=this._readUint(16),this.volume=this._readTemplate(16),this.reserved3=this._readUint(16),this.matrix=[];for(var e=0;9>e;e++)this.matrix.push(this._readTemplate(32));this.width=this._readUint(32),this.height=this._readUint(32)},a.prototype._boxParsers.trun=function(){this._parseFullBox(),this.sample_count=this._readUint(32),1&this.flags&&(this.data_offset=this._readInt(32)),4&this.flags&&(this.first_sample_flags=this._readUint(32)),this.samples=[];for(var e=0;e<this.sample_count;e++){var t={};256&this.flags&&(t.sample_duration=this._readUint(32)),512&this.flags&&(t.sample_size=this._readUint(32)),1024&this.flags&&(t.sample_flags=this._readUint(32)),2048&this.flags&&(0==this.version?t.sample_composition_time_offset=this._readUint(32):t.sample_composition_time_offset=this._readInt(32)),this.samples.push(t)}},a.prototype._boxParsers.vlab=function(){var e=new DataView(this._raw.buffer,this._cursor.offset,this._raw.byteLength-(this._cursor.offset-this._offset));this.source_label=r.Utils.dataViewToString(e)},a.prototype._boxParsers.vttC=function(){var e=new DataView(this._raw.buffer,this._cursor.offset,this._raw.byteLength-(this._cursor.offset-this._offset));this.config=r.Utils.dataViewToString(e)},a.prototype._boxParsers.vtte=function(){}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=1,i=1,a=function o(e,t,a,s){n(this,o),this.url=e||"",this.serviceLocation=t||e||"",this.dvb_priority=a||r,this.dvb_weight=s||i};a.DEFAULT_DVB_PRIORITY=r,a.DEFAULT_DVB_WEIGHT=i,t["default"]=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function i(){n(this,i),this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN};t["default"]=r},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function i(){n(this,i),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.availabilityIdx=NaN,this.wallStartTime=NaN,this.representation=null};t["default"]=r},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function i(){n(this,i),this.schemeIdUri="",this.value=""};t["default"]=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){Qt=!1,Xt=!1,Zt=!0,en=null,Wt=null,nn=null,oe["default"].extend(ue["default"]),an=(0,F["default"])(Yt).getInstance()}function t(e,t,n){return sn=(0,E["default"])(Yt).getInstance(),on=(0,_["default"])(Yt).getInstance(),sn.supportsMediaSource()?void(Qt||(Qt=!0,Jt=(0,j["default"])(Yt).getInstance(),dn=(0,u["default"])(Yt).getInstance(),$t=(0,c["default"])(Yt).getInstance(),$t.initialize(),cn=(0,me["default"])(Yt).getInstance(),fn=(0,_e["default"])(Yt).getInstance(),rn=(0,B["default"])(Yt).getInstance(),rn.setConfig({adapter:Ot()}),$e(),ge(void 0!==n?n:!0),e&&Et(e),t&&Rt(t),qt("[dash.js "+Ut+"] MediaPlayer has been initialized"))):void on.capabilityError("mediasource")}function n(){return!!gn&&!!zt}function r(){if(!Xt)throw Bt;(!Zt||a()&&Xt)&&dn.play()}function i(){if(!Xt)throw Bt;dn.pause()}function a(){if(!Xt)throw Bt;return dn.isPaused()}function s(){if(!Xt)throw Bt;return dn.isSeeking()}function l(e){if(!gn)throw kt;yt().muted=e}function f(){if(!gn)throw kt;return yt().muted}function g(e){if(!gn)throw kt;yt().volume=e}function p(){if(!gn)throw kt;return yt().volume}function v(e){if(e){if("video"===e||"audio"===e||"fragmentedText"===e){var t=Te().getCurrentBufferLevel(Se(e));return t?t.toPrecision(3):NaN}return qt("Warning  - getBufferLength requested for invalid type"),NaN}var n=Le("video").length>0?Te().getCurrentBufferLevel(Se("video")):Number.MAX_SAFE_INTEGER,r=Le("audio").length>0?Te().getCurrentBufferLevel(Se("audio")):Number.MAX_SAFE_INTEGER,i=Le("fragmentedText").length>0?Te().getCurrentBufferLevel(Se("fragmentedText")):Number.MAX_SAFE_INTEGER;return Math.min(n,r,i).toPrecision(3)}function y(){var e=Pt();return e?e.manifestInfo.DVRWindowSize:0}function T(e){var t=Pt();if(!t)return 0;var n=t.range.start+e;return n>t.range.end&&(n=t.range.end),n}function I(e){if(!Xt)throw Bt;var t=dn.getIsDynamic()?T(e):e;dn.seek(t)}function A(e){if(!Xt)throw Bt;var t=yt().currentTime;if(void 0!==e&&(t=un.getTimeRelativeToStreamId(t,e)),dn.getIsDynamic()){var n=Pt();t=null===n?0:C()-(n.range.end-n.time)}return t}function C(){if(!Xt)throw Bt;var e=yt().duration;if(dn.getIsDynamic()){var t,n=Pt();if(!n)return 0;t=n.range.end-n.range.start,e=t<n.manifestInfo.DVRWindowSize?t:n.manifestInfo.DVRWindowSize}return e}function D(){if(!Xt)throw Bt;return A()<0?NaN:Lt(A())}function w(){if(!Xt)throw Bt;return Lt(C())}function P(e,t,n){var r=new Date(1e3*e),i=r.toLocaleDateString(t),a=r.toLocaleTimeString(t,{hour12:n});return a+" "+i}function x(e){e=Math.max(e,0);var t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=Math.floor(e%3600%60);return(0===t?"":10>t?"0"+t.toString()+":":t.toString()+":")+(10>n?"0"+n.toString():n.toString())+":"+(10>r?"0"+r.toString():r.toString())}function U(e,t,n){de["default"].extend(e,t,n,Yt)}function k(e,t,n){Ht.on(e,t,n)}function K(e,t,n){Ht.off(e,t,n)}function H(){return Ut}function q(){return Gt}function z(){if(!gn)throw kt;return gn}function Q(e){an.setLiveDelayFragmentCount(e)}function Z(e){an.setLiveDelay(e)}function $(e){an.setUseSuggestedPresentationDelay(e)}function te(e,t){an.setLastBitrateCachingInfo(e,t)}function re(e,t){an.setLastMediaSettingsCachingInfo(e,t)}function ae(e,t){Jt.setMaxAllowedBitrateFor(e,t)}function se(e){return Jt.getMaxAllowedBitrateFor(e)}function le(e,t){Jt.setMaxAllowedRepresentationRatioFor(e,t)}function fe(e){return Jt.getMaxAllowedRepresentationRatioFor(e)}function ge(e){Zt=e}function pe(){return Zt}function ve(e){an.setScheduleWhilePaused(e)}function ye(){return an.getScheduleWhilePaused()}function Te(){return fn}function Se(e){return rn.getReadOnlyMetricsFor(e)}function Ie(e){if(!Xt)throw Bt;return Jt.getQualityFor(e,un.getActiveStreamInfo())}function Re(e,t){if(!Xt)throw Bt;Jt.setPlaybackQuality(e,un.getActiveStreamInfo(),t)}function Ae(){return Jt.getLimitBitrateByPortal()}function Me(e){Jt.setLimitBitrateByPortal(e)}function Ce(e){if(!Xt)throw Bt;void 0===hn&&(hn=(0,O["default"])(Yt).getInstance());for(var t=yt().textTracks,n=t.length,r=0;n>r;r++){var i=t[r],a=e===r?"showing":"hidden";i.mode!==a&&(i.mode=a)}hn.setTextTrack()}function be(e){if(!Xt)throw Bt;var t=xt();return t?t.getBitrateListFor(e):[]}function De(e,t){Jt.setInitialBitrateFor(e,t)}function Oe(e){if(!Xt)throw Bt;return Jt.getInitialBitrateFor(e)}function we(e,t){Jt.setInitialRepresentationRatioFor(e,t)}function Ne(e){return Jt.getInitialRepresentationRatioFor(e)}function Pe(e){if(!Xt)throw Bt;return nn.getStreamsInfo(e)}function Le(e){if(!Xt)throw Bt;var t=un.getActiveStreamInfo();return t?$t.getTracksFor(e,t):[]}function xe(e,t,n){if(!Xt)throw Bt;return n=n||nn.getStreamsInfo(t)[0],n?nn.getAllMediaInfoForType(t,n,e):[]}function Fe(e){if(!Xt)throw Bt;var t=un.getActiveStreamInfo();return t?$t.getCurrentTrackFor(e,t):null}function Ue(e,t){$t.setInitialSettings(e,t)}function Be(e){return $t.getInitialSettings(e)}function ke(e){if(!Xt)throw Bt;$t.setTrack(e)}function je(e){return $t.getSwitchMode(e)}function Ke(e,t){$t.setSwitchMode(e,t)}function Ye(e){$t.setSelectionModeForInitialTrack(e)}function He(){return $t.getSelectionModeForInitialTrack()}function Ge(){return Jt.getAutoSwitchBitrateFor("video")||Jt.getAutoSwitchBitrateFor("audio")}function qe(e){Jt.setAutoSwitchBitrateFor("video",e),Jt.setAutoSwitchBitrateFor("audio",e)}function Ve(e){return Jt.getAutoSwitchBitrateFor(e)}function ze(e,t){Jt.setAutoSwitchBitrateFor(e,t)}function We(e){an.setBufferOccupancyABREnabled(e)}function Qe(e,t){var n=bt(),r=this,i=function o(e){e.error?t(null,e.error):t(e.manifest),Ht.off(oe["default"].INTERNAL_MANIFEST_LOADED,o,r),n.reset()};Ht.on(oe["default"].INTERNAL_MANIFEST_LOADED,i,r);var a=(0,N["default"])(Yt).getInstance();a.initialize(),n.load(a.parseURI(e))}function Xe(e,t){Ze(e,t);var n=new o["default"];n.schemeIdUri=e,n.value=t,an.getUTCTimingSources().push(n)}function Ze(e,t){var n=an.getUTCTimingSources();n.forEach(function(r,i){r.schemeIdUri===e&&r.value===t&&n.splice(i,1)})}function Je(){an.setUTCTimingSources([])}function $e(){Xe(F["default"].DEFAULT_UTC_TIMING_SOURCE.scheme,F["default"].DEFAULT_UTC_TIMING_SOURCE.value)}function et(e){an.setUseManifestDateHeaderTimeSource(e)}function tt(e){an.setBufferToKeep(e)}function nt(e){an.setBufferPruningInterval(e)}function rt(e){an.setStableBufferTime(e)}function it(e){an.setBufferTimeAtTopQuality(e)}function at(e){an.setBufferTimeAtTopQualityLongForm(e)}function ot(e){an.setLongFormContentDurationThreshold(e)}function st(e){an.setRichBufferThreshold(e)}function ut(e){an.setBandwidthSafetyFactor(e)}function lt(){return an.getBandwidthSafetyFactor()}function dt(e){an.setAbandonLoadTimeout(e)}function ft(e){an.setFragmentRetryAttempts(e)}function ct(e){an.setFragmentRetryInterval(e)}function gt(){return wt()}function ht(e){en=e}function pt(e){Wt=e}function mt(e){var t=(0,S["default"])(Yt).getInstance();t.setConfig({videoModel:gn}),t.initialize(),t.displayCConTop(e)}function vt(){return gn?gn.getVideoContainer():null}function _t(e){if(!gn)throw kt;gn.setVideoContainer(e)}function yt(){if(!gn)throw kt;return gn.getElement()}function Et(e){if(!Qt)throw Kt;gn=null,e&&(gn=(0,V["default"])(Yt).getInstance(),gn.initialize(),gn.setElement(e),wt(),Nt()),Mt()}function Tt(){return gn?gn.getTTMLRenderingDiv():null}function St(e){if(!gn)throw kt;gn.setTTMLRenderingDiv(e)}function It(){if(!zt)throw jt;return zt}function Rt(e){if(!Qt)throw Kt;if("string"==typeof e){var t=(0,N["default"])(Yt).getInstance();t.initialize(),zt=t.parseURI(e)}else zt=e;Mt()}function At(){Rt(null),Et(null),Wt=null,en=null}function Mt(){Xt?(Xt=!1,nn.reset(),un.reset(),dn.reset(),Jt.reset(),ln.reset(),$t.reset(),un=null,tn=null,n()&&Ft()):n()&&Ft()}function Ct(){var e=(0,X["default"])(Yt).getInstance();e.initialize();var t=(0,G["default"])(Yt).getInstance();t.initialize();var n=(0,R["default"])(Yt).getInstance();n.setConfig({dashManifestModel:cn});var r=(0,M["default"])(Yt).getInstance();r.setConfig({sourceBufferController:n}),$t.initialize(),$t.setConfig({errHandler:on}),ln=(0,W["default"])(Yt).getInstance(),ln.initialize(),ln.setConfig({abrRulesCollection:t,synchronizationRulesCollection:e}),un=(0,d["default"])(Yt).getInstance(),un.setConfig({capabilities:sn,manifestLoader:bt(),manifestModel:(0,L["default"])(Yt).getInstance(),dashManifestModel:cn,protectionController:en,adapter:nn,metricsModel:rn,dashMetrics:fn,liveEdgeFinder:(0,m["default"])(Yt).getInstance(),mediaSourceController:(0,J["default"])(Yt).getInstance(),timeSyncController:(0,Y["default"])(Yt).getInstance(),baseURLController:(0,ee["default"])(Yt).getInstance(),virtualBuffer:r,errHandler:on,timelineConverter:(0,Ee["default"])(Yt).getInstance()}),un.initialize(Zt,Wt),Jt.setConfig({abrRulesCollection:t,rulesController:ln,streamController:un})}function bt(){return(0,h["default"])(Yt).create({errHandler:on,parser:Dt(),metricsModel:rn,requestModifier:(0,b["default"])(Yt).getInstance()})}function Dt(){return(0,he["default"])(Yt).create()}function Ot(){return nn=(0,ce["default"])(Yt).getInstance(),nn.initialize(),nn.setConfig({dashManifestModel:cn}),nn}function wt(){if(en)return en;var e=dashjs.Protection;if("function"==typeof e){var t=e(Yt).create();return oe["default"].extend(e.events),ue["default"].extend(e.events,{publicOnly:!0}),en=t.createProtectionSystem({log:qt,videoModel:gn,capabilities:sn,eventBus:Ht,adapter:nn})}return null}function Nt(){if(tn)return tn;var e=dashjs.MetricsReporting;if("function"==typeof e){var t=e(Yt).create();return tn=t.createMetricsReporting({log:qt,eventBus:Ht,mediaElement:yt(),dashManifestModel:cn,metricsModel:rn})}return null}function Pt(){var e=rn.getReadOnlyMetricsFor("video")||rn.getReadOnlyMetricsFor("audio");return fn.getCurrentDVRInfo(e)}function Lt(e){var t,n,r=Pt();return r?(t=r.manifestInfo.availableFrom.getTime()/1e3,n=e+(t+r.range.start)):0}function xt(){if(!Xt)throw Bt;var e=un.getActiveStreamInfo();return e?un.getStreamById(e.id):null}function Ft(){Xt||(Xt=!0,qt("Playback Initialized"),Ct(),"string"==typeof zt?un.load(zt):un.loadWithManifest(zt))}var Ut="2.1.1",Bt="You must first call play() to init playback before calling this method",kt="You must first call attachView() to set the video element before calling this method",jt="You must first call attachSource() with a valid source before calling this method",Kt="MediaPlayer not initialized!",Yt=this.context,Ht=(0,ie["default"])(Yt).getInstance(),Gt=(0,ne["default"])(Yt).getInstance(),qt=Gt.log,Vt=void 0,zt=void 0,Wt=void 0,Qt=void 0,Xt=void 0,Zt=void 0,Jt=void 0,$t=void 0,en=void 0,tn=void 0,nn=void 0,rn=void 0,an=void 0,on=void 0,sn=void 0,un=void 0,ln=void 0,dn=void 0,fn=void 0,cn=void 0,gn=void 0,hn=void 0;return Vt={initialize:t,on:k,off:K,extend:U,attachView:Et,attachSource:Rt,isReady:n,play:r,isPaused:a,pause:i,isSeeking:s,seek:I,setMute:l,isMuted:f,setVolume:g,getVolume:p,time:A,duration:C,timeAsUTC:D,durationAsUTC:w,getActiveStream:xt,getDVRWindowSize:y,getDVRSeekOffset:T,convertToTimeCode:x,formatUTC:P,getVersion:H,getDebug:q,getBufferLength:v,getVideoModel:z,getVideoContainer:vt,getTTMLRenderingDiv:Tt,getVideoElement:yt,getSource:It,setLiveDelayFragmentCount:Q,setLiveDelay:Z,useSuggestedPresentationDelay:$,enableLastBitrateCaching:te,enableLastMediaSettingsCaching:re,setMaxAllowedBitrateFor:ae,getMaxAllowedBitrateFor:se,setMaxAllowedRepresentationRatioFor:le,getMaxAllowedRepresentationRatioFor:fe,setAutoPlay:ge,getAutoPlay:pe,setScheduleWhilePaused:ve,getScheduleWhilePaused:ye,getDashMetrics:Te,getMetricsFor:Se,getQualityFor:Ie,setQualityFor:Re,getLimitBitrateByPortal:Ae,setLimitBitrateByPortal:Me,setTextTrack:Ce,getBitrateInfoListFor:be,setInitialBitrateFor:De,getInitialBitrateFor:Oe,setInitialRepresentationRatioFor:we,getInitialRepresentationRatioFor:Ne,getStreamsFromManifest:Pe,getTracksFor:Le,getTracksForTypeFromManifest:xe,getCurrentTrackFor:Fe,setInitialMediaSettingsFor:Ue,getInitialMediaSettingsFor:Be,setCurrentTrack:ke,getTrackSwitchModeFor:je,setTrackSwitchModeFor:Ke,setSelectionModeForInitialTrack:Ye,getSelectionModeForInitialTrack:He,getAutoSwitchQuality:Ge,setAutoSwitchQuality:qe,getAutoSwitchQualityFor:Ve,setAutoSwitchQualityFor:ze,enableBufferOccupancyABR:We,setBandwidthSafetyFactor:ut,getBandwidthSafetyFactor:lt,setAbandonLoadTimeout:dt,retrieveManifest:Qe,addUTCTimingSource:Xe,removeUTCTimingSource:Ze,clearDefaultUTCTimingSources:Je,restoreDefaultUTCTimingSources:$e,setBufferToKeep:tt,setBufferPruningInterval:nt,setStableBufferTime:rt,setBufferTimeAtTopQuality:it,setFragmentLoaderRetryAttempts:ft,setFragmentLoaderRetryInterval:ct,setBufferTimeAtTopQualityLongForm:at,setLongFormContentDurationThreshold:ot,setRichBufferThreshold:st,getProtectionController:gt,attachProtectionController:ht,setProtectionData:pt,enableManifestDateHeaderTimeSource:et,displayCaptionsOnTop:mt,attachVideoContainer:_t,attachTTMLRenderingDiv:St,reset:At},e(),Vt}Object.defineProperty(t,"__esModule",{value:!0});var a=n(57),o=r(a),s=n(10),u=r(s),l=n(25),d=r(l),f=n(16),c=r(f),g=n(88),h=r(g),p=n(50),m=r(p),v=n(18),_=r(v),y=n(148),E=r(y),T=n(35),S=r(T),I=n(24),R=r(I),A=n(36),M=r(A),C=n(51),b=r(C),D=n(14),O=r(D),w=n(39),N=r(w),P=n(27),L=r(P),x=n(5),F=r(x),U=n(12),B=r(U),k=n(9),j=r(k),K=n(100),Y=r(K),H=n(46),G=r(H),q=n(17),V=r(q),z=n(45),W=r(z),Q=n(47),X=r(Q),Z=n(59),J=r(Z),$=n(94),ee=r($),te=n(4),ne=r(te),re=n(3),ie=r(re),ae=n(2),oe=r(ae),se=n(34),ue=r(se),le=n(1),de=r(le),fe=n(19),ce=r(fe),ge=n(74),he=r(ge),pe=n(11),me=r(pe),ve=n(13),_e=r(ve),ye=n(23),Ee=r(ye);i.__dashjs_factory_name="MediaPlayer";var Te=de["default"].getClassFactory(i);Te.events=ue["default"],t["default"]=Te},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){var e="WebKitMediaSource"in window,t="MediaSource"in window;return t?new MediaSource:e?new WebKitMediaSource:null}function t(e,t){var n=window.URL.createObjectURL(e);return t.setSource(n),n}function n(e){e.setSource(null)}function r(e,t){return e.duration!=t&&(e.duration=t),e.duration}function i(e){var t=e.sourceBuffers,n=t.length,r=0;if("open"===e.readyState){for(r;n>r;r++){if(t[r].updating)return;if(0===t[r].buffered.length)return}e.endOfStream()}}var a=void 0;return a={createMediaSource:e,attachMediaSource:t,detachMediaSource:n,setDuration:r,signalEndOfStream:i}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a);i.__dashjs_factory_name="MediaSourceController",t["default"]=o["default"].getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(t,n){var r,i=t.match(o);if(i){try{r=l[i[1]](s).create({eventBus:e.eventBus}),r.initialize(i[1],n,i[3],i[5])}catch(u){r=null,a("MetricsHandlerFactory: Could not create handler for type "+i[1]+" with args "+i[3]+", "+i[5]+" ("+u.message+")")}return r}}function n(e,t){l[e]=t}function r(e){delete l[e]}var i=void 0,a=e.log,o=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,s=this.context,l={BufferLevel:u["default"],DVBErrors:d["default"],HttpList:c["default"],PlayList:h["default"],RepSwitchList:h["default"],TcpList:h["default"]};return i={create:t,register:n,unregister:r}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),s=n(108),u=r(s),l=n(109),d=r(l),f=n(111),c=r(f),g=n(110),h=r(g);i.__dashjs_factory_name="MetricsHandlerFactory",t["default"]=o["default"].getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(e,t){var n;try{n=i[e.schemeIdUri](a).create(),n.initialize(e,t)}catch(r){n=null,o("ReportingFactory: could not create Reporting with schemeIdUri "+e.schemeIdUri+" ("+r.message+")")}return n}function n(e,t){i[e]=t}function r(e){delete i[e]}var i={"urn:dvb:dash:reporting:2014":u["default"]},a=this.context,o=e.log,s=void 0;return s={create:t,register:n,unregister:r}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),s=n(112),u=r(s);i.__dashjs_factory_name="ReportingFactory",t["default"]=o["default"].getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){return{reconstructFullMetricName:function(e,t,n){var r=e;return t&&(r+="("+t,n&&n.length&&(r+=","+n),r+=")"),r},validateN:function(e){if(!e)throw"missing n";if(isNaN(e))throw"n is NaN";if(0>e)throw"n must be positive";return e}}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a);i.__dashjs_factory_name="HandlerHelpers",t["default"]=o["default"].getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e){var n=null,r=(0,u["default"])(i).getInstance();r.setConfig({log:e.log}),r.initialize();var a=t(e);return!n&&a&&(n=(0,o["default"])(i).create({protectionModel:a,protectionKeyController:r,adapter:e.adapter,eventBus:e.eventBus,log:e.log}),e.capabilities.setEncryptedMediaSupported(!0)),n}function t(e){var t=e.log,r=e.eventBus,a=e.videoModel.getElement();return void 0!==a.onencrypted&&void 0!==a.mediaKeys&&void 0!==navigator.requestMediaKeySystemAccess&&"function"==typeof navigator.requestMediaKeySystemAccess?(t("EME detected on this user agent! (ProtectionModel_21Jan2015)"),(0,c["default"])(i).create({log:t,eventBus:r})):n(a,E)?(t("EME detected on this user agent! (ProtectionModel_3Feb2014)"),(0,h["default"])(i).create({log:t,eventBus:r,api:n(a,E)})):n(a,y)?(t("EME detected on this user agent! (ProtectionModel_01b)"),(0,m["default"])(i).create({log:t,eventBus:r,api:n(a,y)})):(t("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null)}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];if("function"==typeof e[r[Object.keys(r)[0]]])return r}return null}var r=void 0,i=this.context;return r={createProtectionSystem:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(123),o=r(a),s=n(28),u=r(s),l=n(122),d=r(l),f=n(128),c=r(f),g=n(129),h=r(g),p=n(127),m=r(p),v=n(1),_=r(v),y=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],E=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];i.__dashjs_factory_name="Protection";var T=_["default"].getClassFactory(i);T.events=d["default"],t["default"]=T},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t,r){if(n(this,e),r&&"persistent"!==r&&"temporary"!==r)throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=t,this.type=r}return r(e,[{key:"toJWK",value:function(){var e,t=this.keyPairs.length,n={keys:[]};for(e=0;t>e;e++){var r={kty:"oct",alg:"A128KW",kid:this.keyPairs[e].keyID,k:this.keyPairs[e].key};n.keys.push(r)}this.type&&(n.type=this.type);var i=JSON.stringify(n),a=i.length,o=new ArrayBuffer(a),s=new Uint8Array(o);for(e=0;a>e;e++)s[e]=i.charCodeAt(e);return o}}]),e}();t["default"]=i},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function i(e,t){n(this,i),this.keyID=e,this.key=t};t["default"]=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){L={},x=[],F=(0,d["default"])(b).getInstance(),U=(0,c["default"])(b).getInstance(),B=(0,m["default"])(b).getInstance(),N.on(E["default"].PLAYBACK_SEEKING,l,P),N.on(E["default"].PERIOD_SWITCH_STARTED,f,P)}function n(e){var t={},n=e.getMediaInfo(),r=n.bitrateList.map(function(e){return e.bandwidth}),i=r.length;if(2>i||r[0]>=r[1]||r[i-2]>=r[i-1])return t.state=I,t;var a=e.getStreamProcessor(),o=e.getStreamInfo(),s=e.getTrackInfo(),u=a.isDynamic(),l=o.manifestInfo.duration,d=s.fragmentDuration,f=void 0,c=void 0;f=F.getStableBufferTime(),c=l>=F.getLongFormContentDurationThreshold()?F.getBufferTimeAtTopQualityLongForm():F.getBufferTimeAtTopQuality();var g=f;d+v>g&&(g=d+v);for(var h=[],p=0;i>p;++p)h.push(Math.log(r[p]/r[0]));var m=(g-d)/h[i-1],_=1+h[i-1]/(g/d-1),E=.2,S=!u&&g===f;if(S){for(var A=m,M=_,b=1;i>b;++b){var O=A*(M-r[0]*h[b]/(r[b]-r[0])),w=d*(2-r[0]/r[b])+E;if(w>=f){S=!1;break}w>O&&(A*=(f-w)/(f-O),M=w/A+h[b]*r[0]/(r[b]-r[0]))}S&&v>(f-d)*A/m&&(S=!1),S&&(m=A,_=M)}var N=m*(h[i-1]+_);if(t.state=R,t.bitrate=r,t.utility=h,t.Vp=m,t.gp=_,t.fragmentDuration=d,t.bandwidthSafetyFactor=F.getBandwidthSafetyFactor(),t.bufferTarget=f,t.bufferMax=c,t.bolaBufferTarget=g,t.bolaBufferMax=N,t.isDynamic=u,t.safetyGuarantee=S,t.lastQuality=0,t.virtualBuffer=0,t.throughputCount=u?y:T,C){for(var P="",L=0;L<r.length-1;++L){var x=h[L],U=h[L+1],B=r[L],k=r[L+1],j=m*((x*k-U*B)/(k-B)+_),K=m*(x+_);P+=L+":"+(r[L]/1e6).toFixed(3)+" "+j.toFixed(3)+"/"+K.toFixed(3)+" "}P+=" "+(r.length-1)+":"+(r[r.length-1]/1e6).toFixed(3)+" -/"+(m*(h[r.length-1]+_)).toFixed(3),D("BolaDebug "+n.type+" bitrates "+P)}return t}function r(e,t){for(var n=e.bitrate.length,r=n-1,i=0,a=0;n>a;++a){var o=(e.utility[a]+e.gp-t/e.Vp)/e.bitrate[a];o>i&&(i=o,r=a)}return r}function i(e,t){for(var n=O.getHttpRequests(e),r=[],i=n.length-1;i>=0;--i){var a=n[i];if(a.type===h["default"].MEDIA_SEGMENT_TYPE&&a._tfinish&&a.tresponse&&a.trace&&(r.push(a),r.length===t))break;
}return r}function a(e,t,n){var r=i(e,t);if(0===r.length)return 0;for(var a=0,o="",s=0;s<r.length;++s){var u=.001*(r[s]._tfinish.getTime()-r[s].trequest.getTime()),l=8*r[s].trace.reduce(function(e,t){return e+t.b[0]},0);o+=" "+(l/1e6).toFixed(3)+"/"+u.toFixed(3)+"="+(l/u/1e6).toFixed(3),a+=u/l}return C&&D("BolaDebug "+n+" BolaRule last throughput = "+(r.length/a/1e6).toFixed(3)+" :"+o),r.length/a}function s(e,t){for(var n=0,r=1;r<e.bitrate.length&&!(e.bitrate[r]>t);++r)n=r;return n}function u(e,t){var n=i(e,1);if(0===n.length)return 0;var r=n[0],a=(new Date).getTime(),o=r._tfinish.getTime();o>a&&(o=a);var s=L[t];L[t]=a;var u=0;return u=s&&s>o?a-s:a-o,0>u?0:.001*u}function l(){for(var e=0;e<x.length;++e){var t=x[e],n=w.getReadOnlyMetricsFor(t);if(0!==n.BolaState.length){var r=n.BolaState[0]._s;r.state!==I&&(r.state=R),w.updateBolaState(t,r)}}}function f(){}function g(e,t){var i=e.getStreamProcessor();i.getScheduleController().setTimeToLoadDelay(0);var l=(0,o["default"])(b).create(o["default"].NO_CHANGE,o["default"].WEAK),d=e.getMediaInfo(),f=d.type,c=w.getReadOnlyMetricsFor(f);if(0===c.BolaState.length){C&&D("BolaDebug "+f+"\nBolaDebug "+f+" BolaRule for state=- fragmentStart="+B.getIndexHandlerTime(e.getStreamProcessor()).toFixed(3));var g=n(e);w.updateBolaState(f,g);var h=0;if(g.state!==I){x.push(f);var p=a(c,g.throughputCount,f);if(0===p)return C&&D("BolaDebug "+f+" BolaRule quality unchanged for INITIALIZE"),void t(l);h=s(g,p*g.bandwidthSafetyFactor),g.lastQuality=h,l=(0,o["default"])(b).create(h,o["default"].DEFAULT)}return C&&D("BolaDebug "+f+" BolaRule quality "+h+" for INITIALIZE"),void t(l)}var m=c.BolaState[0]._s;if(m.state===I)return C&&D("BolaDebug "+f+" BolaRule quality 0 for ONE_BITRATE"),void t(l);C&&D("BolaDebug "+f+"\nBolaDebug "+f+" EXECUTE BolaRule for state="+m.state+" fragmentStart="+B.getIndexHandlerTime(e.getStreamProcessor()).toFixed(3));var v=O.getCurrentBufferLevel(c)?O.getCurrentBufferLevel(c):0,_=r(m,v),y=a(c,m.throughputCount,f);if(C&&D("BolaDebug "+f+" BolaRule bufferLevel="+v.toFixed(3)+"(+"+m.virtualBuffer.toFixed(3)+") lastThroughput="+(y/1e6).toFixed(3)+" tentativeQuality="+_+","+r(m,v+m.virtualBuffer)),.1>=v&&(m.virtualBuffer=0),!m.safetyGuarantee){var E=u(c,f);E>0&&(m.virtualBuffer+=E),v+m.virtualBuffer>m.bolaBufferMax&&(m.virtualBuffer=m.bolaBufferMax-v),m.virtualBuffer<0&&(m.virtualBuffer=0);var T=r(m,v+m.virtualBuffer);if(T>_){for(var S=_;T>S&&m.bitrate[S+1]*m.fragmentDuration/(y*m.bandwidthSafetyFactor)<v;)++S;if(S>_)if(S>=T)_=T;else{_=S;var N=m.Vp*(m.gp+m.utility[_]);v+m.virtualBuffer>N&&(m.virtualBuffer=N-v,m.virtualBuffer<0&&(m.virtualBuffer=0))}}}if(m.state===R||m.state===A){var P=s(m,y*m.bandwidthSafetyFactor);if(0>=y&&(m.state=M),m.state===R&&P<m.lastQuality&&(m.state=A),m.state===A&&P>m.lastQuality&&(P=m.lastQuality),_>=P&&(m.state=M),m.state!==M)return C&&D("BolaDebug "+f+" BolaRule quality "+P+">"+_+" for STARTUP"),m.lastQuality=P,w.updateBolaState(f,m),l=(0,o["default"])(b).create(P,o["default"].DEFAULT),void t(l)}var L=0;if(_>m.lastQuality){var F=s(m,y);if(_>F){if(F<m.lastQuality)F=m.lastQuality;else{var U=m.Vp*(m.utility[F]+m.gp);L=v-U}_=F}}L>0&&(L>m.virtualBuffer?(L-=m.virtualBuffer,m.virtualBuffer=0):(m.virtualBuffer-=L,L=0)),L>0&&i.getScheduleController().setTimeToLoadDelay(1e3*L),m.lastQuality=_,w.updateBolaState(f,m),l=(0,o["default"])(b).create(_,o["default"].DEFAULT),C&&D("BolaDebug "+f+" BolaRule quality "+_+" delay="+L.toFixed(3)+" for STEADY"),t(l)}function p(){N.off(E["default"].PLAYBACK_SEEKING,l,P),N.off(E["default"].PERIOD_SWITCH_STARTED,f,P),t()}var v=5,y=2,T=3,b=this.context,D=(0,S["default"])(b).getInstance().log,O=e.dashMetrics,w=e.metricsModel,N=(0,_["default"])(b).getInstance(),P=void 0,L=void 0,x=void 0,F=void 0,U=void 0,B=void 0;return P={execute:g,reset:p},t(),P}Object.defineProperty(t,"__esModule",{value:!0});var a=n(7),o=r(a),s=n(1),u=r(s),l=n(5),d=r(l),f=n(10),c=r(f),g=n(6),h=r(g),p=n(19),m=r(p),v=n(3),_=r(v),y=n(2),E=r(y),T=n(4),S=r(T),I=0,R=1,A=2,M=3,C=!1;i.__dashjs_factory_name="BolaRule";var b=u["default"].getClassFactory(i);b.BOLA_STATE_ONE_BITRATE=I,b.BOLA_STATE_STARTUP=R,b.BOLA_STATE_STARTUP_NO_INC=A,b.BOLA_STATE_STEADY=M,b.BOLA_DEBUG=C,t["default"]=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(31),u=r(s),l=function(e){function t(e,n){i(this,t);var r=a(this,Object.getPrototypeOf(t).call(this));return r.url=e||null,r.type=n||null,r.mediaType="stream",r.responseType="text",r}return o(t,e),t}(u["default"]);t["default"]=l},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function i(){n(this,i),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]};r.Trace=function(){function e(){n(this,e),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null}return e}(),r.INITIAL_PLAYOUT_START_REASON="initial_playout",r.SEEK_START_REASON="seek",r.RESUME_FROM_PAUSE_START_REASON="resume",r.METRICS_COLLECTION_START_REASON="metrics_collection_start",r.Trace.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",r.Trace.REBUFFERING_REASON="rebuffering",r.Trace.USER_REQUEST_STOP_REASON="user_request",r.Trace.END_OF_PERIOD_STOP_REASON="end_of_period",r.Trace.END_OF_CONTENT_STOP_REASON="end_of_content",r.Trace.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",r.Trace.FAILURE_STOP_REASON="failure",t["default"]=r},function(e,t,n){(function(e){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};(function(e,t){var n,r="dash",i=window.MediaSource,a=e.common,o=e.extend,s=e.version,u=function(e,t,n){return"application/dash+xml"===e.toLowerCase()&&i.isTypeSupported(t+';codecs="'+n+'"')&&(n.indexOf("mp4a.40.5")<0||navigator.userAgent.indexOf("Android")<0)},l=function(i,l){var d,f,c,g,h=e.bean,p={engineName:r,pick:function(e){var t,r,i,o;for(t=0;t<e.length;t+=1)if(r=e[t],i=r.dashType||n.type,o=r.dashCodecs||n.codecs,u(r.type,i,o))return"string"==typeof r.src&&(r.src=a.createAbsoluteUrl(r.src)),r},load:function(s){var u=i.conf,c=o(n,u.dash,u.clip.dash),g={ended:"finish",loadeddata:"ready",pause:"pause",play:"resume",progress:"buffer",ratechange:"speed",seeked:"seek",timeupdate:"progress",volumechange:"volume"},p=t.MediaPlayer.events,m=!!s.autoplay||!!u.autoplay,v="is-poster",_=0;if(d)(i.video.src&&s.src!==i.video.src||s.index)&&d.setAutoPlay(!0),d.attachSource(s.src);else{if(a.removeNode(a.findDirect("video",l)[0]||a.find(".fp-player > video",l)[0]),f=a.createElement("video",{"class":"fp-engine "+r+"-engine","x-webkit-airplay":"allow"}),Object.keys(g).forEach(function(e){var t,n=g[e],d=e+"."+r;h.on(f,d,function(e){if(u.debug&&n.indexOf("progress")<0&&console.log(d,"->",n,e.originalEvent),i.ready||!(n.indexOf("ready")<0)){var r,c,g=0,h=0,p=0;switch(n){case"ready":t=o(i.video,{duration:f.duration,seekable:f.seekable.end(null),width:f.videoWidth,height:f.videoHeight,url:i.video.src});break;case"resume":i.poster&&(i.poster=!1,a.removeClass(l,v));break;case"seek":case"progress":g=f.currentTime,i.video.live&&!_&&g>0&&(_=g),t=i.video.live?_?g-_:0:g;break;case"speed":t=f.playbackRate;break;case"volume":t=f.volume;break;case"buffer":try{if(g=f.currentTime)for(r=f.buffered,c=r.length-1;c>-1;c-=1)p=r.end(c),p>=g&&(h=p)}catch(m){}s.buffer=h,t=e}i.trigger(n,[i,t])}})}),u.poster){var y=function(){setTimeout(function(){i.poster||(a.addClass(l,v),i.poster=!0)},0)};i.one("ready."+r,y).on("stop."+r,y)}i.on("error."+r,function(){d&&(d.reset(),d=0)}),d=t.MediaPlayer().create(),i.engine[r]=d,d.enableBufferOccupancyABR(!!c.bufferOccupancyABR),d.enableLastBitrateCaching(!1),d.setScheduleWhilePaused(!0),d.getDebug().setLogToBrowserConsole(!!c.debug),Object.keys(p).forEach(function(e){var t=p[e],n=r+t.charAt(0).toUpperCase()+t.slice(1),a=c.listeners,u=a&&a.indexOf(t)>-1;d.on(t,function(t){var r,a,l=o({},t),d=i.video.src;switch(delete l.type,e){case"ERROR":switch(l.error){case"download":r=4;break;case"manifestError":r=5;break;case"mediasource":switch(t.event){case"MEDIA_ERR_DECODE":r=3;break;case"MEDIA_ERR_SRC_NOT_SUPPORTED":r=5;break;case"MEDIA_ERR_NETWORK":r=2;break;case"MEDIA_ERR_ABORTED":r=1}}if(r)return a={code:r},r>2&&(a.video=o(s,{src:d,url:l.event.url||d})),void i.trigger("error",[i,a])}u&&i.trigger(n,[i,l])})}),a.prepend(a.find(".fp-player",l)[0],f),d.initialize(f,s.src,m),m&&!e.support.zeropreload&&f.load()}i.video=s},resume:function(){f.play()},pause:function(){f.pause()},seek:function(e){f.currentTime=e},volume:function(e){f&&(f.volume=e)},speed:function(e){f.playbackRate=e,i.trigger("speed",[i,e])},unload:function(){if(d){var e="."+r;d.reset(),d=0,i.off(e),h.off(l,e),h.off(f,e),a.removeNode(f),f=0}}};return!/^6\.0\.[0-3]$/.test(s)||i.conf.splash||i.conf.poster||i.conf.autoplay||(c=a.css(l,"backgroundColor"),g="none"!==a.css(l,"backgroundImage")||c&&"rgba(0, 0, 0, 0)"!==c&&"transparent"!==c,g&&(i.conf.poster=!0)),p};i&&"function"==typeof i.isTypeSupported&&0!==s.indexOf("5.")&&(l.engineName=r,l.canPlay=function(t,i){return n=o({type:"video/mp4",codecs:"avc1.42c01e,mp4a.40.2"},e.conf[r],i[r],i.clip[r]),u(t,n.type,n.codecs)},e.engines.unshift(l))}).apply(null,"object"===t(e)&&e.exports?[n(176),n(71)]:[window.flowplayer,window.dashjs])}).call(t,n(175)(e))},function(e,t){"use strict";function n(e){var t,n,i;for(t=[],i=0,n=e.length;n>i;i+=1)e[i].isRoot?t.push("root"):t.push(e[i].name);var a=function(e,t){var n;if(null!==e&&null!==t)for(n in e)e.hasOwnProperty(n)&&(t.hasOwnProperty(n)||(t[n]=e[n]))},o=function(e,t,n){var i,o,s,u,l;if(null!==e&&0!==e.length)for(i=0,o=e.length;o>i;i+=1)s=e[i],t.hasOwnProperty(s.name)&&(n.hasOwnProperty(s.name)?s.merge&&(u=t[s.name],l=n[s.name],"object"===("undefined"==typeof u?"undefined":r(u))&&"object"===("undefined"==typeof l?"undefined":r(l))?a(u,l):null!=s.mergeFunction?n[s.name]=s.mergeFunction(u,l):n[s.name]=u+l):n[s.name]=t[s.name])},s=function l(e,t){var n,r,i,a,s,u,d,f=e;if(null!==f.children&&0!==f.children.length)for(n=0,r=f.children.length;r>n;n+=1)if(u=f.children[n],t.hasOwnProperty(u.name))if(u.isArray)for(s=t[u.name+"_asArray"],i=0,a=s.length;a>i;i+=1)d=s[i],o(f.properties,t,d),l(u,d);else d=t[u.name],o(f.properties,t,d),l(u,d)},u=function d(n){var i,a,o,u,l,f,c;if(null===n)return n;if("object"!==("undefined"==typeof n?"undefined":r(n)))return n;for(i=0,a=t.length;a>i;i+=1)"root"===t[i]&&(l=e[i],f=n,s(l,f));for(u in n)if(n.hasOwnProperty(u)&&"__children"!=u){if(o=t.indexOf(u),-1!==o)if(l=e[o],l.isArray)for(c=n[u+"_asArray"],i=0,a=c.length;a>i;i+=1)f=c[i],s(l,f);else f=n[u],s(l,f);d(n[u])}return n};return{run:u}}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};t["default"]=n},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.MediaPlayerFactory=t.MetricsReporting=t.Protection=t.MediaPlayer=void 0;var i=n(58),a=r(i),o=n(63),s=r(o),u=n(102),l=r(u),d=n(90),f=r(d),c=window||e,g=c.dashjs;g||(g=c.dashjs={}),g.MediaPlayer=a["default"],g.Protection=s["default"],g.MetricsReporting=l["default"],g.MediaPlayerFactory=f["default"],t["default"]=g,t.MediaPlayer=a["default"],t.Protection=s["default"],t.MetricsReporting=l["default"],t.MediaPlayerFactory=f["default"]}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(21),u=r(s),l=function(e){function t(){i(this,t);var e=a(this,Object.getPrototypeOf(t).call(this));return e.AST_IN_FUTURE="astinfuture",e.BUFFERING_COMPLETED="bufferingCompleted",e.BUFFER_CLEARED="bufferCleared",e.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",e.BYTES_APPENDED="bytesAppended",e.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",e.CHUNK_APPENDED="chunkAppended",e.CURRENT_TRACK_CHANGED="currenttrackchanged",e.DATA_UPDATE_COMPLETED="dataUpdateCompleted",e.DATA_UPDATE_STARTED="dataUpdateStarted",e.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",e.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",e.INITIALIZATION_LOADED="initializationLoaded",e.INIT_FRAGMENT_LOADED="initFragmentLoaded",e.INIT_REQUESTED="initRequested",e.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",e.LIVE_EDGE_SEARCH_COMPLETED="liveEdgeSearchCompleted",e.LOADING_COMPLETED="loadingCompleted",e.LOADING_PROGRESS="loadingProgress",e.MANIFEST_UPDATED="manifestUpdated",e.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",e.QUALITY_CHANGED="qualityChanged",e.QUOTA_EXCEEDED="quotaExceeded",e.REPRESENTATION_UPDATED="representationUpdated",e.SEGMENTS_LOADED="segmentsLoaded",e.SERVICE_LOCATION_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",e.SOURCEBUFFER_APPEND_COMPLETED="sourceBufferAppendCompleted",e.SOURCEBUFFER_REMOVE_COMPLETED="sourceBufferRemoveCompleted",e.STREAMS_COMPOSED="streamsComposed",e.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",e.STREAM_COMPLETED="streamCompleted",e.STREAM_INITIALIZED="streaminitialized",e.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",e.TIMED_TEXT_REQUESTED="timedTextRequested",e.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",e.URL_RESOLUTION_FAILED="urlResolutionFailed",e.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",e.XLINK_ALL_ELEMENTS_LOADED="xlinkAllElementsLoaded",e.XLINK_ELEMENT_LOADED="xlinkElementLoaded",e.XLINK_READY="xlinkReady",e}return o(t,e),t}(u["default"]);t["default"]=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){V=-1,X=0,Z=NaN,B.on(c["default"].INITIALIZATION_LOADED,L,q),B.on(c["default"].SEGMENTS_LOADED,x,q)}function n(t){J=t,Q=J.getType(),W=J.isDynamic(),$=(0,I["default"])(F).create(e,W)}function r(){return J}function i(e){X=e}function a(){return X}function s(){return V}function l(){return Z}function f(){$=null,X=0,Z=NaN,z=NaN,V=-1,W=null,Q=null,J=null,B.off(c["default"].INITIALIZATION_LOADED,L,q),B.off(c["default"].SEGMENTS_LOADED,x,q)}function g(e){return e.split("$$").join("$")}function p(e,t){if(null===t||-1===e.indexOf("$RepresentationID$"))return e;var n=t.toString();return e.split("$RepresentationID$").join(n)}function m(e,t,n){var r,i,a=G.resolve(n.path);return a&&t!==a.url&&k.isRelative(t)?(r=a.url,i=a.serviceLocation,t&&(r+=t)):r=t,k.isRelative(r)?!1:(e.url=r,e.serviceLocation=i,!0)}function v(e,t){var n,r,i=new o["default"];return n=e.adaptation.period,i.mediaType=t,i.type=d["default"].INIT_SEGMENT_TYPE,i.range=e.range,r=n.start,i.availabilityStartTime=K.calcAvailabilityStartTimeFromPresentationTime(r,e.adaptation.period.mpd,W),i.availabilityEndTime=K.calcAvailabilityEndTimeFromPresentationTime(r+n.duration,n.mpd,W),i.quality=e.index,i.mediaInfo=J.getMediaInfo(),m(i,e.initialization,e)?i:void 0}function y(e){var t;return e?t=v(e,Q):null}function S(e){var t,n,r,i=e.adaptation.period,a=e.segmentInfoType,o=!1;return 0>V?o=!1:W||V<e.availableSegmentsNumber?(n=(0,T.getSegmentByIndex)(V,e),n&&(r=n.presentationStartTime-i.start,t=e.adaptation.period.duration,U(e.segmentInfoType+": "+r+" / "+t),o="SegmentTimeline"===a&&W?!1:r>=t)):o=!0,o}function A(e){return $.getSegments(e,z,V,M)}function M(e,t){if(e.segments=t,t&&t.length>0&&(Z=isNaN(Z)?t[0].presentationStartTime:Math.min(t[0].presentationStartTime,Z)),W&&isNaN(K.getExpectedLiveEdge())){var n=t.length-1,r=t[n],i=r.presentationStartTime,a=H.getMetricsFor("stream");K.setExpectedLiveEdge(i),H.updateManifestUpdateInfo(Y.getCurrentManifestUpdate(a),{presentationStartTime:i})}}function C(e){if(!e)throw new u["default"]("no representation");return e.segments=null,A(e),e}function b(e,t){var n,r=e.initialization,i="BaseURL"!==e.segmentInfoType&&"SegmentBase"!==e.segmentInfoType;return e.segmentDuration||e.segments||C(e),e.segmentAvailabilityRange=null,e.segmentAvailabilityRange=K.calcSegmentAvailabilityRange(e,W),e.segmentAvailabilityRange.end<e.segmentAvailabilityRange.start&&!e.useCalculatedLiveEdgeTime?(n=new u["default"](R,"no segments are available yet",{availabilityDelay:e.segmentAvailabilityRange.start-e.segmentAvailabilityRange.end}),void B.trigger(c["default"].REPRESENTATION_UPDATED,{sender:this,representation:e,error:n})):(t||(V=-1),e.segmentDuration&&C(e),r||j.loadInitialization(e),i||j.loadSegments(e,Q,e.indexRange),void(r&&i&&B.trigger(c["default"].REPRESENTATION_UPDATED,{sender:this,representation:e})))}function D(e,t,n){var r,i,a,o,s,u=t.segments,l=u?u.length:null,d=-1;if(u&&l>0)for(s=0;l>s;s++)if(i=u[s],a=i.presentationStartTime,o=i.duration,r=void 0===n||null===n?o/2:n,e+r>=a&&a+o>e-r){d=i.availabilityIdx;break}return d}function O(e){if(null===e||void 0===e)return null;var t=new o["default"],n=e.representation,r=n.adaptation.period.mpd.manifest.Period_asArray[n.adaptation.period.index].AdaptationSet_asArray[n.adaptation.index].Representation_asArray[n.index].bandwidth,i=e.media;return i=(0,T.replaceTokenForTemplate)(i,"Number",e.replacementNumber),i=(0,T.replaceTokenForTemplate)(i,"Time",e.replacementTime),i=(0,T.replaceTokenForTemplate)(i,"Bandwidth",r),i=p(i,n.id),i=g(i),t.mediaType=Q,t.type=d["default"].MEDIA_SEGMENT_TYPE,t.range=e.mediaRange,t.startTime=e.presentationStartTime,t.duration=e.duration,t.timescale=n.timescale,t.availabilityStartTime=e.availabilityStartTime,t.availabilityEndTime=e.availabilityEndTime,t.wallStartTime=e.wallStartTime,t.quality=n.index,t.index=e.availabilityIdx,t.mediaInfo=J.getMediaInfo(),t.adaptationIndex=n.adaptation.index,m(t,i,n)?t:void 0}function w(e,t,n){var r,i,a,s=V,u=n?n.keepIdx:!1,l=n?n.timeThreshold:null,d=!(!n||!n.ignoreIsFinished);return e?(z!==t&&(z=t,U("Getting the request for "+Q+" time : "+t)),V=D(t,e,l),A(e),0>V&&(V=D(t,e,l)),V>0&&U("Index for "+Q+" time "+t+" is "+V),a=d?!1:S(e),a?(r=new o["default"],r.action=o["default"].ACTION_COMPLETE,r.index=V,r.mediaType=Q,r.mediaInfo=J.getMediaInfo(),U("Signal complete.",r)):(i=(0,T.getSegmentByIndex)(V,e),r=O(i)),u&&s>=0&&(V="SegmentTimeline"===e.segmentInfoType&&W?V:s),r):null}function N(e,t){var n=(e.segmentAvailabilityRange.end-e.segmentAvailabilityRange.start)/2;return e.segments=null,e.segmentAvailabilityRange={start:t-n,end:t+n},w(e,t,{keepIdx:!1,ignoreIsFinished:!0})}function P(e){var t,n,r;return e&&-1!==V?(z=null,V++,U("Getting the next request at index: "+V),r=S(e),r?(t=new o["default"],t.action=o["default"].ACTION_COMPLETE,t.index=V,t.mediaType=Q,t.mediaInfo=J.getMediaInfo(),U("Signal complete.")):(A(e),n=(0,T.getSegmentByIndex)(V,e),t=O(n),!n&&W&&V--),t):null}function L(e){var t=e.representation;t.segments&&B.trigger(c["default"].REPRESENTATION_UPDATED,{sender:this,representation:t})}function x(e){if(!e.error&&Q===e.mediaType){var t,n,r,i,a=e.segments,o=e.representation,s=[],u=0;for(t=0,n=a.length;n>t;t++)r=a[t],i=(0,T.getTimeBasedSegment)(K,W,o,r.startTime,r.duration,r.timescale,r.media,r.mediaRange,u),s.push(i),i=null,u++;o.segmentAvailabilityRange={start:s[0].presentationStartTime,end:s[n-1].presentationStartTime},o.availableSegmentsNumber=n,M(o,s),o.initialization&&B.trigger(c["default"].REPRESENTATION_UPDATED,{sender:this,representation:o})}}var F=this.context,U=(0,_["default"])(F).getInstance().log,B=(0,h["default"])(F).getInstance(),k=(0,E["default"])(F).getInstance(),j=e.segmentBaseLoader,K=e.timelineConverter,Y=e.dashMetrics,H=e.metricsModel,G=e.baseURLController,q=void 0,V=void 0,z=void 0,W=void 0,Q=void 0,X=void 0,Z=void 0,J=void 0,$=void 0;return q={initialize:n,getStreamProcessor:r,getInitRequest:y,getSegmentRequestForTime:w,getNextSegmentRequest:P,generateSegmentRequestForTime:N,updateRepresentation:b,setCurrentTime:i,getCurrentTime:a,getCurrentIndex:s,getEarliestTime:l,reset:f},t(),q}Object.defineProperty(t,"__esModule",{value:!0});var a=n(31),o=r(a),s=n(8),u=r(s),l=n(6),d=r(l),f=n(2),c=r(f),g=n(3),h=r(g),p=n(1),m=r(p),v=n(4),_=r(v),y=n(30),E=r(y),T=n(22),S=n(79),I=r(S),R=1;i.__dashjs_factory_name="DashHandler";var A=m["default"].getClassFactory(i);A.SEGMENTS_UNAVAILABLE_ERROR_CODE=R,t["default"]=A},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){y=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,E=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})([0-9]{2}))?/,T=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,S=/^https?:\/\//i,I=/^(https?:\/\/[^\/]+)\/?/i,R=[{type:"duration",test:function(e){for(var t=["minBufferTime","mediaPresentationDuration","minimumUpdatePeriod","timeShiftBufferDepth","maxSegmentDuration","maxSubsegmentDuration","suggestedPresentationDelay","start","starttime","duration"],n=t.length,r=0;n>r;r++)if(e.nodeName===t[r])return y.test(e.value);return!1},converter:function(e){var t=y.exec(e),n=parseFloat(t[2]||0)*a+parseFloat(t[4]||0)*s+parseFloat(t[6]||0)*u+parseFloat(t[8]||0)*l+parseFloat(t[10]||0)*f+parseFloat(t[12]||0);return void 0!==t[1]&&(n=-n),n}},{type:"datetime",test:function(e){return E.test(e.value)},converter:function(e){var t,n=E.exec(e);if(t=Date.UTC(parseInt(n[1],10),parseInt(n[2],10)-1,parseInt(n[3],10),parseInt(n[4],10),parseInt(n[5],10),n[6]&&parseInt(n[6],10)||0,n[7]&&parseFloat(n[7])*p||0),n[9]&&n[10]){var r=parseInt(n[9],10)*g+parseInt(n[10],10);t+=("+"===n[8]?-1:1)*r*f*p}return new Date(t)}},{type:"numeric",test:function(e){return T.test(e.value)},converter:function(e){return parseFloat(e)}}]}function t(){var e,t,n,r;return r=[{name:"profiles",merge:!1},{name:"width",merge:!1},{name:"height",merge:!1},{name:"sar",merge:!1},{name:"frameRate",merge:!1},{name:"audioSamplingRate",merge:!1},{name:"mimeType",merge:!1},{name:"segmentProfiles",merge:!1},{name:"codecs",merge:!1},{name:"maximumSAPPeriod",merge:!1},{name:"startsWithSap",merge:!1},{name:"maxPlayoutRate",merge:!1},{name:"codingDependency",merge:!1},{name:"scanType",merge:!1},{name:"FramePacking",merge:!0},{name:"AudioChannelConfiguration",merge:!0},{name:"ContentProtection",merge:!0}],e={},e.name="AdaptationSet",e.isRoot=!1,e.isArray=!0,e.parent=null,e.children=[],e.properties=r,t={},t.name="Representation",t.isRoot=!1,t.isArray=!0,t.parent=e,t.children=[],t.properties=r,e.children.push(t),n={},n.name="SubRepresentation",n.isRoot=!1,n.isArray=!0,n.parent=t,n.children=[],n.properties=r,t.children.push(n),e}function n(){var e,t,n,r;return r=[{name:"SegmentBase",merge:!0},{name:"SegmentTemplate",merge:!0},{name:"SegmentList",merge:!0}],e={},e.name="Period",e.isRoot=!1,e.isArray=!0,e.parent=null,e.children=[],e.properties=r,t={},t.name="AdaptationSet",t.isRoot=!1,t.isArray=!0,t.parent=e,t.children=[],t.properties=r,e.children.push(t),n={},n.name="Representation",n.isRoot=!1,n.isArray=!0,n.parent=t,n.children=[],n.properties=r,t.children.push(n),e}function r(){var e=[];return e.push(t()),e.push(n()),e}function i(e,t){var n,i=new h["default"](R,"",!0),a=new c["default"](r()),s=new Date,u=null,l=null;try{if(n=i.xml_str2json(e),!n)throw"parser error";u=new Date,n.hasOwnProperty("Location")&&(n.Location=n.Location_asArray[0]),a.run(n),l=new Date,t.setMatchers(R),t.setIron(a),v("Parsing complete: ( xml2json: "+(u.getTime()-s.getTime())+"ms, objectiron: "+(l.getTime()-u.getTime())+"ms, total: "+(l.getTime()-s.getTime())/1e3+"s)")}catch(d){return(0,o["default"])(m).getInstance().manifestError("parsing the manifest failed","parse",e),null}return n}var a=31536e3,s=2592e3,u=86400,l=3600,f=60,g=60,p=1e3,m=this.context,v=(0,d["default"])(m).getInstance().log,_=void 0,y=void 0,E=void 0,T=void 0,S=void 0,I=void 0,R=void 0;return _={parse:i},e(),_}Object.defineProperty(t,"__esModule",{value:!0});var a=n(18),o=r(a),s=n(1),u=r(s),l=n(4),d=r(l),f=n(70),c=r(f),g=n(33),h=r(g);i.__dashjs_factory_name="DashParser",t["default"]=u["default"].getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){E=(0,c["default"])(g).getInstance(),T=(0,_["default"])(g).getInstance(),I=(0,o["default"])(g).getInstance()}function t(e){e.baseURLController&&(R=e.baseURLController)}function n(e,t){var r=!0,i=null,a=null,o=new XMLHttpRequest,u=R.resolve(e.path),d=t||{url:u?u.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,request:o};p("Start searching for initialization."),o.onload=function(){o.status<200||o.status>299||(r=!1,d.bytesLoaded=d.range.end,a=T.parse(o.response),i=s(a),i?(e.range=i,e.initialization=d.url,v.trigger(h["default"].INITIALIZATION_LOADED,{representation:e})):(d.range.end=d.bytesLoaded+d.bytesToLoad,n(e,d)))},o.onloadend=o.onerror=function(){r&&(r=!1,E.downloadError("initialization",d.url,o),v.trigger(h["default"].INITIALIZATION_LOADED,{representation:e}))},l(o,d),p("Perform init search: "+d.url)}function r(e,t,n,i,o){if(n&&(void 0===n.start||void 0===n.end)){var s=n?n.toString().split("-"):null;n=s?{start:parseFloat(s[0]),end:parseFloat(s[1])}:null}o=o?o:f;var u=!0,d=null,c=null,g=!!n,h=new XMLHttpRequest,m=R.resolve(e.path),v={url:m?m.url:void 0,range:g?n:{start:0,end:1500},searching:!g,bytesLoaded:i?i.bytesLoaded:0,bytesToLoad:1500,request:h};h.onload=function(){if(!(h.status<200||h.status>299)){var n=v.bytesToLoad,i=h.response.byteLength;if(u=!1,v.bytesLoaded=v.range.end-v.range.start,d=T.parse(h.response),c=d.getBox("sidx"),c&&c.isComplete){var s,l,f=c.references;if(null!==f&&void 0!==f&&f.length>0&&(s=1===f[0].reference_type),s){p("Initiate multiple SIDX load."),v.range.end=v.range.start+c.size;var g,m,_,y,E,S=[],I=0,R=(c.offset||v.range.start)+c.size,A=function(n){n?(S=S.concat(n),I++,I>=m&&o(S,e,t)):o(null,e,t)};for(g=0,m=f.length;m>g;g++)_=R,y=R+f[g].referenced_size-1,R+=f[g].referenced_size,E={start:_,end:y},r(e,null,E,v,A)}else p("Parsing segments from SIDX."),l=a(c,v),o(l,e,t)}else{if(c)v.range.start=c.offset||v.range.start,v.range.end=v.range.start+(c.size||n);else{if(i<v.bytesLoaded)return void o(null,e,t);var M=d.getLastBox();M&&M.size?(v.range.start=M.offset+M.size,v.range.end=v.range.start+n):v.range.end+=n}r(e,t,v.range,v,o)}}},h.onloadend=h.onerror=function(){u&&(u=!1,E.downloadError("SIDX",v.url,h),o(null,e,t))},l(h,v),p("Perform SIDX load: "+v.url)}function i(){E=null,T=null,I=null,p=null}function a(e,t){for(var n,r,i,a,o=e.references,s=o.length,l=e.timescale,d=e.earliest_presentation_time,f=t.range.start+e.first_offset+e.size,c=[],g=0;s>g;g++)i=o[g].subsegment_duration,a=o[g].referenced_size,n=new u["default"],n.duration=i,n.media=t.url,n.startTime=d,n.timescale=l,r=f+a-1,n.mediaRange=f+"-"+r,c.push(n),d+=i,f+=a;return c}function s(e){var t,n,r=e.getBox("ftyp"),i=e.getBox("moov"),a=null;return p("Searching for initialization."),i&&i.isComplete&&(t=r?r.offset:i.offset,n=i.offset+i.size-1,a=t+"-"+n,p("Found the initialization.  Range: "+a)),a}function l(e,t){t.url&&(e.open("GET",I.modifyRequestURL(t.url)),e.responseType="arraybuffer",e.setRequestHeader("Range","bytes="+t.range.start+"-"+t.range.end),e=I.modifyRequestHeader(e),e.send(null))}function f(e,t,n){e?v.trigger(h["default"].SEGMENTS_LOADED,{segments:e,representation:t,mediaType:n}):v.trigger(h["default"].SEGMENTS_LOADED,{segments:null,representation:t,mediaType:n,error:new d["default"](null,"error loading segments",null)})}var g=this.context,p=(0,S["default"])(g).getInstance().log,v=(0,m["default"])(g).getInstance(),y=void 0,E=void 0,T=void 0,I=void 0,R=void 0;return y={setConfig:t,initialize:e,loadInitialization:n,loadSegments:r,reset:i}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(51),o=r(a),s=n(56),u=r(s),l=n(8),d=r(l),f=n(18),c=r(f),g=n(2),h=r(g),p=n(3),m=r(p),v=n(48),_=r(v),y=n(1),E=r(y),T=n(4),S=r(T);i.__dashjs_factory_name="SegmentBaseLoader",t["default"]=E["default"].getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){K=null,Y=-1,H=!0,G=[],z=(0,c["default"])(B).getInstance(),Q=(0,m["default"])(B).getInstance(),X=(0,h["default"])(B).getInstance(),Z=(0,_["default"])(B).getInstance(),J=(0,E["default"])(B).getInstance(),$=(0,R["default"])(B).getInstance(),ee=(0,d["default"])(B).getInstance(),te=(0,o["default"])(B).getInstance(),ne=(0,u["default"])(B).getInstance(),re=(0,S["default"])(B).getInstance(),k.on(O["default"].QUALITY_CHANGED,F,j),k.on(O["default"].REPRESENTATION_UPDATED,N,j),k.on(O["default"].WALLCLOCK_TIME_UPDATED,P,j),k.on(O["default"].BUFFER_LEVEL_UPDATED,x,j),k.on(O["default"].LIVE_EDGE_SEARCH_COMPLETED,L,j)}function t(e){e.abrController&&(z=e.abrController)}function n(e){V=e,W=V.getIndexHandler()}function r(){return V}function i(){return K}function a(){return Y}function s(){return H}function l(){return q}function f(){k.off(O["default"].QUALITY_CHANGED,F,j),k.off(O["default"].REPRESENTATION_UPDATED,N,j),k.off(O["default"].WALLCLOCK_TIME_UPDATED,P,j),k.off(O["default"].BUFFER_LEVEL_UPDATED,x,j),k.off(O["default"].LIVE_EDGE_SEARCH_COMPLETED,L,j),K=null,Y=-1,H=!0,G=[],z=null,Q=null,X=null,Z=null,J=null,$=null,ee=null,te=null,ne=null,re=null}function g(e,t,n){var r,i,a=null,o=V.getStreamInfo(),s=z.getTopQualityIndexFor(n,o.id);if(H=!0,k.trigger(O["default"].DATA_UPDATE_STARTED,{sender:this}),G=A(t),null===K&&"fragmentedText"!==n?(i=z.getAverageThroughput(n),a=i||z.getInitialBitrateFor(n,o),r=z.getQualityForBitrate(V.getMediaInfo(),a)):r=z.getQualityFor(n,o),r>s&&(r=s),q=y(r),K=e,"video"!==n&&"audio"!==n&&"fragmentedText"!==n)return H=!1,void k.trigger(O["default"].DATA_UPDATE_COMPLETED,{sender:this,data:K,currentRepresentation:q});for(var u=0;u<G.length;u++)W.updateRepresentation(G[u],!0)}function p(){var e=new Date,t=l(),n=1e3*X.getTime();J.addRepresentationSwitch(t.adaptation.type,e,n,t.id)}function v(){var e=ee.calcSegmentAvailabilityRange(q,V.isDynamic());J.addDVRInfo(V.getType(),X.getTime(),V.getStreamInfo().manifestInfo,e)}function y(e){return G[e]}function T(e){return G.indexOf(e)}function I(){for(var e=0,t=G.length;t>e;e++){var n=G[e].segmentInfoType;if(null===G[e].segmentAvailabilityRange||null===G[e].initialization||("SegmentBase"===n||"BaseURL"===n)&&!G[e].segments)return!1}return!0}function A(e){var t,n=Z.getValue();return Y=te.getIndexForAdaptation(K,n,e.period.index),t=te.getRepresentationsForAdaptation(n,e)}function C(e){for(var t,n=0,r=G.length;r>n;n++)t=G[n],t.segmentAvailabilityRange=ee.calcSegmentAvailabilityRange(t,e)}function D(){G.forEach(function(e){e.segmentAvailabilityRange=null})}function w(e){var t=e,n=function(){if(!s()){H=!0,k.trigger(O["default"].DATA_UPDATE_STARTED,{sender:j}),D();for(var e=0;e<G.length;e++)W.updateRepresentation(G[e],!0)}};H=!1,k.trigger(O["default"].AST_IN_FUTURE,{delay:t}),setTimeout(n,t);
}function N(e){if(e.sender.getStreamProcessor()===V&&s()){var t,n,r,i=e.representation,a=J.getMetricsFor("stream"),o=J.getMetricsFor(l().adaptation.type),u=ne.getCurrentManifestUpdate(a),d=!1,f=0;if("dynamic"==i.adaptation.period.mpd.manifest.type){var c=i.segmentAvailabilityRange.end-i.segmentAvailabilityRange.start,g=X.computeLiveDelay(q.segmentDuration,V.getStreamInfo().manifestInfo.DVRWindowSize);f=1e3*(g-c)}if(f>0)return v(),w(f),n=new M["default"](U,"Segments update failed",null),void k.trigger(O["default"].DATA_UPDATE_COMPLETED,{sender:this,data:K,currentRepresentation:q,error:n});if(u){for(var h=0;h<u.trackInfo.length;h++)if(t=u.trackInfo[h],t.index===i.index&&t.mediaType===V.getType()){d=!0;break}d||J.addManifestUpdateRepresentationInfo(u,i.id,i.index,i.adaptation.period.index,V.getType(),i.presentationTimeOffset,i.startNumber,i.segmentInfoType)}I()&&(H=!1,z.setPlaybackQuality(V.getType(),V.getStreamInfo(),T(q)),J.updateManifestUpdateInfo(u,{latency:q.segmentAvailabilityRange.end-X.getTime()}),r=ne.getCurrentRepresentationSwitch(o),r||p(),k.trigger(O["default"].DATA_UPDATE_COMPLETED,{sender:this,data:K,currentRepresentation:q}))}}function P(e){e.isDynamic&&C(e.isDynamic)}function L(e){if(!e.error){C(!0),W.updateRepresentation(q,!1);var t=Z.getValue(),n=q.adaptation.period,r=Q.getActiveStreamInfo();r.isLast&&(n.mpd.checkTime=te.getCheckTime(t,n),n.duration=te.getEndTimeForLastPeriod(Z.getValue(),n)-n.start,r.duration=n.duration)}}function x(e){e.sender.getStreamProcessor()===V&&v()}function F(e){e.mediaType===V.getType()&&V.getStreamInfo().id===e.streamInfo.id&&e.oldQuality!==e.newQuality&&(q=y(e.newQuality),$.setSavedBitrateSettings(e.mediaType,q.bandwidth),p())}var U=1,B=this.context,k=(0,b["default"])(B).getInstance(),j=void 0,K=void 0,Y=void 0,H=void 0,G=void 0,q=void 0,V=void 0,z=void 0,W=void 0,Q=void 0,X=void 0,Z=void 0,J=void 0,$=void 0,ee=void 0,te=void 0,ne=void 0,re=void 0;return j={initialize:n,setConfig:t,getData:i,getDataIndex:a,isUpdating:s,updateData:g,getStreamProcessor:r,getCurrentRepresentation:l,getRepresentationForQuality:y,reset:f},e(),j}Object.defineProperty(t,"__esModule",{value:!0});var a=n(11),o=r(a),s=n(13),u=r(s),l=n(23),d=r(l),f=n(9),c=r(f),g=n(10),h=r(g),p=n(25),m=r(p),v=n(27),_=r(v),y=n(12),E=r(y),T=n(5),S=r(T),I=n(49),R=r(I),A=n(8),M=r(A),C=n(3),b=r(C),D=n(2),O=r(D),w=n(1),N=r(w);i.__dashjs_factory_name="RepresentationController",t["default"]=N["default"].getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e){e&&e.boxParser&&(i=e.boxParser)}function t(e){var t,n,r,a,o,s,u,l,d,f,c,g=i.parse(e),h=g.getBox("tfhd"),p=g.getBox("tfdt"),m=g.getBox("trun"),v=g.getBox("moof"),_=g.getBox("mfhd");for(f=_.sequence_number,r=m.sample_count,o=p.baseMediaDecodeTime,d=(h.base_data_offset||0)+(m.data_offset||0),s=[],l=0;r>l;l++)u=m.samples[l],t=void 0!==u.sample_duration?u.sample_duration:h.default_sample_duration,a=void 0!==u.sample_size?u.sample_size:h.default_sample_size,n=void 0!==u.sample_composition_time_offset?u.sample_composition_time_offset:0,s.push({dts:o,cts:o+n,duration:t,offset:v.offset+d,size:a}),d+=a,o+=t;return c=o-p.baseMediaDecodeTime,{sampleList:s,sequenceNumber:f,totalDuration:c}}function n(e){var t=i.parse(e),n=t.getBox("mdhd");return n?n.timescale:NaN}var r=void 0,i=void 0;return r={getSamplesInfo:t,getMediaTimescaleFromMoov:n,setConfig:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a);i.__dashjs_factory_name="FragmentedTextBoxParser",t["default"]=o["default"].getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){function n(e,n,i,a){var o,u,l,d,f,c,g,h=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,p=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].BaseURL,m=h.SegmentURL_asArray.length,v=[];for(g=e.startNumber,d=(0,s.decideSegmentListRangeForTemplate)(r,t,e,n,i,a),f=Math.max(d.start,0),c=Math.min(d.end,h.SegmentURL_asArray.length-1),o=f;c>=o;o++)l=h.SegmentURL_asArray[o],u=(0,s.getIndexBasedSegment)(r,t,e,o),u.replacementTime=(g+o-1)*e.segmentDuration,u.media=l.media?l.media:p,u.mediaRange=l.mediaRange,u.index=l.index,u.indexRange=l.indexRange,v.push(u),u=null;return e.availableSegmentsNumber=m,v}var r=e.timelineConverter,i=void 0;return i={getSegments:n}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),s=n(22);i.__dashjs_factory_name="ListSegmentsGetter";var u=o["default"].getClassFactory(i);t["default"]=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){function n(){s=(0,u["default"])(a).create(e,t),l=(0,d["default"])(a).create(e,t),f=(0,c["default"])(a).create(e,t)}function r(e,t,n,r,a){var o,u=e.segmentInfoType;return"SegmentBase"!==u&&"BaseURL"!==u&&i(e,n)?("SegmentTimeline"===u?o=s.getSegments(e,t,n,a):"SegmentTemplate"===u?o=l.getSegments(e,t,n,a):"SegmentList"===u&&(o=f.getSegments(e,t,n,a)),r&&r(e,o)):o=e.segments,o}function i(e,t){var n,r,i=e.segments,a=!1;return i&&0!==i.length?(r=i[0].availabilityIdx,n=i[i.length-1].availabilityIdx,a=r>t||t>n):a=!0,a}var a=this.context,o=void 0,s=void 0,l=void 0,f=void 0;return o={getSegments:r},n(),o}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),s=n(81),u=r(s),l=n(80),d=r(l),f=n(78),c=r(f);i.__dashjs_factory_name="SegmentsGetter";var g=o["default"].getClassFactory(i);t["default"]=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){function n(e,n,i,a){var o,u,l,d,f,c=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate,g=e.segmentDuration,h=e.segmentAvailabilityRange,p=[],m=null,v=null;for(f=e.startNumber,o=isNaN(g)&&!t?{start:f,end:f}:(0,s.decideSegmentListRangeForTemplate)(r,t,e,n,i,a),l=o.start,d=o.end,u=l;d>=u;u++)v=(0,s.getIndexBasedSegment)(r,t,e,u),v.replacementTime=(f+u-1)*e.segmentDuration,m=c.media,m=(0,s.replaceTokenForTemplate)(m,"Number",v.replacementNumber),m=(0,s.replaceTokenForTemplate)(m,"Time",v.replacementTime),v.media=m,p.push(v),v=null;return isNaN(g)?e.availableSegmentsNumber=1:e.availableSegmentsNumber=Math.ceil((h.end-h.start)/g),p}var r=e.timelineConverter,i=void 0;return i={getSegments:n}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),s=n(22);i.__dashjs_factory_name="TemplateSegmentsGetter";var u=o["default"].getClassFactory(i);t["default"]=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){function n(e,n,i,a){var o,u,l,d,f,c,g,h,p,m,v,_,y,E,T=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate,S=T.SegmentTimeline,I=e.availableSegmentsNumber>0,R=10,A=0,M=0,C=-1,b=[],D=!1,O=function(n){return(0,s.getTimeBasedSegment)(r,t,e,A,n.d,E,T.media,n.mediaRange,C)};for(E=e.timescale,o=S.S_asArray,p=(0,s.decideSegmentListRangeForTimeline)(r,t,n,i,a),p?(_=p.start,y=p.end):v=r.calcMediaTimeFromPresentationTime(n||0,e),l=0,d=o.length;d>l;l++){if(u=o[l],c=0,u.hasOwnProperty("r")&&(c=u.r),u.hasOwnProperty("t")&&(A=u.t,M=A/E),0>c){if(h=o[l+1],h&&h.hasOwnProperty("t"))g=h.t/E;else{var w=e.segmentAvailabilityRange?e.segmentAvailabilityRange.end:r.calcSegmentAvailabilityRange(e,t).end;g=r.calcMediaTimeFromPresentationTime(w,e),e.segmentDuration=u.d/E}c=Math.ceil((g-M)/(u.d/E))-1}if(m){if(I)break;C+=c+1}else for(f=0;c>=f;f++){if(C++,p){if(C>y){if(m=!0,I)break;continue}C>=_&&b.push(O(u))}else{if(b.length>R){if(m=!0,I)break;continue}D?b.push(O(u)):M>=v-u.d/E*1.5&&(D=!0,b.push(O(u)))}A+=u.d,M=A/E}}return I||(e.availableSegmentsNumber=C+1),b}var r=e.timelineConverter,i=void 0;return i={getSegments:n}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),s=n(22);i.__dashjs_factory_name="TimelineSegmentsGetter";var u=o["default"].getClassFactory(i);t["default"]=u},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function i(){n(this,i),this.period=null,this.index=-1,this.type=null};t["default"]=r},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function i(){n(this,i),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri=""};t["default"]=r},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function i(){n(this,i),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.checkTime=NaN,this.clientServerTimeShift=0,this.isClientServerTimeSyncCompleted=!1};t["default"]=r},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function i(){n(this,i),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null};r.DEFAULT_ID="defaultId",t["default"]=r},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function i(){n(this,i),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.segmentAvailabilityRange=null,this.availableSegmentsNumber=0,this.bandwidth=NaN,this.maxPlayoutRate=NaN};t["default"]=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){g=(0,o["default"])(s).create({errHandler:e.errHandler,metricsModel:e.metricsModel,requestModifier:e.requestModifier})}function n(e){var t=function(t){l.trigger(h["default"].CHECK_FOR_EXISTENCE_COMPLETED,{request:e,exists:t})};if(e){var n=new u["default"](e.url);g.load({request:n,success:function(){t(!0)},error:function(){t(!1)}})}else t(!1)}function r(e){var t=function(t,n){l.trigger(h["default"].LOADING_COMPLETED,{request:e,response:t||null,error:n||null,sender:f})};e?g.load({request:e,progress:function(){l.trigger(h["default"].LOADING_PROGRESS,{request:e})},success:function(e){t(e)},error:function(e,n,r){t(void 0,new d["default"](v,r,n))}}):t(void 0,new d["default"](_,y))}function i(){g&&g.abort()}function a(){g&&(g.abort(),g=null)}var s=this.context,l=(0,c["default"])(s).getInstance(),f=void 0,g=void 0;return f={checkForExistence:n,load:r,abort:i,reset:a},t(),f}Object.defineProperty(t,"__esModule",{value:!0});var a=n(37),o=r(a),s=n(155),u=r(s),l=n(8),d=r(l),f=n(3),c=r(f),g=n(2),h=r(g),p=n(1),m=r(p),v=1,_=2,y="request is null";i.__dashjs_factory_name="FragmentLoader";var E=m["default"].getClassFactory(i);E.FRAGMENT_LOADER_ERROR_LOADING_FAILURE=v,E.FRAGMENT_LOADER_ERROR_NULL_REQUEST=_,t["default"]=E},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){s.on(E["default"].XLINK_READY,n,g),p=(0,u["default"])(a).create({errHandler:e.errHandler,metricsModel:e.metricsModel,requestModifier:e.requestModifier}),v=(0,o["default"])(a).create({errHandler:e.errHandler,metricsModel:e.metricsModel,requestModifier:e.requestModifier})}function n(e){s.trigger(E["default"].INTERNAL_MANIFEST_LOADED,{manifest:e.manifest})}function r(e){var t=new c["default"](e,m["default"].MPD_TYPE);p.load({request:t,success:function(t,n,r){var i,a;r.responseURL&&r.responseURL!==e?(a=l.parseBaseUrl(r.responseURL),i=r.responseURL):(l.isRelative(e)&&(e=l.parseBaseUrl(window.location.href)+e),a=l.parseBaseUrl(e));var o=f.parse(t,v);o?(o.url=i||e,o.originalUrl||(o.originalUrl=o.url),o.baseUri=a,o.loadedTime=new Date,v.resolveManifestOnLoad(o)):s.trigger(E["default"].INTERNAL_MANIFEST_LOADED,{manifest:null,error:new h["default"](I,A)})},error:function(t,n,r){s.trigger(E["default"].INTERNAL_MANIFEST_LOADED,{manifest:null,error:new h["default"](R,"Failed loading manifest: "+e+", "+r)})}})}function i(){s.off(E["default"].XLINK_READY,n,g),v&&(v.reset(),v=null),p&&(p.abort(),p=null)}var a=this.context,s=(0,_["default"])(a).getInstance(),l=(0,d["default"])(a).getInstance(),f=e.parser,g=void 0,p=void 0,v=void 0;return g={load:r,reset:i},t(),g}Object.defineProperty(t,"__esModule",{value:!0});var a=n(101),o=r(a),s=n(37),u=r(s),l=n(30),d=r(l),f=n(67),c=r(f),g=n(8),h=r(g),p=n(6),m=r(p),v=n(3),_=r(v),y=n(2),E=r(y),T=n(1),S=r(T),I=1,R=2,A="parsing failed";i.__dashjs_factory_name="ManifestLoader";var M=S["default"].getClassFactory(i);M.MANIFEST_LOADER_ERROR_PARSING_FAILURE=I,M.MANIFEST_LOADER_ERROR_LOADING_FAILURE=R,t["default"]=M},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e){e&&(e.manifestModel&&(A=e.manifestModel),e.dashManifestModel&&(M=e.dashManifestModel))}function t(e){R=e,E=NaN,T=null,I=!1,S=!0,_.on(u["default"].STREAMS_COMPOSED,p,this),_.on(u["default"].PLAYBACK_STARTED,g,this),_.on(u["default"].PLAYBACK_PAUSED,h,this),_.on(u["default"].INTERNAL_MANIFEST_LOADED,f,this)}function n(e){l(e)}function r(){return R}function i(){_.off(u["default"].PLAYBACK_STARTED,g,this),_.off(u["default"].PLAYBACK_PAUSED,h,this),_.off(u["default"].STREAMS_COMPOSED,p,this),_.off(u["default"].INTERNAL_MANIFEST_LOADED,f,this),S=!0,I=!1,a(),E=NaN}function a(){null!==T&&(clearInterval(T),T=null)}function s(){a(),isNaN(E)||(v("Refresh manifest in "+E+" seconds."),T=setTimeout(d,Math.min(1e3*E,Math.pow(2,31)-1),this))}function l(e){var t,n,r=new Date;A.setValue(e),v("Manifest has been refreshed at "+r+"["+r.getTime()/1e3+"] "),t=M.getRefreshDelay(e),n=((new Date).getTime()-e.loadedTime.getTime())/1e3,E=Math.max(t-n,0),_.trigger(u["default"].MANIFEST_UPDATED,{manifest:e}),S||s()}function d(){var e,t;S||I||(I=!0,e=A.getValue(),t=e.url,e.hasOwnProperty("Location")&&(t=e.Location),R.load(t))}function f(e){e.error||l(e.manifest)}function g(){S=!1,s()}function h(){S=!0,a()}function p(){I=!1}var m=this.context,v=(0,c["default"])(m).getInstance().log,_=(0,o["default"])(m).getInstance(),y=void 0,E=void 0,T=void 0,S=void 0,I=void 0,R=void 0,A=void 0,M=void 0;return y={initialize:t,setManifest:n,getManifestLoader:r,setConfig:e,reset:i}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),o=r(a),s=n(2),u=r(s),l=n(1),d=r(l),f=n(4),c=r(f);i.__dashjs_factory_name="ManifestUpdater",t["default"]=d["default"].getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e,t,n){if(!e||"VIDEO"!==e.nodeName)return null;if(e._dashjs_player)return e._dashjs_player;var i,a=e.id||e.name||"video element";if(t=t||[].slice.call(e.querySelectorAll("source")).filter(function(e){return e.type==r})[0],!t&&e.src)t=document.createElement("source"),t.src=e.src;else if(!t&&!e.src)return null;return n=n||{},i=(0,s["default"])(n).create(),i.initialize(e,t.src,e.autoplay),i.getDebug().log("Converted "+a+" to dash.js player and added content: "+t.src),e._dashjs_player=i,i}function t(t,i){var a=[];t=t||"[data-dashjs-player]",i=i||document;for(var o=i.querySelectorAll(t),s=0;s<o.length;s++){var u=e(o[s],null);a.push(u)}for(var l=i.querySelectorAll('source[type="'+r+'"]'),d=0;d<l.length;d++){var f=n(l[d]),c=e(f,null);a.push(c)}return a}function n(e){return"video"===e.nodeName.toLowerCase()?e:n(e.parentNode)}var r="application/dash+xml";return{create:e,createAll:t}}function a(){window.removeEventListener("load",a),u.createAll()}Object.defineProperty(t,"__esModule",{value:!0});var o=n(58),s=r(o),u=i(),l=window&&window.dashjs&&window.dashjs.skipAutoCreate;!l&&window&&window.addEventListener&&("complete"===window.document.readyState?u.createAll():window.addEventListener("load",a)),t["default"]=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){se=[],ue=!1,le=!1,de=null,fe={},ce=!1,ge=!1,pe=(0,o["default"])(X).getInstance(),me=(0,S["default"])(X).getInstance(),Ee=(0,m["default"])(X).getInstance(),ve=(0,d["default"])(X).getInstance(),_e=(0,h["default"])(X).create(),Te=(0,B["default"])(X).getInstance(),J.on(N["default"].BUFFERING_COMPLETED,G,oe),J.on(N["default"].DATA_UPDATE_COMPLETED,q,oe)}function n(e,t){de=e,he=t,he&&(J.on(N["default"].KEY_ERROR,D,oe),J.on(N["default"].SERVER_CERTIFICATE_UPDATED,D,oe),J.on(N["default"].LICENSE_REQUEST_COMPLETE,D,oe),J.on(N["default"].KEY_SYSTEM_SELECTED,D,oe),J.on(N["default"].KEY_SESSION_CREATED,D,oe))}function r(e){ue?H():(J.on(N["default"].CURRENT_TRACK_CHANGED,x,oe),j(e))}function i(){for(var e=se.length,t=0;e>t;t++)se[t].reset();se=[],ue=!1,le=!1,I(),J.off(N["default"].CURRENT_TRACK_CHANGED,x,oe)}function a(){me&&(me.pause(),me=null),_e&&(_e.reset(),_e=null),pe.abortSearch(),i(),ve=null,Ee=null,ee=null,$=null,te=null,ne=null,Z=null,re=null,ce=!1,ge=!1,fe={},J.off(N["default"].DATA_UPDATE_COMPLETED,q,oe),J.off(N["default"].BUFFERING_COMPLETED,G,oe),J.off(N["default"].KEY_ERROR,D,oe),J.off(N["default"].SERVER_CERTIFICATE_UPDATED,D,oe),J.off(N["default"].LICENSE_REQUEST_COMPLETE,D,oe),J.off(N["default"].KEY_SYSTEM_SELECTED,D,oe),J.off(N["default"].KEY_SESSION_CREATED,D,oe)}function s(){return de.duration}function l(){return de.start}function f(){return de.index}function g(){return de.id}function p(){return de}function v(e){return null!==Y(e)}function y(e){var t=Y(e);return Ee.getBitrateList(t)}function T(){ye&&ye.start()}function I(){ye&&ye.clear()}function A(){return ue}function C(){return ge}function D(e){e.error&&(re.mediaKeySessionError(e.error),Z(e.error),a())}function w(e){return"text"===e.type?e.mimeType:e.type}function P(e,t,n){var r,i,a=e.type;if("muxed"===a&&e)return i="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",Z(i),re.manifestError(i,"multiplexedrep",$.getValue()),!1;if("text"===a||"fragmentedText"===a||"embeddedText"===a)return!0;if(r=e.codec,Z(a+" codec: "+r),e.contentProtection&&!ne.supportsEncryptedMedia())re.capabilityError("encryptedmedia");else if(!ne.supportsCodec((0,_["default"])(X).getInstance().getElement(),r))return i=a+"Codec ("+r+") is not supported.",re.manifestError(i,"codec",n),Z(i),!1;return!0}function x(e){if(e.newMediaInfo.streamInfo.id===de.id){var t=V(e.oldMediaInfo);if(t){var n=me.getTime(),r=t.getBuffer(),i=e.newMediaInfo,a=$.getValue(),o=se.indexOf(t),s=t.getMediaSource();"fragmentedText"!==i.type?(t.reset(!0),U(i,a,s,{buffer:r,replaceIdx:o,currentTime:n}),me.seek(me.getTime())):t.updateMediaInfo(a,i)}}}function F(){var e=(0,M["default"])(X).getInstance();e.setConfig({baseURLController:ae}),e.initialize();var t=(0,R["default"])(X).create({segmentBaseLoader:e,timelineConverter:ie,dashMetrics:(0,b["default"])(X).getInstance(),metricsModel:(0,E["default"])(X).getInstance(),baseURLController:ae});return t}function U(e,t,n,r){var i=(0,u["default"])(X).create({indexHandler:F(),timelineConverter:ie,adapter:te,manifestModel:$}),a=te.getAllMediaInfoForType(t,de,e.type);if(i.initialize(w(e),_e,n,oe,ye),Ee.updateTopQualityIndex(e),r?(i.setBuffer(r.buffer),se[r.replaceIdx]=i):se.push(i),"text"===e.type||"fragmentedText"===e.type){for(var o,s=0;s<a.length;s++)a[s].index===e.index&&(o=s),i.updateMediaInfo(t,a[s]);"fragmentedText"===e.type&&i.updateMediaInfo(t,a[o])}else i.updateMediaInfo(t,e);return i}function k(e,t){var n,r=$.getValue(),i=te.getAllMediaInfoForType(r,de,e),a=null;if(!i||0===i.length)return void Z("No "+e+" data.");for(var o=0,s=i.length;s>o;o++)if(a=i[o],"embeddedText"===e)Te.addEmbeddedTrack(a);else{if(!P(a,t,r))continue;ve.isMultiTrackSupportedByType(a.type)&&ve.addTrack(a,de)}"embeddedText"!==e&&0!==ve.getTracksFor(e,de).length&&(ve.checkInitialMediaSettingsForType(e,de),n=ve.getCurrentTrackFor(e,de),U(n,r,t))}function j(e){var t,n=$.getValue();if(ye=(0,c["default"])(X).getInstance(),ye.initialize(),ye.setConfig({manifestModel:$,manifestUpdater:ee}),t=te.getEventsFor(n,de),ye.addInlineEvents(t),ce=!0,k("video",e),k("audio",e),k("text",e),k("fragmentedText",e),k("embeddedText",e),k("muxed",e),H(),le=!0,ce=!1,0===se.length){var r="No streams to play.";re.manifestError(r,"nostreams",n),Z(r)}else pe.initialize(ie,se[0]),K()}function K(){var e=se.length,t=!!fe.audio||!!fe.video,n=t?new Error(Q,"Data update failed",null):null,r=0;for(r;e>r;r++)if(se[r].isUpdating()||ce)return;ge=!0,ue=!0,le&&(he&&he.initialize($.getValue(),Y("audio"),Y("video")),J.trigger(N["default"].STREAM_INITIALIZED,{streamInfo:de,error:n}))}function Y(e){for(var t=se.length,n=null,r=0;t>r;r++)if(n=se[r],n.getType()===e)return n.getMediaInfo();return null}function H(){for(var e=0,t=se.length;t>e;e++)se[e].createBuffer()}function G(e){if(e.streamInfo===de){var t=z(),n=t.length,r=0;for(r;n>r;r++)if(!t[r].isBufferingCompleted())return;J.trigger(N["default"].STREAM_BUFFERING_COMPLETED,{streamInfo:de})}}function q(e){var t=e.sender.getStreamProcessor();t.getStreamInfo()===de&&(fe[t.getType()]=e.error,K())}function V(e){if(!e)return!1;var t=z();return t.filter(function(t){return t.getType()===e.type})[0]}function z(){var e,t,n=se.length,r=[],i=0;for(i;n>i;i++)t=se[i],e=t.getType(),"audio"!==e&&"video"!==e&&"fragmentedText"!==e||r.push(t);return r}function W(e){var t,n,r,i=se.length,a=$.getValue(),o=0;for(ue=!1,de=e,Z("Manifest updated... set new data on buffers."),ye&&(n=te.getEventsFor(a,de),ye.addInlineEvents(n)),ce=!0,ge=!1,o;i>o;o++)r=se[o],t=te.getMediaInfoForType(a,de,r.getType()),Ee.updateTopQualityIndex(t),r.updateMediaInfo(a,t);ce=!1,K()}var Q=1,X=this.context,Z=(0,L["default"])(X).getInstance().log,J=(0,O["default"])(X).getInstance(),$=e.manifestModel,ee=e.manifestUpdater,te=e.adapter,ne=e.capabilities,re=e.errHandler,ie=e.timelineConverter,ae=e.baseURLController,oe=void 0,se=void 0,ue=void 0,le=void 0,de=void 0,fe=void 0,ce=void 0,ge=void 0,he=void 0,pe=void 0,me=void 0,ve=void 0,_e=void 0,ye=void 0,Ee=void 0,Te=void 0;return oe={initialize:n,activate:r,deactivate:i,getDuration:s,getStartTime:l,getStreamIndex:f,getId:g,getStreamInfo:p,hasMedia:v,getBitrateListFor:y,startEventController:T,isActivated:A,isInitialized:C,updateData:W,reset:a,getProcessors:z},t(),oe}Object.defineProperty(t,"__esModule",{value:!0});var a=n(50),o=r(a),s=n(92),u=r(s),l=n(16),d=r(l),f=n(96),c=r(f),g=n(97),h=r(g),p=n(9),m=r(p),v=n(17),_=r(v),y=n(12),E=r(y),T=n(10),S=r(T),I=n(73),R=r(I),A=n(75),M=r(A),C=n(13),b=r(C),D=n(3),O=r(D),w=n(2),N=r(w),P=n(4),L=r(P),x=n(1),F=r(x),U=n(14),B=r(U);i.__dashjs_factory_name="Stream",t["default"]=F["default"].getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){ie=[]}function n(e,t,n,r,i){re=e,ae=r,oe=i,fe=t,te=ae.getStreamInfo().manifestInfo.isDynamic,X.initialize(this),se=(0,o["default"])(Q).getInstance(),se.initialize(re,this),ue=W(e),ue.initialize(re,n,this),le=(0,m["default"])(Q).create({metricsModel:(0,S["default"])(Q).getInstance(),manifestModel:$,adapter:J,dashMetrics:(0,B["default"])(Q).getInstance(),dashManifestModel:(0,F["default"])(Q).getInstance(),timelineConverter:Z,rulesController:(0,_["default"])(Q).getInstance(),mediaPlayerModel:(0,E["default"])(Q).getInstance()}),le.initialize(re,this),ce=(0,R["default"])(Q).create({metricsModel:(0,S["default"])(Q).getInstance(),errHandler:(0,Y["default"])(Q).getInstance(),requestModifier:(0,M["default"])(Q).getInstance()}),de=(0,j["default"])(Q).create(),de.initialize(this),ge=le.getFragmentModel(),ge.setLoader(ce)}function r(e){ge&&(ge.reset(),ge=null),X.reset(),ue&&(ue.reset(e),ue=null),le&&(le.reset(),le=null),de&&(de.reset(),de=null),fe=null,ce=null,oe=null,ae=null,te=null,ne=null,ie=[],re=null}function i(){return de.isUpdating()}function a(){return re}function s(){return se}function l(){return de}function f(){return ce}function g(){return X}function p(){return fe}function v(){return ue.getBuffer()}function y(e){ue.setBuffer(e)}function T(){return ue}function I(){return ge}function A(){return ae.getStreamInfo()}function C(e,t){t===ne||t&&ne&&t.type!==ne.type||(ne=t),-1===ie.indexOf(t)&&ie.push(t),J.updateData(e,this)}function D(){return ie}function w(){return ne}function P(){return ue.getMediaSource()}function x(){return le}function U(){return oe}function k(){le.start()}function K(){le.stop()}function H(){return J.getCurrentRepresentationInfo($.getValue(),de)}function G(e){return J.getRepresentationInfoForQuality($.getValue(),de,e)}function q(){return ue.getIsBufferingCompleted()}function V(){return ue.getBuffer()||ue.createBuffer(ne)}function z(){return te}function W(e){var t=null;return t="video"===e||"audio"===e||"fragmentedText"===e?(0,u["default"])(Q).create({metricsModel:(0,S["default"])(Q).getInstance(),manifestModel:$,sourceBufferController:(0,b["default"])(Q).getInstance(),errHandler:(0,Y["default"])(Q).getInstance(),mediaSourceController:(0,L["default"])(Q).getInstance(),streamController:(0,d["default"])(Q).getInstance(),mediaController:(0,c["default"])(Q).getInstance(),adapter:J,virtualBuffer:(0,N["default"])(Q).getInstance(),textSourceBuffer:(0,O["default"])(Q).getInstance()}):(0,h["default"])(Q).create({errHandler:(0,Y["default"])(Q).getInstance(),sourceBufferController:(0,b["default"])(Q).getInstance()})}var Q=this.context,X=e.indexHandler,Z=e.timelineConverter,J=e.adapter,$=e.manifestModel,ee=void 0,te=void 0,ne=void 0,re=void 0,ie=void 0,ae=void 0,oe=void 0,se=void 0,ue=void 0,le=void 0,de=void 0,fe=void 0,ce=void 0,ge=void 0;return ee={initialize:n,isUpdating:i,getType:a,getBufferController:T,getABRController:s,getFragmentLoader:f,getFragmentModel:I,getScheduleController:x,getEventController:U,getFragmentController:p,getRepresentationController:l,getIndexHandler:g,getCurrentRepresentationInfo:H,getRepresentationInfoForQuality:G,isBufferingCompleted:q,createBuffer:V,getStreamInfo:A,updateMediaInfo:C,getMediaInfoArr:D,getMediaInfo:w,getMediaSource:P,getBuffer:v,setBuffer:y,start:k,stop:K,isDynamic:z,reset:r},t(),ee}Object.defineProperty(t,"__esModule",{value:!0});var a=n(9),o=r(a),s=n(15),u=r(s),l=n(25),d=r(l),f=n(16),c=r(f),g=n(99),h=r(g),p=n(98),m=r(p),v=n(45),_=r(v),y=n(5),E=r(y),T=n(12),S=r(T),I=n(87),R=r(I),A=n(51),M=r(A),C=n(24),b=r(C),D=n(14),O=r(D),w=n(36),N=r(w),P=n(59),L=r(P),x=n(11),F=r(x),U=n(13),B=r(U),k=n(76),j=r(k),K=n(18),Y=r(K),H=n(1),G=r(H);i.__dashjs_factory_name="StreamProcessor",t["default"]=G["default"].getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(e,t,n){var i=function(r,i){t.resolved=!0,t.resolvedContent=r?r:null,a.trigger(m["default"].XLINK_ELEMENT_LOADED,{element:t,resolveObject:n,error:r||i?null:new o["default"](y,"Failed loading Xlink element: "+e)})};if(e===r)i(null,!0);else{var u=new c["default"](e,d["default"].XLINK_TYPE);s.load({request:u,success:function(e){i(e)},error:function(){i(null)}})}}function n(){s&&(s.abort(),s=null)}var r="urn:mpeg:dash:resolve-to-zero:2013",i=this.context,a=(0,h["default"])(i).getInstance(),s=(0,u["default"])(i).create({errHandler:e.errHandler,metricsModel:e.metricsModel,requestModifier:e.requestModifier}),l=void 0;return l={load:t,reset:n}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(8),o=r(a),s=n(37),u=r(s),l=n(6),d=r(l),f=n(67),c=r(f),g=n(3),h=r(g),p=n(2),m=r(p),v=n(1),_=r(v),y=1;i.__dashjs_factory_name="XlinkLoader";var E=_["default"].getClassFactory(i);E.XLINK_LOADER_ERROR_LOADING_FAILURE=y,t["default"]=E},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e){h.invalidateSelectedIndexes(e.entry)}function t(){h=(0,o["default"])(l).create(),p=(0,u["default"])(l).create(),f.on(_["default"].SERVICE_LOCATION_BLACKLIST_CHANGED,e,s)}function n(e){h.update(e),p.chooseSelectorFromManifest(e)}function r(e){var t=h.getForPath(e),n=t.reduce(function(e,t){var n=p.select(t);return n&&(g.isRelative(n.url)?e.url+=n.url:(e.url=n.url,e.serviceLocation=n.serviceLocation)),e},new c["default"]);return g.isRelative(n.url)?void 0:n}function i(){h.reset(),p.reset()}function a(e){n(e)}var s=void 0,l=this.context,f=(0,m["default"])(l).getInstance(),g=(0,d["default"])(l).getInstance(),h=void 0,p=void 0;return s={reset:i,initialize:a,resolve:r},t(),s}Object.defineProperty(t,"__esModule",{value:!0});var a=n(121),o=r(a),s=n(147),u=r(s),l=n(30),d=r(l),f=n(54),c=r(f),g=n(1),h=r(g),p=n(3),m=r(p),v=n(2),_=r(v);i.__dashjs_factory_name="BaseURLController",t["default"]=h["default"].getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(e){return o.length&&e&&e.length?-1!==o.indexOf(e):!1}function n(e){-1===o.indexOf(e)&&(o.push(e),s.trigger(l,{entry:e}))}function r(e){e.error&&n(e.request.serviceLocation)}function i(){d&&s.on(d,r,this)}function a(){o=[]}var o=[],s=(0,u["default"])(this.context).getInstance(),l=e.updateEventName,d=e.loadFailedEventName;return i(),{add:n,contains:t,reset:a}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),s=n(3),u=r(s);i.__dashjs_factory_name="BlackListController",t["default"]=o["default"].getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){D=!1,E={},T={},S={},I=null,R=100,A=R/1e3,b=(0,o["default"])(m).getInstance()}function t(){null!==I&&D&&(clearInterval(I),I=null,D=!1)}function n(){v("Start Event Controller"),D||isNaN(R)||(D=!0,I=setInterval(s,R))}function r(e){if(E={},e)for(var t=0;t<e.length;t++){var n=e[t];E[n.id]=n,v("Add inline event with id "+n.id)}v("Added "+e.length+" inline events")}function i(e){for(var t=0;t<e.length;t++){var n=e[t];n.id in T?v("Repeated event with id "+n.id):(T[n.id]=n,v("Add inband event with id "+n.id))}}function a(){if(S)for(var e=b.getTime(),t=Object.keys(S),n=0;n<t.length;n++){var r=t[n],i=S[r];null!==i&&(i.duration+i.presentationTime)/i.eventStream.timescale<e&&(v("Remove Event "+r+" at time "+e),i=null,delete S[r])}}function s(){l(T),l(E),a()}function u(){var e=M.getValue(),t=e.url;e.hasOwnProperty("Location")&&(t=e.Location),v("Refresh manifest @ "+t),C.getManifestLoader().load(t)}function l(e){var t,n=b.getTime();if(e)for(var r=Object.keys(e),i=0;i<r.length;i++){var a=r[i],o=e[a];void 0!==o&&(t=o.presentationTime/o.eventStream.timescale,(0===t||n>=t&&t+A>n)&&(v("Start Event "+a+" at "+n),o.duration>0&&(S[a]=o),o.eventStream.schemeIdUri==h&&o.eventStream.value==p?u():_.trigger(o.eventStream.schemeIdUri,{event:o}),delete e[a]))}}function f(e){e&&(e.manifestModel&&(M=e.manifestModel),e.manifestUpdater&&(C=e.manifestUpdater))}function g(){t(),E=null,T=null,S=null,b=null}var h="urn:mpeg:dash:event:2012",p=1,m=this.context,v=(0,d["default"])(m).getInstance().log,_=(0,c["default"])(m).getInstance(),y=void 0,E=void 0,T=void 0,S=void 0,I=void 0,R=void 0,A=void 0,M=void 0,C=void 0,b=void 0,D=void 0;return y={initialize:e,addInlineEvents:r,addInbandEvents:i,clear:t,start:n,setConfig:f,reset:g}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),o=r(a),s=n(1),u=r(s),l=n(4),d=r(l),f=n(3),c=r(f);i.__dashjs_factory_name="EventController",t["default"]=u["default"].getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){y=[],v.on(m["default"].FRAGMENT_LOADING_COMPLETED,f,_)}function t(e){var t=null;return null!==e&&void 0!==e&&e.byteLength>0&&(t=new Uint8Array(e)),
t}function n(e){if(!e)return null;var t=s(e);return t||(t=(0,d["default"])(g).create({metricsModel:(0,c["default"])(g).getInstance()}),t.setScheduleController(e),y.push(t)),t}function r(e){var t=y.indexOf(e);t>-1&&y.splice(t,1)}function i(e){return e&&e.type&&e.type===o["default"].INIT_SEGMENT_TYPE}function a(){v.off(m["default"].FRAGMENT_LOADING_COMPLETED,f,this),y=[]}function s(e){for(var t=y.length,n=0;t>n;n++)if(y[n].getScheduleController()==e)return y[n];return null}function l(e,t,n){var r=new u["default"];return r.streamId=n,r.mediaInfo=t.mediaInfo,r.segmentType=t.type,r.start=t.startTime,r.duration=t.duration,r.end=r.start+r.duration,r.bytes=e,r.index=t.index,r.quality=t.quality,r}function f(e){var t=e.sender.getScheduleController();if(s(t)){var n=e.request,r=e.response,a=i(n),o=t.getStreamProcessor().getStreamInfo().id,u=void 0;if(!r)return void p("No "+n.mediaType+" bytes to push.");u=l(r,n,o),v.trigger(a?m["default"].INIT_FRAGMENT_LOADED:m["default"].MEDIA_FRAGMENT_LOADED,{chunk:u,fragmentModel:e.sender})}}var g=this.context,p=(0,E["default"])(g).getInstance().log,v=(0,h["default"])(g).getInstance(),_=void 0,y=void 0;return _={process:t,getModel:n,detachModel:r,isInitializationRequest:i,reset:a},e(),_}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),o=r(a),s=n(154),u=r(s),l=n(38),d=r(l),f=n(12),c=r(f),g=n(3),h=r(g),p=n(2),m=r(p),v=n(1),_=r(v),y=n(4),E=r(y);i.__dashjs_factory_name="FragmentController",t["default"]=_["default"].getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){pe=!0,me=!1,ve=null,_e=null,ye=!0,Ee=!1,Te=0,Ie=NaN}function n(e,t){de=e,Me=t,be=(0,O["default"])($).getInstance(),Re=(0,u["default"])($).getInstance(),Ae=(0,d["default"])($).getInstance(),Ce=Me.getFragmentController(),De=Me.getBufferController(),ce=Ce.getModel(this),ge=Me.isDynamic(),Ne=ue.getScheduleWhilePaused(),Oe=(0,h["default"])($).create({dashMetrics:(0,S["default"])($).getInstance(),metricsModel:(0,E["default"])($).getInstance(),textSourceBuffer:(0,_["default"])($).getInstance()}),we=(0,m["default"])($).create({adapter:(0,R["default"])($).getInstance(),sourceBufferController:(0,M["default"])($).getInstance(),virtualBuffer:(0,b["default"])($).getInstance(),textSourceBuffer:(0,_["default"])($).getInstance()}),oe.getIsTextTrack(de)&&te.on(L["default"].TIMED_TEXT_REQUESTED,k,this),te.on(L["default"].LIVE_EDGE_SEARCH_COMPLETED,H,this),te.on(L["default"].QUALITY_CHANGED,p,this),te.on(L["default"].DATA_UPDATE_STARTED,C,this),te.on(L["default"].DATA_UPDATE_COMPLETED,v,this),te.on(L["default"].FRAGMENT_LOADING_COMPLETED,I,this),te.on(L["default"].STREAM_COMPLETED,T,this),te.on(L["default"].STREAM_INITIALIZED,y,this),te.on(L["default"].BUFFER_LEVEL_STATE_CHANGED,P,this),te.on(L["default"].BUFFER_CLEARED,w,this),te.on(L["default"].BYTES_APPENDED,A,this),te.on(L["default"].INIT_REQUESTED,D,this),te.on(L["default"].QUOTA_EXCEEDED,x,this),te.on(L["default"].BUFFER_LEVEL_STATE_CHANGED,P,this),te.on(L["default"].PLAYBACK_STARTED,j,this),te.on(L["default"].PLAYBACK_SEEKING,K,this),te.on(L["default"].PLAYBACK_RATE_CHANGED,Y,this),te.on(L["default"].URL_RESOLUTION_FAILED,F,this)}function r(e,t){var n=0,r=null;ve&&ye===!1&&(r=_e.start,n=e.getTime()-r.getTime(),_e.duration=n,_e.stopreason=t,ve.trace.push(_e),ye=!0)}function i(){fe&&(U(),me=!1,pe?s(he.quality):f(),pe&&(pe=!1),ee("Schedule controller starting for "+de))}function a(){me||(me=!0,clearInterval(Se),ee("Schedule controller stopping for "+de))}function s(e){var t=ie.getInitRequest(Me,e);return null!==t&&ce.executeRequest(t),t}function l(e){var t,n,r,i=e.length,a=.1;for(r=0;i>r;r++)t=e[r],n=t.startTime+t.duration/2+a,t=ie.getFragmentRequestForTime(Me,he,n,{timeThreshold:0,ignoreIsFinished:!0}),t&&ce.executeRequest(t)}function f(){if(!(me||Re.isPaused()&&!Ne)){var e=Oe.execute(Me);if(!e||Ee||!oe.getIsTextTrack(de)&&De.getIsAppendingInProgress())g(1e3);else{Ee=!0;var t=function(){var e=we.execute(Me);e?ce.executeRequest(e):(Ee=!1,g(1e3))};Ae.getPlaybackQuality(Me,t)}}}function g(e){Se=setTimeout(f,e)}function p(e){if(de===e.mediaType&&Me.getStreamInfo().id===e.streamInfo.id){if(he=Me.getRepresentationInfoForQuality(e.newQuality),null===he||void 0===he)throw"Unexpected error! - currentRepresentationInfo is null or undefined";r(new Date,o["default"].Trace.REPRESENTATION_SWITCH_STOP_REASON),U()}}function v(e){e.error||(he=ie.convertDataToTrack(re.getValue(),e.currentRepresentation))}function y(e){e.error||(he=Me.getCurrentRepresentationInfo(),ge&&null===be.getLiveEdge()||(fe=!0),i())}function T(e){e.fragmentModel===ce&&(a(),ee("Stream is complete"))}function I(e){e.sender===ce&&(isNaN(e.request.index)||(Ee=!1),e.error&&e.serviceLocation&&!me&&l([e.request]))}function A(e){e.sender.getStreamProcessor()===Me&&f()}function C(e){e.sender.getStreamProcessor()===Me&&a()}function D(e){e.sender.getStreamProcessor()===Me&&s(e.requiredQuality)}function w(e){e.sender.getStreamProcessor()===Me&&(ce.removeExecutedRequestsBeforeTime(e.to),e.hasEnoughSpaceToAppend&&!De.getIsBufferingCompleted()&&i())}function P(e){e.sender.getStreamProcessor()!==Me||e.state!==c["default"].BUFFER_EMPTY||Re.isSeeking()||(ee("Stalling Buffer"),r(new Date,o["default"].Trace.REBUFFERING_REASON))}function x(e){e.sender.getStreamProcessor()===Me&&a()}function F(){ce.abortRequests(),a()}function U(){ve&&ye===!0&&he&&(ye=!1,_e=new o["default"].Trace,_e.representationid=he.id,_e.start=new Date,_e.mstart=1e3*Re.getTime(),_e.playbackspeed=Re.getPlaybackRate().toString())}function k(e){e.sender.getStreamProcessor()===Me&&s(e.index)}function j(){i()}function K(e){Ie=e.seekTime,pe||(Ee=!1),me&&i();var t=ne.getMetricsFor("stream"),n=ae.getCurrentManifestUpdate(t),r=he.DVRWindow?he.DVRWindow.end-Re.getTime():NaN;ne.updateManifestUpdateInfo(n,{latency:r})}function Y(e){_e&&(_e.playbackspeed=e.playbackRate.toString())}function H(e){if(!e.error){var t=e.liveEdge,n=he.mediaInfo.streamInfo.manifestInfo,r=t-Re.computeLiveDelay(he.fragmentDuration,n.DVRWindowSize/2),a=ne.getMetricsFor("stream"),o=ae.getCurrentManifestUpdate(a),s=Re.getLiveStartTime(),u=void 0,l=void 0;u=ie.getFragmentRequestForTime(Me,he,r,{ignoreIsFinished:!0}),l=u.startTime,Ie=l,(isNaN(s)||l>s)&&Re.setLiveStartTime(l),ne.updateManifestUpdateInfo(o,{currentTime:l,presentationStartTime:t,latency:t-l,clientTimeOffset:se.getClientTimeOffset()}),fe=!0,i()}}function G(){return Ie}function q(e){Ie=e}function V(){return ce}function z(e){Te=e}function W(){return Te}function Q(){return Me}function X(e){ve=e}function Z(e,t){r(e,t),ve=null}function J(){te.off(L["default"].LIVE_EDGE_SEARCH_COMPLETED,H,this),te.off(L["default"].DATA_UPDATE_STARTED,C,this),te.off(L["default"].DATA_UPDATE_COMPLETED,v,this),te.off(L["default"].BUFFER_LEVEL_STATE_CHANGED,P,this),te.off(L["default"].QUALITY_CHANGED,p,this),te.off(L["default"].FRAGMENT_LOADING_COMPLETED,I,this),te.off(L["default"].STREAM_COMPLETED,T,this),te.off(L["default"].STREAM_INITIALIZED,y,this),te.off(L["default"].QUOTA_EXCEEDED,x,this),te.off(L["default"].BYTES_APPENDED,A,this),te.off(L["default"].BUFFER_CLEARED,w,this),te.off(L["default"].INIT_REQUESTED,D,this),te.off(L["default"].PLAYBACK_RATE_CHANGED,Y,this),te.off(L["default"].PLAYBACK_SEEKING,K,this),te.off(L["default"].PLAYBACK_STARTED,j,this),te.off(L["default"].URL_RESOLUTION_FAILED,F,this),oe.getIsTextTrack(de)&&te.off(L["default"].TIMED_TEXT_REQUESTED,k,this),a(),Ce.detachModel(ce),Ee=!1,Te=0,Ie=NaN,Re=null,ve=null}var $=this.context,ee=(0,B["default"])($).getInstance().log,te=(0,N["default"])($).getInstance(),ne=e.metricsModel,re=e.manifestModel,ie=e.adapter,ae=e.dashMetrics,oe=e.dashManifestModel,se=e.timelineConverter,ue=e.mediaPlayerModel,le=void 0,de=void 0,fe=void 0,ce=void 0,ge=void 0,he=void 0,pe=void 0,me=void 0,ve=void 0,_e=void 0,ye=void 0,Ee=void 0,Te=void 0,Se=void 0,Ie=void 0,Re=void 0,Ae=void 0,Me=void 0,Ce=void 0,be=void 0,De=void 0,Oe=void 0,we=void 0,Ne=void 0;return le={initialize:n,getStreamProcessor:Q,getSeekTarget:G,setSeekTarget:q,getFragmentModel:V,setTimeToLoadDelay:z,getTimeToLoadDelay:W,replaceCanceledRequests:l,start:i,stop:a,reset:J,setPlayList:X,finalisePlayList:Z},t(),le}Object.defineProperty(t,"__esModule",{value:!0});var a=n(68),o=r(a),s=n(10),u=r(s),l=n(9),d=r(l),f=n(15),c=r(f),g=n(143),h=r(g),p=n(144),m=r(p),v=n(14),_=r(v),y=n(12),E=r(y),T=n(13),S=r(T),I=n(19),R=r(I),A=n(24),M=r(A),C=n(36),b=r(C),D=n(50),O=r(D),w=n(3),N=r(w),P=n(2),L=r(P),x=n(1),F=r(x),U=n(4),B=r(U);i.__dashjs_factory_name="ScheduleController",t["default"]=F["default"].getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){_=!1,y=null,E=null,T=null,S=null,I=null,h.on(u["default"].DATA_UPDATE_COMPLETED,f,this),h.on(u["default"].INIT_FRAGMENT_LOADED,c,this)}function n(e,t,n){T=e,s(t),S=n,I=S.getRepresentationController()}function r(e){try{E=p.createSourceBuffer(y,e),_||(E.hasOwnProperty("initialize")&&E.initialize(T,this),_=!0)}catch(t){m.mediaSourceError("Error creating "+T+" source buffer.")}return E}function i(){return E}function a(e){E=e}function s(e){y=e}function l(){return S}function d(e){h.off(u["default"].DATA_UPDATE_COMPLETED,f,this),h.off(u["default"].INIT_FRAGMENT_LOADED,c,this),e||(p.abort(y,E),p.removeSourceBuffer(y,E))}function f(e){e.sender.getStreamProcessor()===S&&h.trigger(u["default"].TIMED_TEXT_REQUESTED,{index:0,sender:e.sender})}function c(e){e.fragmentModel===S.getFragmentModel()&&e.chunk.bytes&&p.append(E,e.chunk)}var g=this.context,h=(0,o["default"])(g).getInstance(),p=e.sourceBufferController,m=e.errHandler,v=void 0,_=void 0,y=void 0,E=void 0,T=void 0,S=void 0,I=void 0;return v={initialize:n,createBuffer:r,getBuffer:i,setBuffer:a,getStreamProcessor:l,setMediaSource:s,reset:d},t(),v}Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),o=r(a),s=n(2),u=r(s),l=n(1),d=r(l);i.__dashjs_factory_name="TextController",t["default"]=d["default"].getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e,t){P=t,O=0,w=!1,N=!1,L={"urn:mpeg:dash:utc:http-head:2014":T,"urn:mpeg:dash:utc:http-xsdate:2014":E.bind(null,c),"urn:mpeg:dash:utc:http-iso:2014":E.bind(null,g),"urn:mpeg:dash:utc:direct:2014":y,"urn:mpeg:dash:utc:http-head:2012":T,"urn:mpeg:dash:utc:http-xsdate:2012":E.bind(null,c),"urn:mpeg:dash:utc:http-iso:2012":E.bind(null,g),"urn:mpeg:dash:utc:direct:2012":y,"urn:mpeg:dash:utc:http-ntp:2014":_,"urn:mpeg:dash:utc:ntp:2014":_,"urn:mpeg:dash:utc:sntp:2014":_},i()||(R(e),a(!0))}function t(e){e&&(e.metricsModel&&(x=e.metricsModel),e.dashMetrics&&(F=e.dashMetrics))}function n(){return l()}function r(e){w=e}function i(){return w}function a(e){N=e}function s(e){O=e}function l(){return O}function f(e){var t,n,r=60,i=60,a=1e3,o=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/,s=o.exec(e);return t=Date.UTC(parseInt(s[1],10),parseInt(s[2],10)-1,parseInt(s[3],10),parseInt(s[4],10),parseInt(s[5],10),s[6]&&(parseInt(s[6],10)||0),s[7]&&parseFloat(s[7])*a||0),s[9]&&s[10]&&(n=parseInt(s[9],10)*i+parseInt(s[10],10),t+=("+"===s[8]?-1:1)*n*r*a),new Date(t).getTime()}function c(e){var t=Date.parse(e);return isNaN(t)&&(t=f(e)),t}function g(e){return Date.parse(e)}function v(e){return Date.parse(e)}function _(e,t,n){n()}function y(e,t,n){var r=c(e);return isNaN(r)?void n():void t(r)}function E(e,t,n,r,i){var a,o,s=!1,u=new XMLHttpRequest,l=i?"HEAD":"GET",d=t.match(/\S+/g);t=d.shift(),a=function(){s||(s=!0,d.length?E(e,d.join(" "),n,r,i):r())},o=function(){var t,r;200===u.status&&(t=i?u.getResponseHeader("Date"):u.response,r=e(t),isNaN(r)||(n(r),s=!0))},u.open(l,t),u.timeout=m||0,u.onload=o,u.onloadend=a,u.send()}function T(e,t,n){E(v,e,t,n,!0)}function S(){var e=x.getReadOnlyMetricsFor("stream"),t=F.getLatestMPDRequestHeaderValueByID(e,"Date"),n=null!==t?new Date(t).getTime():Number.NaN;isNaN(n)?I(!0):(s(n-(new Date).getTime()),I(!1,n/1e3,O))}function I(e,t,n){r(!1),b.trigger(d["default"].TIME_SYNCHRONIZATION_COMPLETED,{time:t,offset:n,error:e?new o["default"](p):null})}function R(e,t){var n=t||0,i=e[n],a=function(e,t){var n=!e||!t;n&&P?S():I(n,e,t)};r(!0),i?L.hasOwnProperty(i.schemeIdUri)?L[i.schemeIdUri](i.value,function(e){var t=(new Date).getTime(),n=e-t;s(n),C("Local time:      "+new Date(t)),C("Server time:     "+new Date(e)),C("Difference (ms): "+n),a(e,n)},function(){R(e,n+1)}):R(e,n+1):(s(0),a())}function A(){a(!1),r(!1)}var M=this.context,C=(0,h["default"])(M).getInstance().log,b=(0,u["default"])(M).getInstance(),D=void 0,O=void 0,w=void 0,N=void 0,P=void 0,L=void 0,x=void 0,F=void 0;return D={initialize:e,getOffsetToDeviceTimeMs:n,setConfig:t,reset:A}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(8),o=r(a),s=n(3),u=r(s),l=n(2),d=r(l),f=n(1),c=r(f),g=n(4),h=r(g),p=1,m=5e3;i.__dashjs_factory_name="TimeSyncController";var v=c["default"].getSingletonFactory(i);v.TIME_SYNC_FAILED_ERROR_CODE=p,v.HTTP_TIMEOUT_MS=m,t["default"]=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){A.on(d["default"].XLINK_ELEMENT_LOADED,l,M),w=(0,o["default"])(R).create({errHandler:e.errHandler,metricsModel:e.metricsModel,requestModifier:e.requestModifier})}function n(e){C=e}function r(e){b=e}function i(e){var t;O=new h["default"](C,"",!0),D=e,t=c(D.Period_asArray,D,v,p),s(t,v,p)}function a(){A.off(d["default"].XLINK_ELEMENT_LOADED,l,M),w&&(w.reset(),w=null)}function s(e,t,n){var r,i,a,o={};for(o.elements=e,o.type=t,o.resolveType=n,0===o.elements.length&&f(o),a=0;a<o.elements.length;a++)r=o.elements[a],i=-1!==r.url.indexOf("http://")?r.url:r.originalContent.BaseURL+r.url,w.load(i,r,o)}function l(e){var t,n,r,i="<response>",a="</response>",o="";t=e.element,n=e.resolveObject,t.resolvedContent&&(r=t.resolvedContent.indexOf(">")+1,o=t.resolvedContent.substr(0,r)+i+t.resolvedContent.substr(r)+a,t.resolvedContent=O.xml_str2json(o)),S(n)&&f(n)}function f(e){var t,n,r=[];if(g(e),e.resolveType===m&&A.trigger(d["default"].XLINK_READY,{manifest:D}),e.resolveType===p)switch(e.type){case v:for(t=0;t<D[v+"_asArray"].length;t++)n=D[v+"_asArray"][t],n.hasOwnProperty(_+"_asArray")&&(r=r.concat(c(n[_+"_asArray"],n,_,p))),n.hasOwnProperty(y+"_asArray")&&(r=r.concat(c(n[y+"_asArray"],n,y,p)));s(r,_,p);break;case _:A.trigger(d["default"].XLINK_READY,{manifest:D})}}function c(e,t,n,r){var i,a,o,s=[];for(a=e.length-1;a>=0;a--)i=e[a],i.hasOwnProperty("xlink:href")&&i["xlink:href"]===E&&e.splice(a,1);for(a=0;a<e.length;a++)i=e[a],i.hasOwnProperty("xlink:href")&&i.hasOwnProperty("xlink:actuate")&&i["xlink:actuate"]===r&&(o=T(i["xlink:href"],t,n,a,r,i),s.push(o));return s}function g(e){var t,n,r,i,a,o,s=[];for(i=e.elements.length-1;i>=0;i--){if(t=e.elements[i],n=t.type+"_asArray",!t.resolvedContent||I())delete t.originalContent["xlink:actuate"],delete t.originalContent["xlink:href"],s.push(t.originalContent);else if(t.resolvedContent)for(a=0;a<t.resolvedContent[n].length;a++)r=t.resolvedContent[n][a],s.push(r);for(t.parentElement[n].splice(t.index,1),o=0;o<s.length;o++)t.parentElement[n].splice(t.index+o,0,s[o]);s=[]}e.elements.length>0&&b.run(D)}function T(e,t,n,r,i,a){return{url:e,parentElement:t,type:n,index:r,resolveType:i,originalContent:a,resolvedContent:null,resolved:!1}}function S(e){var t,n;for(t=0;t<e.elements.length;t++)if(n=e.elements[t],n.resolved===!1)return!1;return!0}function I(){return!1}var R=this.context,A=(0,u["default"])(R).getInstance(),M=void 0,C=void 0,b=void 0,D=void 0,O=void 0,w=void 0;return M={resolveManifestOnLoad:i,setMatchers:n,setIron:r,reset:a},t(),M}Object.defineProperty(t,"__esModule",{value:!0});var a=n(93),o=r(a),s=n(3),u=r(s),l=n(2),d=r(l),f=n(1),c=r(f),g=n(33),h=r(g),p="onLoad",m="onActuate",v="Period",_="AdaptationSet",y="EventStream",E="urn:mpeg:dash:resolve-to-zero:2013";i.__dashjs_factory_name="XlinkController",t["default"]=c["default"].getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e){return a=(0,o["default"])(r).getInstance({eventBus:e.eventBus,metricsModel:e.metricsModel}),(0,d["default"])(r).create(e)}function t(){return(0,h["default"])(r).getInstance()}function n(){return(0,c["default"])(r).getInstance()}var r=this.context,i=void 0,a=void 0;return i={createMetricsReporting:e,getReportingFactory:t,getMetricsHandlerFactory:n}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(113),o=r(a),s=n(26),u=r(s),l=n(103),d=r(l),f=n(60),c=r(f),g=n(61),h=r(g),p=n(1),m=r(p);i.__dashjs_factory_name="MetricsReporting";var v=m["default"].getClassFactory(i);v.events=u["default"],t["default"]=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(t){if(!t.error){var n=Object.keys(i),r=(0,u["default"])(a).getInstance({dashManifestModel:e.dashManifestModel}).getMetrics(t.manifest);r.forEach(function(t){var r=JSON.stringify(t);if(i.hasOwnProperty(r))n.splice(r,1);else try{var s=(0,o["default"])(a).create(e);s.initialize(t),i[r]=s}catch(u){}}),n.forEach(function(e){i[e].reset(),delete i[e]}),s.trigger(c["default"].METRICS_INITIALISATION_COMPLETE)}}function n(){Object.keys(i).forEach(function(e){i[e].reset()}),i={}}function r(){s.on(h["default"].MANIFEST_UPDATED,t),s.on(h["default"].STREAM_TEARDOWN_COMPLETE,n)}var i={},a=this.context,s=e.eventBus;return r(),{}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(104),o=r(a),s=n(114),u=r(s),l=n(1),d=r(l),f=n(26),c=r(f),g=n(2),h=r(g);i.__dashjs_factory_name="MetricsCollectionController",t["default"]=d["default"].getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(t){try{a=(0,u["default"])(s).create({mediaElement:e.mediaElement}),a.initialize(t.Range),i=(0,d["default"])(s).create({log:e.log}),i.initialize(t.Reporting,a),r=(0,c["default"])(s).create({log:e.log,eventBus:e.eventBus}),r.initialize(t.metrics,i)}catch(o){throw n(),o}}function n(){r&&r.reset(),i&&i.reset(),a&&a.reset()}var r=void 0,i=void 0,a=void 0,o=void 0,s=this.context;return o={initialize:t,reset:n}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),s=n(106),u=r(s),l=n(107),d=r(l),f=n(105),c=r(f);i.__dashjs_factory_name="MetricsController",t["default"]=o["default"].getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(e){i.forEach(function(t){t.handleNewMetric(e.metric,e.value,e.mediaType)})}function n(e,n){e.split(",").forEach(function(e,t,r){var a;if(-1!==e.indexOf("(")&&-1===e.indexOf(")")){var o=r[t+1];o&&-1===o.indexOf("(")&&-1!==o.indexOf(")")&&(e+=","+o,delete r[t+1])}a=l.create(e,n),a&&i.push(a)}),u.on(d["default"].METRIC_ADDED,t,a),u.on(d["default"].METRIC_UPDATED,t,a)}function r(){u.off(d["default"].METRIC_ADDED,t,a),u.off(d["default"].METRIC_UPDATED,t,a),i.forEach(function(e){return e.reset()}),i=[]}var i=[],a=void 0,s=this.context,u=e.eventBus,l=(0,o["default"])(s).getInstance({log:e.log,eventBus:e.eventBus});return a={initialize:n,reset:r}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(60),o=r(a),s=n(1),u=r(s),l=n(34),d=r(l);i.__dashjs_factory_name="MetricsHandlersController",t["default"]=u["default"].getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(e){e&&e.length&&(e.forEach(function(e){var t=e.starttime,n=t+e.duration;l.add(t,n)}),a=!!e[0]._useWallClockTime)}function n(){l.clear()}function r(){l=(0,u["default"])(o).create()}function i(){var e,t=l.length;if(!t)return!0;e=a?(new Date).getTime()/1e3:d.currentTime;for(var n=0;t>n;n+=1){var r=l.start(n),i=l.end(n);if(e>=r&&i>e)return!0}return!1}var a=!1,o=this.context,s=void 0,l=void 0,d=e.mediaElement;return s={initialize:t,reset:n,isEnabled:i},r(),s}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),s=n(29),u=r(s);i.__dashjs_factory_name="RangeController",t["default"]=o["default"].getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(e,t){e.some(function(e){var n=o.create(e,t);return n?(i.push(n),!0):void 0})}function n(){i.forEach(function(e){return e.reset()}),i=[]}function r(e,t){i.forEach(function(n){return n.report(e,t)})}var i=[],a=void 0,o=(0,u["default"])(this.context).getInstance({log:e.log});return a={initialize:t,reset:n,report:r}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),s=n(61),u=r(s);i.__dashjs_factory_name="ReportingController",t["default"]=o["default"].getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){try{return Object.keys(h).map(function(e){return h[e]}).reduce(function(e,t){return e.level<t.level?e:t})}catch(e){return}}function t(){var t=e();t&&f!==t.t&&(f=t.t,o.report(l,t))}function n(e,n,r){n&&(s=g.validateN(r),o=n,l=g.reconstructFullMetricName(e,r),d=setInterval(t,s))}function r(){clearInterval(d),d=null,s=0,o=null,f=null}function i(e,t,n){"BufferLevel"===e&&(h[n]=t)}var a=void 0,o=void 0,s=void 0,l=void 0,d=void 0,f=void 0,c=this.context,g=(0,u["default"])(c).getInstance(),h=[];return a={initialize:n,reset:r,handleNewMetric:i}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),s=n(62),u=r(s);i.__dashjs_factory_name="BufferLevelHandler",t["default"]=o["default"].getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){s.off(u["default"].METRICS_INITIALISATION_COMPLETE,t,this),s.trigger(u["default"].BECAME_REPORTING_PLAYER)}function n(e,n){n&&(o=n,s.on(u["default"].METRICS_INITIALISATION_COMPLETE,t,this))}function r(){o=null}function i(e,t){"DVBErrors"===e&&o&&o.report(e,t)}var a=void 0,o=void 0,s=e.eventBus;return a={initialize:n,reset:r,handleNewMetric:i}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),s=n(26),u=r(s);t["default"]=o["default"].getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e,t){i=e,a=t}function t(){a=null,i=void 0}function n(e,t){e===i&&a&&a.report(i,t)}var r=void 0,i=void 0,a=void 0;return r={initialize:e,reset:t,handleNewMetric:n}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a);i.__dashjs_factory_name="GenericMetricHandler",t["default"]=o["default"].getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){var e=f;e.length&&a&&a.report(l,e),f=[]}function t(t,n,r,i){n&&(o=c.validateN(r),a=n,i&&i.length&&(s=i),l=c.reconstructFullMetricName(t,r,i),d=setInterval(e,o))}function n(){clearInterval(d),d=null,o=null,s=null,f=[],a=null}function r(e,t){"HttpList"===e&&(s&&s!==t.type||f.push(t))}var i=void 0,a=void 0,o=void 0,s=void 0,l=void 0,d=void 0,f=[],c=(0,u["default"])(this.context).getInstance();return i={initialize:t,reset:n,handleNewMetric:r}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),s=n(62),u=r(s);i.__dashjs_factory_name="HttpListHandler",t["default"]=o["default"].getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e,t,n){var r=new XMLHttpRequest,i=function(){var e=m.indexOf(r);-1!==e&&(m.splice(e,1),r.status>=200&&r.status<300?t&&t():n&&n())};m.push(r);try{r.open("GET",e),r.onloadend=i,r.onerror=i,r.send()}catch(a){r.onerror()}}function t(t,n){Array.isArray(n)||(n=[n]),f&&h.isEnabled()&&n.forEach(function(n){var r=o.serialise(n);l&&"DVBErrors"!==t&&(r="metricname="+t+"&"+r),r=g+"?"+r,e(r,null,function(){f=!1})})}function n(e,t){var n;if(h=t,g=e["dvb:reportingUrl"],!g)throw new Error("required parameter missing (dvb:reportingUrl)");c||(n=e["dvb:probability"]||e["dvb:priority"]||0,n&&(1e3===n||n/1e3>=s.random())&&(f=!0),c=!0)}function r(){p||(m.forEach(function(e){return e.abort()}),m=[]),c=!1,f=!1,g=null,h=null}var i=void 0,a=this.context,o=(0,u["default"])(a).getInstance(),s=(0,d["default"])(a).getInstance(),l=!0,f=!1,c=!1,g=null,h=null,p=!0,m=[];return i={report:t,initialize:n,reset:r}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),s=n(115),u=r(s),l=n(116),d=r(l);i.__dashjs_factory_name="DVBReporting",t["default"]=o["default"].getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(e){var t=new o["default"];if(v){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.mpdurl||(t.mpdurl=v.originalUrl||v.url),t.terror||(t.terror=new Date),m.addDVBErrors(t)}}function n(e){e.error||(v=e.manifest)}function r(e){t({errorcode:o["default"].BASE_URL_CHANGED,servicelocation:e.entry})}function i(){t({errorcode:o["default"].BECAME_REPORTER})}function a(e){(0===e.responsecode||e.responsecode>=400||e.responsecode<100||e.responsecode>=600)&&t({errorcode:e.responsecode||o["default"].CONNECTION_ERROR,url:e.url,terror:e.tresponse,servicelocation:e._serviceLocation})}function s(e){switch(e.metric){case"HttpList":a(e.value)}}function l(e){var n,r=e.error?e.error.code:0;switch(r){case MediaError.MEDIA_ERR_NETWORK:n=o["default"].CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:n=o["default"].CORRUPT_MEDIA_OTHER;break;default:return}t({errorcode:n})}function f(){p.on(u["default"].MANIFEST_UPDATED,n,h),p.on(u["default"].SERVICE_LOCATION_BLACKLIST_CHANGED,r,h),p.on(d["default"].METRIC_ADDED,s,h),p.on(d["default"].METRIC_UPDATED,s,h),p.on(d["default"].PLAYBACK_ERROR,l,h),p.on(c["default"].BECAME_REPORTING_PLAYER,i,h)}function g(){p.off(u["default"].MANIFEST_UPDATED,n,h),p.off(u["default"].SERVICE_LOCATION_BLACKLIST_CHANGED,r,h),p.off(d["default"].METRIC_ADDED,s,h),p.off(d["default"].METRIC_UPDATED,s,h),p.off(d["default"].PLAYBACK_ERROR,l,h),p.off(c["default"].BECAME_REPORTING_PLAYER,i,h)}var h=void 0,p=e.eventBus,m=e.metricsModel,v=void 0;return h={initialise:f,reset:g},f(),h}Object.defineProperty(t,"__esModule",{value:!0});var a=n(117),o=r(a),s=n(2),u=r(s),l=n(34),d=r(l),f=n(26),c=r(f),g=n(1),h=r(g);i.__dashjs_factory_name="DVBErrorsTranslator",t["default"]=h["default"].getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(e,t,n){var r,a,o=i.getMpd(e),s=0;return t?s=o.availabilityStartTime.getTime()/1e3:(r=this.getRegularPeriods(e,o),r.length&&(s=r[0].start)),a=s,n&&n.hasOwnProperty("starttime")&&(a+=n.starttime),a}function n(e){var n=[];return e.Metrics_asArray&&e.Metrics_asArray.forEach(function(r){var a=new o["default"],s=i.getIsDynamic(e);r.hasOwnProperty("metrics")&&(a.metrics=r.metrics,r.Range_asArray&&r.Range_asArray.forEach(function(n){var r=new u["default"];r.starttime=t(e,s,n),n.hasOwnProperty("duration")?r.duration=n.duration:r.duration=i.getDuration(e),r._useWallClockTime=s,a.Range.push(r)}),r.Reporting_asArray&&(r.Reporting_asArray.forEach(function(e){var t=new d["default"];if(e.hasOwnProperty("schemeIdUri")){t.schemeIdUri=e.schemeIdUri;for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);a.Reporting.push(t)}}),n.push(a)))}),n}var r=void 0,i=e.dashManifestModel;return r={getMetrics:n}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(118),o=r(a),s=n(119),u=r(s),l=n(120),d=r(l),f=n(1),c=r(f);i.__dashjs_factory_name="ManifestParsing",t["default"]=c["default"].getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(t){var n,r,i=[],a=[];for(n in t)if(t.hasOwnProperty(n)&&0!==n.indexOf("_")){if(r=t[n],void 0!==r&&null!==r||(r=""),Array.isArray(r)){if(!r.length)continue;a=[],r.forEach(function(t){var n="Object"!==Object.prototype.toString.call(t).slice(8,-1);a.push(n?t:e(t))}),r=encodeURIComponent(a.join(","))}else"string"==typeof r?r=encodeURIComponent(r):r instanceof Date?r=r.toISOString():"number"==typeof r&&(r=Math.round(r));i.push(n+"="+r)}return i.join("&")}return{serialise:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a);i.__dashjs_factory_name="MetricSerialiser",t["default"]=o["default"].getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){n&&(o||(o=new r(a)),n.getRandomValues(o),s=0)}function t(t,r){var a;return t||(t=0),r||(r=1),n?(s===o.length&&e(),a=o[s]/i,s+=1):a=Math.random(),a*(r-t)+t}var n=window.crypto||window.msCrypto,r=Uint32Array,i=Math.pow(2,8*r.BYTES_PER_ELEMENT)-1,a=10,o=void 0,s=void 0,u=void 0;return u={random:t},e(),u}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a);i.__dashjs_factory_name="RNG",t["default"]=o["default"].getSingletonFactory(i)},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function i(){n(this,i),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null};r.SSL_CONNECTION_FAILED_PREFIX="SSL",r.DNS_RESOLUTION_FAILED="C00",r.HOST_UNREACHABLE="C01",r.CONNECTION_REFUSED="C02",r.CONNECTION_ERROR="C03",r.CORRUPT_MEDIA_ISOBMFF="M00",r.CORRUPT_MEDIA_OTHER="M01",r.BASE_URL_CHANGED="F00",r.BECAME_REPORTER="S00",t["default"]=r},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function i(){n(this,i),this.metrics="",this.Range=[],this.Reporting=[]};t["default"]=r},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function i(){n(this,i),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1};t["default"]=r},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function i(){n(this,i),this.schemeIdUri="",this.value=""};t["default"]=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(){function e(){f=new g}function t(e,t,n){var r=p.getBaseURLsFromElement(n);e[t]?m.areSimpleEquivalent(r,e[t].data.baseUrls)||(e[t].data.baseUrls=r,e[t].data.selectedIdx=c):e[t]=new g(r)}function n(e){var n=p.getBaseURLsFromElement(e);m.areSimpleEquivalent(n,f.data.baseUrls)||(f.data.baseUrls=n,f.data.selectedIdx=c),e.Period_asArray&&e.Period_asArray.forEach(function(e,n){t(f.children,n,e),e.AdaptationSet_asArray&&e.AdaptationSet_asArray.forEach(function(e,r){t(f.children[n].children,r,e),e.Representation_asArray&&e.Representation_asArray.sort(p.getRepresentationSortFunction()).forEach(function(e,i){t(f.children[n].children[r].children,i,e)})})})}function r(e,t){var n=t||f;e(n.data),n.children&&n.children.forEach(function(t){return r(e,t)})}function i(e){r(function(t){isNaN(t.selectedIdx)||e===t.baseUrls[t.selectedIdx].serviceLocation&&(t.selectedIdx=c)})}function a(e){n(e)}function o(){f=new g}function u(e){var t=f,n=[t.data];return e.forEach(function(e){t=t.children[e],t&&n.push(t.data)}),n.filter(function(e){return e.baseUrls.length})}var d=void 0,f=void 0,h=this.context,p=(0,s["default"])(h).getInstance(),m=(0,l["default"])(h).getInstance();return d={reset:o,update:a,getForPath:u,invalidateSelectedIndexes:i},e(),d}Object.defineProperty(t,"__esModule",{value:!0});var o=n(11),s=r(o),u=n(150),l=r(u),d=n(1),f=r(d),c=NaN,g=function h(e,t){i(this,h),this.data={baseUrls:e||null,selectedIdx:t||c},this.children=[]};a.__dashjs_factory_name="BaseURLTreeModel",t["default"]=f["default"].getClassFactory(a)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(21),u=r(s),l=function(e){function t(){i(this,t);var e=a(this,Object.getPrototypeOf(t).call(this));return e.INTERNAL_KEY_MESSAGE="internalKeyMessage",e.INTERNAL_KEY_SYSTEM_SELECTED="internalKeySystemSelected",e.KEY_ADDED="public_keyAdded",e.KEY_ERROR="public_keyError",e.KEY_MESSAGE="public_keyMessage",e.KEY_SESSION_CLOSED="public_keySessionClosed",e.KEY_SESSION_CREATED="public_keySessionCreated",e.KEY_SESSION_REMOVED="public_keySessionRemoved",e.KEY_STATUSES_CHANGED="public_keyStatusesChanged",e.KEY_SYSTEM_ACCESS_COMPLETE="keySystemAccessComplete",e.KEY_SYSTEM_SELECTED="public_keySystemSelected",e.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",e.NEED_KEY="needkey",e.PROTECTION_CREATED="public_protectioncreated",e.PROTECTION_DESTROYED="public_protectiondestroyed",e.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",e.TEARDOWN_COMPLETE="protectionTeardownComplete",e.VIDEO_ELEMENT_SELECTED="videoElementSelected",e}return o(t,e),t}(u["default"]),d=new l;t["default"]=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){D=I.getKeySystems(),O=[],L=!1,x="temporary",l["default"].extend(v["default"].events)}function n(e,t,n){if(!L){var r;t||n||(r=A.getStreamsInfo(e)[0]),w=t||(r?A.getMediaInfoForType(e,r,"audio"):null),N=n||(r?A.getMediaInfoForType(e,r,"video"):null);var i=N?N:w,a=I.getSupportedKeySystemsFromContentProtection(i.contentProtection);a&&a.length>0&&y(a,!0),L=!0}}function r(e){var t=s["default"].getPSSHForKeySystem(F,e);if(t){for(var n=R.getAllInitData(),r=0;r<n.length;r++)if(I.initDataEquals(t,n[r]))return void C("DRM: Ignoring initData because we have already seen it!");try{R.createKeySession(t,x)}catch(i){M.trigger(l["default"].KEY_SESSION_CREATED,{data:null,error:"Error creating key session! "+i.message})}}else M.trigger(l["default"].KEY_SESSION_CREATED,{data:null,error:"Selected key system is "+F.systemString+".  needkey/encrypted event contains no initData corresponding to that key system!"})}function i(e){R.loadKeySession(e)}function o(e){R.removeKeySession(e)}function u(e){R.closeKeySession(e)}function d(e){R.setServerCertificate(e)}function c(e){e?(R.setMediaElement(e),M.on(l["default"].NEED_KEY,S,this),M.on(l["default"].INTERNAL_KEY_MESSAGE,T,this)):null===e&&(R.setMediaElement(e),M.off(l["default"].NEED_KEY,S,this),M.off(l["default"].INTERNAL_KEY_MESSAGE,T,this))}function h(e){x=e}function p(e){P=e}function m(){c(null),F=void 0,R&&(R.reset(),R=null)}function _(e){var t=null,n=e.systemString;return P&&(t=n in P?P[n]:null),t}function y(e,t){var n=this,i=[],a=[];N&&a.push(new f["default"](N.codec)),w&&i.push(new f["default"](w.codec));var o,s=new g["default"](i,a,"optional","temporary"===x?"optional":"required",[x]),u=[];if(F){for(o=0;o<e.length;o++)if(F===e[o].ks){var d=function(){u.push({ks:e[o].ks,configs:[s]});var i=function a(i){M.off(l["default"].KEY_SYSTEM_ACCESS_COMPLETE,a,n),i.error?t||M.trigger(l["default"].KEY_SYSTEM_SELECTED,{error:"DRM: KeySystem Access Denied! -- "+i.error}):(C("DRM: KeySystem Access Granted"),M.trigger(l["default"].KEY_SYSTEM_SELECTED,{data:i.data}),r(e[o].initData))};return M.on(l["default"].KEY_SYSTEM_ACCESS_COMPLETE,i,n),R.requestKeySystemAccess(u),"break"}();if("break"===d)break}}else if(void 0===F){F=null,O.push(e);for(var c=0;c<e.length;c++)u.push({ks:e[c].ks,configs:[s]});var h,p=function v(e){M.off(l["default"].KEY_SYSTEM_ACCESS_COMPLETE,v,n),e.error?(F=void 0,M.off(l["default"].INTERNAL_KEY_SYSTEM_SELECTED,m,n),t||M.trigger(l["default"].KEY_SYSTEM_SELECTED,{data:null,error:"DRM: KeySystem Access Denied! -- "+e.error})):(h=e.data,C("DRM: KeySystem Access Granted ("+h.keySystem.systemString+")!  Selecting key system..."),R.selectKeySystem(h))},m=function _(e){if(M.off(l["default"].INTERNAL_KEY_SYSTEM_SELECTED,_,n),M.off(l["default"].KEY_SYSTEM_ACCESS_COMPLETE,p,n),e.error)F=void 0,t||M.trigger(l["default"].KEY_SYSTEM_SELECTED,{data:null,error:"DRM: Error selecting key system! -- "+e.error});else{F=R.getKeySystem(),M.trigger(l["default"].KEY_SYSTEM_SELECTED,{data:h});for(var i=0;i<O.length;i++)for(o=0;o<O[i].length;o++)if(F===O[i][o].ks){r(O[i][o].initData);break}}};M.on(l["default"].INTERNAL_KEY_SYSTEM_SELECTED,m,n),M.on(l["default"].KEY_SYSTEM_ACCESS_COMPLETE,p,n),R.requestKeySystemAccess(u)}else O.push(e)}function E(e,t){M.trigger(l["default"].LICENSE_REQUEST_COMPLETE,{data:e,error:t})}function T(e){if(C("DRM: onKeyMessage"),e.error)return void C(e.error);var t=e.data;M.trigger(l["default"].KEY_MESSAGE,{data:t});var n=t.messageType?t.messageType:"license-request",r=t.message,i=t.sessionToken,o=_(F),u=F.systemString,d=I.getLicenseServer(F,o,n),f={sessionToken:i,messageType:n};if(!d)return C("DRM: License server request not required for this message (type = "+e.data.messageType+").  Session ID = "+i.getSessionID()),void E(f);if(I.isClearKey(F)){var c=I.processClearKeyLicenseRequest(o,r);if(c)return C("DRM: ClearKey license request handled by application!"),E(f),void R.updateKeySession(i,c)}var g=new XMLHttpRequest,h=null;if(o)if(o.serverURL){var p=o.serverURL;"string"==typeof p&&""!==p?h=p:"object"===("undefined"==typeof p?"undefined":a(p))&&p.hasOwnProperty(n)&&(h=p[n])}else o.laURL&&""!==o.laURL&&(h=o.laURL);else h=F.getLicenseServerURLFromInitData(s["default"].getPSSHData(i.initData)),h||(h=e.data.laURL);if(h=d.getServerURLFromMessage(h,r,n),!h)return void E(f,"DRM: No license server URL specified!");g.open(d.getHTTPMethod(n),h,!0),g.responseType=d.getResponseType(u,n),g.onload=function(){200==this.status?(E(f),R.updateKeySession(i,d.getLicenseMessage(this.response,u,n))):E(f,"DRM: "+u+' update, XHR status is "'+this.statusText+'" ('+this.status+"), expected to be 200. readyState is "+this.readyState+".  Response is "+(this.response?d.getErrorResponse(this.response,u,n):"NONE"))},g.onabort=function(){E(f,"DRM: "+u+' update, XHR aborted. status is "'+this.statusText+'" ('+this.status+"), readyState is "+this.readyState)},g.onerror=function(){E(f,"DRM: "+u+' update, XHR error. status is "'+this.statusText+'" ('+this.status+"), readyState is "+this.readyState)};var m=function(e){var t;if(e)for(t in e)"authorization"===t.toLowerCase()&&(g.withCredentials=!0),g.setRequestHeader(t,e[t])};o&&m(o.httpRequestHeaders),m(F.getRequestHeadersFromMessage(r)),o&&o.withCredentials&&(g.withCredentials=!0),g.send(F.getLicenseRequestFromMessage(r))}function S(e){if(C("DRM: onNeedKey"),"cenc"!==e.key.initDataType)return void C("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+e.key.initDataType);var t=e.key.initData;ArrayBuffer.isView(t)&&(t=t.buffer),C("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(t)));var n=I.getSupportedKeySystems(t);return 0===n.length?void C("DRM: Received needkey event with initData, but we don't support any of the key systems!"):void y(n,!1)}var I=e.protectionKeyController,R=e.protectionModel,A=e.adapter,M=e.eventBus,C=e.log,b=void 0,D=void 0,O=void 0,w=void 0,N=void 0,P=void 0,L=void 0,x=void 0,F=void 0;return b={initialize:n,createKeySession:r,loadKeySession:i,removeKeySession:o,closeKeySession:u,setServerCertificate:d,setMediaElement:c,setSessionType:h,setProtectionData:p,reset:m},t(),b}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},o=n(20),s=r(o),u=n(2),l=r(u),d=n(134),f=r(d),c=n(43),g=r(c),h=n(1),p=r(h),m=n(63),v=r(m);i.__dashjs_factory_name="ProtectionController",t["default"]=p["default"].getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e,t){var n=null;if(e){for(var r=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),i=[],a=0;a<r.kids.length;a++){var s=r.kids[a],l=e.clearkeys.hasOwnProperty(s)?e.clearkeys[s]:null;if(!l)throw new Error("DRM: ClearKey keyID ("+s+") is not known!");i.push(new o["default"](s,l))}n=new u["default"](i)}return n}function t(e){return d["default"].parseInitDataFromContentProtection(e)}function n(){return null}function r(e){return new Uint8Array(e)}function i(){return null}var a=void 0;return a={uuid:g,schemeIdURI:p,systemString:h,getInitData:t,getRequestHeadersFromMessage:n,getLicenseRequestFromMessage:r,getLicenseServerURLFromInitData:i,getClearKeysFromProtectionData:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(65),o=r(a),s=n(64),u=r(s),l=n(20),d=r(l),f=n(1),c=r(f),g="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",h="org.w3.clearkey",p="urn:uuid:"+g;i.__dashjs_factory_name="KeySystemClearKey",t["default"]=c["default"].getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e){var t,n,r={},i=new DOMParser,a="utf16"===s?new Uint16Array(e):new Uint8Array(e);t=String.fromCharCode.apply(null,a),n=i.parseFromString(t,"application/xml");for(var o=n.getElementsByTagName("name"),u=n.getElementsByTagName("value"),l=0;l<o.length;l++)r[o[l].childNodes[0].nodeValue]=u[l].childNodes[0].nodeValue;return r.hasOwnProperty("Content")&&(r["Content-Type"]=r.Content,delete r.Content),r}function t(e){var t,n,r=null,i=new DOMParser,a="utf16"===s?new Uint16Array(e):new Uint8Array(e);if(t=String.fromCharCode.apply(null,a),n=i.parseFromString(t,"application/xml"),n.getElementsByTagName("Challenge")[0]){var o=n.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;o&&(r=c["default"].decode(o))}return r}function n(e){if(e)for(var t=new DataView(e),n=t.getUint16(4,!0),r=6,i=new DOMParser,a=0;n>a;a++){var o=t.getUint16(r,!0);r+=2;var s=t.getUint16(r,!0);if(r+=2,1===o){var u=e.slice(r,r+s),l=String.fromCharCode.apply(null,new Uint16Array(u)),d=i.parseFromString(l,"application/xml");if(d.getElementsByTagName("LA_URL")[0]){var f=d.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(f)return f}if(d.getElementsByTagName("LUI_URL")[0]){var c=d.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(c)return c}}else r+=s}return null}function r(e){var t,n,r,i,a,s=new Uint8Array([112,115,115,104,0,0,0,0]),u=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),l=0,d=null;if("pssh"in e)return o["default"].parseInitDataFromContentProtection(e);if("pro"in e)d=c["default"].decodeArray(e.pro.__text);else{if(!("prheader"in e))return null;d=c["default"].decodeArray(e.prheader.__text)}return t=d.length,n=4+s.length+u.length+4+t,r=new ArrayBuffer(n),i=new Uint8Array(r),a=new DataView(r),a.setUint32(l,n),l+=4,i.set(s,l),l+=s.length,i.set(u,l),l+=u.length,a.setUint32(l,t),l+=4,i.set(d,l),l+=t,i.buffer}function i(e){if("utf8"!==e&&"utf16"!==e)throw new u["default"]("Illegal PlayReady message format! -- "+e);s=e}var a=void 0,s="utf16";return a={uuid:g,schemeIdURI:p,systemString:h,getInitData:r,getRequestHeadersFromMessage:e,getLicenseRequestFromMessage:t,getLicenseServerURLFromInitData:n,setPlayReadyMessageFormat:i}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(20),o=r(a),s=n(8),u=r(s),l=n(1),d=r(l),f=n(32),c=r(f),g="9a04f079-9840-4286-ab92-e65be0885f95",h="com.microsoft.playready",p="urn:uuid:"+g;i.__dashjs_factory_name="KeySystemPlayReady",t["default"]=d["default"].getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e){return o["default"].parseInitDataFromContentProtection(e)}function t(){return null}function n(e){return new Uint8Array(e)}function r(){return null}var i=void 0;return i={uuid:l,schemeIdURI:f,systemString:d,getInitData:e,getRequestHeadersFromMessage:t,getLicenseRequestFromMessage:n,getLicenseServerURLFromInitData:r}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(20),o=r(a),s=n(1),u=r(s),l="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",d="com.widevine.alpha",f="urn:uuid:"+l;i.__dashjs_factory_name="KeySystemWidevine",t["default"]=u["default"].getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){O=null,w=null,L=[],x=[],N=(0,o["default"])(A).getInstance(),P=(0,E["default"])(A).getInstance(),U=S()}function n(){O&&R();for(var e=0;e<x.length;e++)p(x[e]);M.trigger(_["default"].TEARDOWN_COMPLETE)}function r(){return w}function i(){for(var e=[],t=0;t<L.length;t++)e.push(L[t].initData);for(var n=0;n<x.length;n++)e.push(x[n].initData);return e}function a(e){var t=O;t||(t=document.createElement("video"));for(var n=!1,r=0;r<e.length;r++)for(var i=e[r].ks.systemString,a=e[r].configs,o=null,s=null,u=0;u<a.length;u++){var l=a[u].videoCapabilities;if(l&&0!==l.length){s=[];for(var d=0;d<l.length;d++)""!==t.canPlayType(l[d].contentType,i)&&s.push(l[d])}if(!(!o&&!s||o&&0===o.length||s&&0===s.length)){n=!0;var f=new h["default"](o,s),c=N.getKeySystemBySystemString(i);M.trigger(_["default"].KEY_SYSTEM_ACCESS_COMPLETE,{data:new m["default"](c,f)});break}}n||M.trigger(_["default"].KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"})}function s(e){w=e.keySystem,M.trigger(_["default"].INTERNAL_KEY_SYSTEM_SELECTED)}function l(e){O!==e&&(O&&R(),O=e,O&&(O.addEventListener(b.keyerror,U),O.addEventListener(b.needkey,U),O.addEventListener(b.keymessage,U),O.addEventListener(b.keyadded,U),M.trigger(_["default"].VIDEO_ELEMENT_SELECTED)))}function f(e){if(!w)throw new Error("Can not create sessions until you have selected a key system");if(F||0===x.length){var t={sessionID:null,initData:e,getSessionID:function(){return this.sessionID},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return L.push(t),O[b.generateKeyRequest](w.systemString,new Uint8Array(e)),t}throw new Error("Multiple sessions not allowed!")}function g(e,t){var n=e.sessionID;if(N.isClearKey(w))for(var r=0;r<t.keyPairs.length;r++)O[b.addKey](w.systemString,t.keyPairs[r].key,t.keyPairs[r].keyID,n);else O[b.addKey](w.systemString,new Uint8Array(t),e.initData,n)}function p(e){O[b.cancelKeyRequest](w.systemString,e.sessionID)}function v(){}function y(){}function T(){}function S(){return{handleEvent:function(e){var t=null;switch(e.type){case b.needkey:var n=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;M.trigger(_["default"].NEED_KEY,{key:new u["default"](n,"cenc")});break;case b.keyerror:if(t=I(x,e.sessionId),t||(t=I(L,e.sessionId)),t){var r="";switch(e.errorCode.code){case 1:r+="MEDIA_KEYERR_UNKNOWN - An unspecified error occurred. This value is used for errors that don't match any of the other codes.";break;case 2:r+="MEDIA_KEYERR_CLIENT - The Key System could not be installed or updated.";break;case 3:r+="MEDIA_KEYERR_SERVICE - The message passed into update indicated an error from the license service.";break;case 4:r+="MEDIA_KEYERR_OUTPUT - There is no available output device with the required characteristics for the content protection system.";break;case 5:r+="MEDIA_KEYERR_HARDWARECHANGE - A hardware configuration change caused a content protection error.";break;case 6:r+="MEDIA_KEYERR_DOMAIN - An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain."}r+="  System Code = "+e.systemCode,M.trigger(_["default"].KEY_ERROR,{data:new d["default"](t,r)})}else C("No session token found for key error");break;case b.keyadded:t=I(x,e.sessionId),t||(t=I(L,e.sessionId)),t?(C("DRM: Key added."),M.trigger(_["default"].KEY_ADDED,{data:t})):C("No session token found for key added");break;case b.keymessage:if(F=null!==e.sessionId&&void 0!==e.sessionId,F?(t=I(x,e.sessionId),!t&&L.length>0&&(t=L.shift(),x.push(t),t.sessionID=e.sessionId)):L.length>0&&(t=L.shift(),x.push(t),0!==L.length&&P.mediaKeyMessageError("Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!")),t){var i=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;t.keyMessage=i,M.trigger(_["default"].INTERNAL_KEY_MESSAGE,{data:new c["default"](t,i,e.defaultURL)})}else C("No session token found for key message")}}}}function I(e,t){if(t&&e){for(var n=e.length,r=0;n>r;r++)if(e[r].sessionID==t)return e[r];return null}return null}function R(){O.removeEventListener(b.keyerror,U),O.removeEventListener(b.needkey,U),O.removeEventListener(b.keymessage,U),O.removeEventListener(b.keyadded,U)}var A=this.context,M=e.eventBus,C=e.log,b=e.api,D=void 0,O=void 0,w=void 0,N=void 0,P=void 0,L=void 0,x=void 0,F=void 0,U=void 0;return D={getAllInitData:i,requestKeySystemAccess:a,getKeySystem:r,selectKeySystem:s,setMediaElement:l,createKeySession:f,updateKeySession:g,closeKeySession:p,setServerCertificate:v,loadKeySession:y,removeKeySession:T,reset:n},t(),D}Object.defineProperty(t,"__esModule",{value:!0});var a=n(28),o=r(a),s=n(44),u=r(s),l=n(40),d=r(l),f=n(41),c=r(f),g=n(43),h=r(g),p=n(42),m=r(p),v=n(2),_=r(v),y=n(18),E=r(y),T=n(1),S=r(T);i.__dashjs_factory_name="ProtectionModel_01b",t["default"]=S["default"].getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){M=null,C=null,b=null,D=[],w=(0,o["default"])(N).getInstance(),O=S()}function n(){var e,t=D.length;if(0!==t)for(var n=function(e){I(e),0===D.length&&(C?(C.removeEventListener("encrypted",O),C.setMediaKeys(null).then(function(){P.trigger(m["default"].TEARDOWN_COMPLETE)})):P.trigger(m["default"].TEARDOWN_COMPLETE))},r=0;t>r;r++)e=D[r],function(t){e.session.closed.then(function(){n(t)}),T(e)["catch"](function(){n(t)})}(e);else P.trigger(m["default"].TEARDOWN_COMPLETE)}function r(){return M}function i(){for(var e=[],t=0;t<D.length;t++)e.push(D[t].initData);return e}function a(e){E(e,0)}function s(e){e.mksa.createMediaKeys().then(function(t){M=e.keySystem,b=t,C&&C.setMediaKeys(b),P.trigger(m["default"].INTERNAL_KEY_SYSTEM_SELECTED)})["catch"](function(){P.trigger(m["default"].INTERNAL_KEY_SYSTEM_SELECTED,{error:"Error selecting keys system ("+e.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})}function l(e){C!==e&&(C&&(C.removeEventListener("encrypted",O),C.setMediaKeys(null)),C=e,C&&(C.addEventListener("encrypted",O),b&&C.setMediaKeys(b)))}function f(e){if(!M||!b)throw new Error("Can not set server certificate until you have selected a key system");b.setServerCertificate(e).then(function(){L("DRM: License server certificate successfully updated."),P.trigger(m["default"].SERVER_CERTIFICATE_UPDATED)})["catch"](function(e){P.trigger(m["default"].SERVER_CERTIFICATE_UPDATED,{error:"Error updating server certificate -- "+e.name})})}function g(e,t){if(!M||!b)throw new Error("Can not create sessions until you have selected a key system");var n=b.createSession(t),r=R(n,e,t);n.generateRequest("cenc",e).then(function(){L("DRM: Session created.  SessionID = "+r.getSessionID()),P.trigger(m["default"].KEY_SESSION_CREATED,{data:r})})["catch"](function(e){I(r),P.trigger(m["default"].KEY_SESSION_CREATED,{data:null,error:"Error generating key request -- "+e.name})})}function p(e,t){var n=e.session;w.isClearKey(M)&&(t=t.toJWK()),n.update(t)["catch"](function(t){P.trigger(m["default"].KEY_ERROR,{data:new d["default"](e,"Error sending update() message! "+t.name)})})}function v(e){if(!M||!b)throw new Error("Can not load sessions until you have selected a key system");var t=b.createSession();t.load(e).then(function(n){if(n){var r=R(t);L("DRM: Session created.  SessionID = "+r.getSessionID()),P.trigger(m["default"].KEY_SESSION_CREATED,{data:r})}else P.trigger(m["default"].KEY_SESSION_CREATED,{data:null,error:"Could not load session! Invalid Session ID ("+e+")"})})["catch"](function(t){P.trigger(m["default"].KEY_SESSION_CREATED,{data:null,error:"Could not load session ("+e+")! "+t.name})})}function _(e){var t=e.session;t.remove().then(function(){L("DRM: Session removed.  SessionID = "+e.getSessionID()),P.trigger(m["default"].KEY_SESSION_REMOVED,{data:e.getSessionID()})},function(t){P.trigger(m["default"].KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+e.getSessionID()+"). "+t.name})})}function y(e){T(e)["catch"](function(t){I(e),P.trigger(m["default"].KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+e.getSessionID()+") "+t.name})})}function E(e,t){!function(t){var n=e[t].ks,r=e[t].configs;navigator.requestMediaKeySystemAccess(n.systemString,r).then(function(e){var t="function"==typeof e.getConfiguration?e.getConfiguration():null,r=new h["default"](n,t);r.mksa=e,P.trigger(m["default"].KEY_SYSTEM_ACCESS_COMPLETE,{data:r})})["catch"](function(){++t<e.length?E(e,t):P.trigger(m["default"].KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied!"})})}(t)}function T(e){var t=e.session;return t.removeEventListener("keystatuseschange",e),t.removeEventListener("message",e),t.close()}function S(){return{handleEvent:function(e){switch(e.type){case"encrypted":if(e.initData){var t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;P.trigger(m["default"].NEED_KEY,{key:new u["default"](t,e.initDataType)})}}}}}function I(e){for(var t=0;t<D.length;t++)if(D[t]===e){D.splice(t,1);break}}function R(e,t,n){var r={session:e,initData:t,handleEvent:function(e){switch(e.type){case"keystatuseschange":P.trigger(m["default"].KEY_STATUSES_CHANGED,{data:this});break;case"message":var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;P.trigger(m["default"].INTERNAL_KEY_MESSAGE,{data:new c["default"](this,t,void 0,e.messageType)})}},getSessionID:function(){return e.sessionId},getExpirationTime:function(){return e.expiration},getKeyStatuses:function(){return e.keyStatuses},getSessionType:function(){return n}};return e.addEventListener("keystatuseschange",r),e.addEventListener("message",r),e.closed.then(function(){I(r),L("DRM: Session closed.  SessionID = "+r.getSessionID()),P.trigger(m["default"].KEY_SESSION_CLOSED,{data:r.getSessionID()})}),D.push(r),r}var A,M,C,b,D,O,w,N=this.context,P=e.eventBus,L=e.log;return A={getAllInitData:i,requestKeySystemAccess:a,getKeySystem:r,selectKeySystem:s,setMediaElement:l,setServerCertificate:f,createKeySession:g,updateKeySession:p,loadKeySession:v,removeKeySession:_,closeKeySession:y,reset:n},t(),A}Object.defineProperty(t,"__esModule",{value:!0});var a=n(28),o=r(a),s=n(44),u=r(s),l=n(40),d=r(l),f=n(41),c=r(f),g=n(42),h=r(g),p=n(2),m=r(p),v=n(1),_=r(v);i.__dashjs_factory_name="ProtectionModel_21Jan2015",t["default"]=_["default"].getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){D=null,O=null,w=null,N=null,P=[],x=(0,o["default"])(R).getInstance(),L=T()}function n(){try{for(var e=0;e<P.length;e++)p(P[e]);D&&D.removeEventListener(C.needkey,L),A.trigger(_["default"].TEARDOWN_COMPLETE)}catch(t){A.trigger(_["default"].TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+t.message})}}function r(){return O}function i(){for(var e=[],t=0;t<P.length;t++)e.push(P[t].initData);return e}function a(e){for(var t=!1,n=0;n<e.length;n++)for(var r=e[n].ks.systemString,i=e[n].configs,a=null,o=null,s=0;s<i.length;s++){var u=i[s].audioCapabilities,l=i[s].videoCapabilities;if(u&&0!==u.length){a=[];for(var d=0;d<u.length;d++)window[C.MediaKeys].isTypeSupported(r,u[d].contentType)&&a.push(u[d])}if(l&&0!==l.length){o=[];for(var f=0;f<l.length;f++)window[C.MediaKeys].isTypeSupported(r,l[f].contentType)&&o.push(l[f])}if(!(!a&&!o||a&&0===a.length||o&&0===o.length)){t=!0;var c=new h["default"](a,o),g=x.getKeySystemBySystemString(r);A.trigger(_["default"].KEY_SYSTEM_ACCESS_COMPLETE,{data:new m["default"](g,c)});break}}t||A.trigger(_["default"].KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"})}function s(e){try{w=e.mediaKeys=new window[C.MediaKeys](e.keySystem.systemString),O=e.keySystem,N=e,D&&S(),A.trigger(_["default"].INTERNAL_KEY_SYSTEM_SELECTED)}catch(t){A.trigger(_["default"].INTERNAL_KEY_SYSTEM_SELECTED,{error:"Error selecting keys system ("+O.systemString+")! Could not create MediaKeys -- TODO"})}}function l(e){D!==e&&(D&&D.removeEventListener(C.needkey,L),D=e,D&&(D.addEventListener(C.needkey,L),w&&S()))}function f(e){if(!O||!w||!N)throw new Error("Can not create sessions until you have selected a key system");var t=null;if(null!==N.ksConfiguration.videoCapabilities&&N.ksConfiguration.videoCapabilities.length>0&&(t=N.ksConfiguration.videoCapabilities[0]),null===t&&null!==N.ksConfiguration.audioCapabilities&&N.ksConfiguration.audioCapabilities.length>0&&(t=N.ksConfiguration.audioCapabilities[0]),null===t)throw new Error("Can not create sessions for unknown content types.");var n=t.contentType,r=w.createSession(n,new Uint8Array(e)),i=I(r,e);r.addEventListener(C.error,i),r.addEventListener(C.message,i),r.addEventListener(C.ready,i),r.addEventListener(C.close,i),P.push(i),M("DRM: Session created.  SessionID = "+i.getSessionID()),A.trigger(_["default"].KEY_SESSION_CREATED,{data:i})}function g(e,t){var n=e.session;x.isClearKey(O)?n.update(new Uint8Array(t.toJWK())):n.update(new Uint8Array(t))}function p(e){var t=e.session;t.removeEventListener(C.error,e),t.removeEventListener(C.message,e),t.removeEventListener(C.ready,e),t.removeEventListener(C.close,e);for(var n=0;n<P.length;n++)if(P[n]===e){P.splice(n,1);break}t[C.release]()}function v(){}function y(){}function E(){}function T(){return{handleEvent:function(e){switch(e.type){case C.needkey:if(e.initData){var t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;A.trigger(_["default"].NEED_KEY,{key:new u["default"](t,"cenc")})}}}}}function S(){var e=null,t=function(){D.removeEventListener("loadedmetadata",e),D[C.setMediaKeys](w),A.trigger(_["default"].VIDEO_ELEMENT_SELECTED)};D.readyState>=1?t():(e=t.bind(this),D.addEventListener("loadedmetadata",e))}function I(e,t){return{session:e,initData:t,getSessionID:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(e){switch(e.type){case C.error:var t="KeyError";A.trigger(_["default"].KEY_ERROR,{data:new d["default"](this,t)});break;case C.message:var n=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;A.trigger(_["default"].INTERNAL_KEY_MESSAGE,{data:new c["default"](this,n,e.destinationURL)});break;case C.ready:M("DRM: Key added."),A.trigger(_["default"].KEY_ADDED);break;case C.close:M("DRM: Session closed.  SessionID = "+this.getSessionID()),A.trigger(_["default"].KEY_SESSION_CLOSED,{data:this.getSessionID()})}}}}var R=this.context,A=e.eventBus,M=e.log,C=e.api,b=void 0,D=void 0,O=void 0,w=void 0,N=void 0,P=void 0,L=void 0,x=void 0;return b={getAllInitData:i,requestKeySystemAccess:a,getKeySystem:r,selectKeySystem:s,setMediaElement:l,createKeySession:f,updateKeySession:g,closeKeySession:p,setServerCertificate:v,loadKeySession:y,removeKeySession:E,reset:n},t(),b}Object.defineProperty(t,"__esModule",{value:!0});var a=n(28),o=r(a),s=n(44),u=r(s),l=n(40),d=r(l),f=n(41),c=r(f),g=n(43),h=r(g),p=n(42),m=r(p),v=n(2),_=r(v),y=n(1),E=r(y);i.__dashjs_factory_name="ProtectionModel_3Feb2014",t["default"]=E["default"].getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e,t){var n=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t)));e+="/?";for(var r=0;r<n.kids.length;r++)e+=n.kids[r]+"&";return e=e.substring(0,e.length-1)}function t(){return"GET"}function n(){return"json"}function r(e){if(!e.hasOwnProperty("keys"))return null;for(var t=[],n=0;n<e.keys.length;n++){var r=e.keys[n],i=r.kid.replace(/=/g,""),a=r.k.replace(/=/g,"");t.push(new o["default"](i,a))}return new u["default"](t)}function i(e){return String.fromCharCode.apply(null,new Uint8Array(e))}var a=void 0;return a={getServerURLFromMessage:e,getHTTPMethod:t,getResponseType:n,getLicenseMessage:r,getErrorResponse:i}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(65),o=r(a),s=n(64),u=r(s),l=n(1),d=r(l);i.__dashjs_factory_name="ClearKey",t["default"]=d["default"].getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e){return e}function t(){return"POST"}function n(e){return a[e].responseType}function r(e,t){return a[t].getLicenseMessage(e)}function i(e,t){return a[t].getErrorResponse(e)}var a={"com.widevine.alpha":{responseType:"json",getLicenseMessage:function(e){return u["default"].decodeArray(e.license)},getErrorResponse:function(e){return e}},"com.microsoft.playready":{responseType:"arraybuffer",getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}},o=void 0;return o={getServerURLFromMessage:e,getHTTPMethod:t,getResponseType:n,getLicenseMessage:r,getErrorResponse:i}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),s=n(32),u=r(s);i.__dashjs_factory_name="DRMToday",t["default"]=o["default"].getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e){return e}function t(){return"POST"}function n(){return"arraybuffer"}function r(e){return e}function i(e){return String.fromCharCode.apply(null,new Uint8Array(e))}var a=void 0;return a={getServerURLFromMessage:e,getHTTPMethod:t,getResponseType:n,getLicenseMessage:r,getErrorResponse:i}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a);i.__dashjs_factory_name="PlayReady",t["default"]=o["default"].getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e){return e}function t(){return"POST"}function n(){return"arraybuffer"}function r(e){return e}function i(e){return String.fromCharCode.apply(null,new Uint8Array(e))}var a=void 0;return a={getServerURLFromMessage:e,getHTTPMethod:t,getResponseType:n,getLicenseMessage:r,getErrorResponse:i}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a);i.__dashjs_factory_name="Widevine",t["default"]=o["default"].getSingletonFactory(i)},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function i(e,t){n(this,i),this.contentType=e,this.robustness=t};t["default"]=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){return u.mediaInfo.streamInfo}function n(){return u.mediaInfo}function r(){return u}function i(){return d}function a(){return u.mediaInfo.streamInfo.manifestInfo}function o(){return l}var s=void 0,u=e.streamProcessor.getCurrentRepresentationInfo(),l=e.streamProcessor,d=e.currentValue;return s={getStreamInfo:t,getMediaInfo:n,getTrackInfo:r,getCurrentValue:i,getManifestInfo:a,getStreamProcessor:o}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a);i.__dashjs_factory_name="RulesContext",t["default"]=o["default"].getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){l={},d={},f=(0,u["default"])(i).getInstance()}function t(e,t){l[e]=l[e]||{},l[e][t]=l[e][t]||{}}function n(e,n){var r,s=(new Date).getTime(),u=e.getMediaInfo(),c=u.type,p=e.getCurrentValue(),m=e.getTrackInfo(),v=p.request,_=e.getStreamProcessor().getABRController(),y=(0,o["default"])(i).create(o["default"].NO_CHANGE,o["default"].WEAK);if(!isNaN(v.index)){if(t(c,v.index),r=l[c][v.index],null===r||null===v.firstByteDate||d.hasOwnProperty(r.id))return void n(y);if(void 0===r.firstByteTime&&(r.firstByteTime=v.firstByteDate.getTime(),r.segmentDuration=v.duration,
r.bytesTotal=v.bytesTotal,r.id=v.index),r.bytesLoaded=v.bytesLoaded,r.elapsedTime=s-r.firstByteTime,r.bytesLoaded<r.bytesTotal&&r.elapsedTime>=g){if(r.measuredBandwidthInKbps=Math.round(8*r.bytesLoaded/r.elapsedTime),r.estimatedTimeOfDownload=(8*r.bytesTotal*.001/r.measuredBandwidthInKbps).toFixed(2),r.estimatedTimeOfDownload<r.segmentDuration*h||0===m.quality)return void n(y);if(!d.hasOwnProperty(r.id)){var E=_.getQualityForBitrate(u,r.measuredBandwidthInKbps*f.getBandwidthSafetyFactor());y=(0,o["default"])(i).create(E,o["default"].STRONG),d[r.id]=r,a("AbandonRequestsRule ( ",c,"frag id",r.id,") is asking to abandon and switch to quality to ",E," measured bandwidth was",r.measuredBandwidthInKbps),delete l[c][r.id]}}else r.bytesLoaded===r.bytesTotal&&delete l[c][r.id]}n(y)}function r(){l={},d={}}var i=this.context,a=(0,c["default"])(i).getInstance().log,s=void 0,l=void 0,d=void 0,f=void 0;return s={execute:n,reset:r},e(),s}Object.defineProperty(t,"__esModule",{value:!0});var a=n(7),o=r(a),s=n(5),u=r(s),l=n(1),d=r(l),f=n(4),c=r(f),g=500,h=1.5;i.__dashjs_factory_name="AbandonRequestsRule",t["default"]=d["default"].getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){v={},_=(0,u["default"])(d).getInstance()}function n(e,t,n){v[e]={index:t,quality:n}}function r(e,t,n){var r=v[e];return r?t>r.index||t==r.index&&n<r.quality:!0}function i(e,t){var i=e.getMediaInfo(),a=i.type,u=p.getReadOnlyMetricsFor(a),c=e.getCurrentValue(),m=c.request,_=(0,o["default"])(d).create(o["default"].NO_CHANGE,o["default"].WEAK);if(0===u.BolaState.length||u.BolaState[0]._s.state!==h["default"].BOLA_STATE_STEADY)return v={},void t(_);var y=u.BolaState[0]._s,E=m.index,T=m.quality;if(isNaN(E)||0===T||!r(a,E,T)||!m.firstByteDate)return void t(_);var S=(new Date).getTime(),I=S-m.firstByteDate.getTime(),R=m.bytesLoaded,A=m.bytesTotal,M=A-R,C=m.duration,b=g.getCurrentBufferLevel(u)?g.getCurrentBufferLevel(u):0,D=8e3*y.bandwidthSafetyFactor*R/I,O=.001*(m.firstByteDate.getTime()-m.requestStartDate.getTime());.001*l>O&&(O=.001*l);var w="index="+E+" quality="+T+" bytesLoaded/bytesTotal="+R+"/"+A+" bufferLevel="+b+" timeSince1stByte="+(I/1e3).toFixed(3)+" estThroughput="+(D/1e6).toFixed(3)+" latency="+O.toFixed(3),N=A*y.bitrate[0]/y.bitrate[T],P=M-O*D/8;if(1>P&&(P=1),s>I||N>=M||b>y.bufferTarget||N>=P||C>=8*A/D)return void t(_);if(y.safetyGuarantee&&b<=y.fragmentDuration&&y.state===h["default"].BOLA_STATE_STEADY)return y.lastQuality=0,p.updateBolaState(a,y),n(a,E,T),_=(0,o["default"])(d).create(0,o["default"].STRONG),h["default"].BOLA_DEBUG&&f("BolaDebug "+a+" BolaAbandonRule to 0 for safety guarantee - "+w),void t(_);var L=8*M/D,x=T;if(L>b)for(--x;x>0&&(N=A*y.bitrate[x]/y.bitrate[T],L=O+8*N/D,!(b>=L));)--x;for(var F=b+y.virtualBuffer-O,U=T,B=(y.utility[T]+y.gp-F/y.Vp)/P,k=0;T>k&&(N=A*y.bitrate[k]/y.bitrate[T],!(N>P));++k){var j=(y.utility[k]+y.gp-F/y.Vp)/N;j>B&&(U=k,B=j)}if(U>x&&(U=x),U===T)return void t(_);for(;U>0&&y.bitrate[U]>D;)--U;y.lastQuality=U,p.updateBolaState(a,y),n(a,E,T),_=(0,o["default"])(d).create(U,o["default"].STRONG),h["default"].BOLA_DEBUG&&f("BolaDebug "+a+" BolaAbandonRule abandon to "+U+" - "+w),t(_)}function a(){v={}}var s=500,l=200,d=this.context,f=(0,c["default"])(d).getInstance().log,g=e.dashMetrics,p=e.metricsModel,m=void 0,v=void 0,_=void 0;return m={execute:i,reset:a},t(),m}Object.defineProperty(t,"__esModule",{value:!0});var a=n(7),o=r(a),s=n(5),u=r(s),l=n(1),d=r(l),f=n(4),c=r(f),g=n(66),h=r(g);i.__dashjs_factory_name="BolaAbandonRule",t["default"]=d["default"].getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){c=0,g=(0,u["default"])(a).getInstance()}function n(e,t){var n=(new Date).getTime()/1e3,r=e.getMediaInfo(),i=e.getTrackInfo(),u=r.type,h=isNaN(i.fragmentDuration)?2:i.fragmentDuration/2,p=e.getCurrentValue(),m=e.getStreamProcessor(),v=m.getABRController(),_=l.getReadOnlyMetricsFor(u),y=f.getCurrentBufferLevel(_),E=_.BufferState.length>0?_.BufferState[_.BufferState.length-1]:null,T=!1,S=r.representationCount-1,I=(0,o["default"])(a).create(o["default"].NO_CHANGE,o["default"].WEAK);return h>n-c||v.getAbandonmentStateFor(u)===d["default"].ABANDON_LOAD?void t(I):(null!==E&&y>E.target&&(T=y-E.target>g.getRichBufferThreshold(),T&&r.representationCount>1&&(I=(0,o["default"])(a).create(S,o["default"].STRONG))),I.value!==o["default"].NO_CHANGE&&I.value!==p&&s("BufferOccupancyRule requesting switch to index: ",I.value,"type: ",u," Priority: ",I.priority===o["default"].DEFAULT?"Default":I.priority===o["default"].STRONG?"Strong":"Weak"),void t(I))}function r(){c=0}var i=void 0,a=this.context,s=(0,h["default"])(a).getInstance().log,l=e.metricsModel,f=e.dashMetrics,c=void 0,g=void 0;return i={execute:n,reset:r},t(),i}Object.defineProperty(t,"__esModule",{value:!0});var a=n(7),o=r(a),s=n(5),u=r(s),l=n(9),d=r(l),f=n(1),c=r(f),g=n(4),h=r(g);i.__dashjs_factory_name="BufferOccupancyRule",t["default"]=c["default"].getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){p={},v=0,_=1e3,f.on(c["default"].PLAYBACK_SEEKING,i,h)}function n(e,t){var n=(new Date).getTime(),i=e.getMediaInfo().type,a=e.getCurrentValue(),d=g.getReadOnlyMetricsFor(i),f=d.BufferState.length>0?d.BufferState[d.BufferState.length-1]:null,c=(0,o["default"])(s).create(o["default"].NO_CHANGE,o["default"].WEAK);return _>n-v||null===f?void t(c):(r(i,f.state),f.state===u["default"].BUFFER_EMPTY&&void 0!==p[i].firstBufferLoadedEvent&&(c=(0,o["default"])(s).create(0,o["default"].STRONG)),c.value!==o["default"].NO_CHANGE&&c.value!==a&&l("InsufficientBufferRule requesting switch to index: ",c.value,"type: ",i," Priority: ",c.priority===o["default"].DEFAULT?"Default":c.priority===o["default"].STRONG?"Strong":"Weak"),v=n,void t(c))}function r(e,t){p[e]=p[e]||{},p[e].state=t,t!==u["default"].BUFFER_LOADED||p[e].firstBufferLoadedEvent||(p[e].firstBufferLoadedEvent=!0)}function i(){p={}}function a(){f.off(c["default"].PLAYBACK_SEEKING,i,h),p={},v=0}var s=this.context,l=(0,m["default"])(s).getInstance().log,f=(0,d["default"])(s).getInstance(),g=e.metricsModel,h=void 0,p=void 0,v=void 0,_=void 0;return h={execute:n,reset:a},t(),h}Object.defineProperty(t,"__esModule",{value:!0});var a=n(7),o=r(a),s=n(15),u=r(s),l=n(3),d=r(l),f=n(2),c=r(f),g=n(1),h=r(g),p=n(4),m=r(p);i.__dashjs_factory_name="InsufficientBufferRule",t["default"]=h["default"].getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){y=[],E=(0,c["default"])(f).getInstance()}function n(e,t){y[e]=y[e]||[],t!==1/0&&t!==y[e][y[e].length-1]&&y[e].push(t)}function r(e,t){var n=0,r=t?s:l,i=y[e],a=i.length;if(r=r>a?a:r,a>0){for(var o=a-r,u=0,d=o;a>d;d++)u+=i[d];n=u/r}return i.length>r&&i.shift(),n/1e3*E.getBandwidthSafetyFactor()}function i(e,t){var i,a,s,l,c=e.getMediaInfo(),v=c.type,_=e.getCurrentValue(),y=m.getReadOnlyMetricsFor(v),E=e.getStreamProcessor(),T=E.getABRController(),S=E.isDynamic(),I=p.getCurrentHttpRequest(y),R=y.BufferState.length>0?y.BufferState[y.BufferState.length-1]:null,A=y.BufferLevel.length>0?y.BufferLevel[y.BufferLevel.length-1]:null,M=(0,o["default"])(f).create(o["default"].NO_CHANGE,o["default"].WEAK);if(!(y&&I&&I.type===h["default"].MEDIA_SEGMENT_TYPE&&R&&A))return void t(M);if(I.trace&&I.trace.length&&(i=(I._tfinish.getTime()-I.tresponse.getTime())/1e3,a=I.trace.reduce(function(e,t){return e+t.b[0]},0),l=Math.round(8*a)/i,n(v,l)),s=Math.round(r(v,S)),T.setAverageThroughput(v,s),T.getAbandonmentStateFor(v)!==d["default"].ABANDON_LOAD){if(R.state===u["default"].BUFFER_LOADED||S){var C=T.getQualityForBitrate(c,s);E.getScheduleController().setTimeToLoadDelay(0),M=(0,o["default"])(f).create(C,o["default"].DEFAULT)}M.value!==o["default"].NO_CHANGE&&M.value!==_&&g("ThroughputRule requesting switch to index: ",M.value,"type: ",v," Priority: ",M.priority===o["default"].DEFAULT?"Default":M.priority===o["default"].STRONG?"Strong":"Weak","Average throughput",Math.round(s),"kbps")}t(M)}function a(){t()}var s=2,l=3,f=this.context,g=(0,_["default"])(f).getInstance().log,p=e.dashMetrics,m=e.metricsModel,v=void 0,y=void 0,E=void 0;return v={execute:i,reset:a},t(),v}Object.defineProperty(t,"__esModule",{value:!0});var a=n(7),o=r(a),s=n(15),u=r(s),l=n(9),d=r(l),f=n(5),c=r(f),g=n(6),h=r(g),p=n(1),m=r(p),v=n(4),_=r(v);i.__dashjs_factory_name="ThroughputRule",t["default"]=m["default"].getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(e){var t,n=0;return e&&e.some(function(e,t){return n=t,!r.contains(e.serviceLocation)})&&(t=e[n]),t}var n=void 0,r=e.blacklistController;return n={select:t}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a);i.__dashjs_factory_name="BasicSelector",t["default"]=o["default"].getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(e){var t=[],n=function(e){return!t.length||!e.dvb_priority||-1===t.indexOf(e.dvb_priority)},r=function(e){return a.contains(e.serviceLocation)?(e.dvb_priority&&t.push(e.dvb_priority),!1):!0};return e.filter(r).filter(n)}function n(e){var t,n,r=function(e,t){var n=e.dvb_priority-t.dvb_priority;return isNaN(n)?0:n},i=function(e,t,n){return!t||n[0].dvb_priority&&e.dvb_priority&&n[0].dvb_priority===e.dvb_priority},a=0,o=[],s=0;return n=e.sort(r).filter(i),n.length?(n.length>1&&(n.forEach(function(e){a+=e.dvb_weight,o.push(a)}),t=Math.floor(Math.random()*(a-1)),o.every(function(e,n){return s=n,!(e>t)})),n[s]):void 0}function r(e){return e&&n(t(e))}var i=void 0,a=e.blacklistController;return i={select:r}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a);i.__dashjs_factory_name="DVBSelector",t["default"]=o["default"].getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){c=(0,o["default"])(s).getInstance(),g=(0,u["default"])(s).getInstance()}function n(e){var t=e.getCurrentRepresentationInfo(),n=t.mediaInfo,r=n.type,a=d.getReadOnlyMetricsFor(r),o=l.getCurrentBufferLevel(a);return o<i(e,r)}function r(){}function i(e,t){var n=e.getCurrentRepresentationInfo(),r=n.mediaInfo,i=r.streamInfo,a=e.getABRController(),o=i.manifestInfo.duration,s=o>=c.getLongFormContentDurationThreshold(),u=NaN;return u="fragmentedText"===t?f.getAllTracksAreDisabled()?0:n.fragmentDuration:a.isPlayingAtTopQuality(i)?s?c.getBufferTimeAtTopQualityLongForm():c.getBufferTimeAtTopQuality():c.getStableBufferTime()}var a=void 0,s=this.context,l=e.dashMetrics,d=e.metricsModel,f=e.textSourceBuffer,c=void 0,g=void 0;return a={execute:n,reset:r},t(),a}Object.defineProperty(t,"__esModule",{value:!0});var a=n(5),o=r(a),s=n(10),u=r(s),l=n(1),d=r(l);i.__dashjs_factory_name="BufferLevelRule",t["default"]=d["default"].getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(e){var t=e.getCurrentRepresentationInfo(),n=t.mediaInfo,r=n.type,o=n.streamInfo.id,d=e.getScheduleController(),f=d.getSeekTarget(),c=!isNaN(f),g=!c,h=c?f:a.getIndexHandlerTime(e),p=e.getBuffer(),m=null,v=void 0,_=void 0;if(isNaN(h)||"fragmentedText"===r&&l.getAllTracksAreDisabled())return null;if(c&&d.setSeekTarget(NaN),p&&(m=s.getBufferRange(e.getBuffer(),h),null!==m&&(v=u.getChunks({streamId:o,mediaType:r,appended:!0,mediaInfo:n,forRange:m}),v&&v.length>0))){var y=h;h=v[v.length-1].bufferedRange.end,i("Prior to making a request for time, NextFragmentRequestRule is aligning index handler's currentTime with bufferedRange.end.",y," was changed to ",h)}return _=a.getFragmentRequestForTime(e,t,h,{keepIdx:g}),_&&e.getFragmentModel().isFragmentLoaded(_)&&(_=a.getNextFragmentRequest(e,t)),_&&(a.setIndexHandlerTime(e,_.startTime+_.duration),_.delayLoadingTime=(new Date).getTime()+d.getTimeToLoadDelay(),d.setTimeToLoadDelay(0)),_}var n=void 0,r=this.context,i=(0,o["default"])(r).getInstance().log,a=e.adapter,s=e.sourceBufferController,u=e.virtualBuffer,l=e.textSourceBuffer;return n={execute:t}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=r(a),s=n(1),u=r(s);i.__dashjs_factory_name="NextFragmentRequestRule",t["default"]=u["default"].getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){v=NaN,_=null,y=NaN,E=null,T=!1,S=NaN,I=o["default"].DEFAULT}function n(e,t){var n,r;if(R=t,M=e.getStreamProcessor(),A=M.getFragmentLoader(),E=e.getTrackInfo(),S=E.fragmentDuration,r=E.DVRWindow,v=r.end,E.useCalculatedLiveEdgeTime){var u=p.getExpectedLiveEdge();return p.setExpectedLiveEdge(v),void R((0,o["default"])(f).create(u,I))}_={start:Math.max(0,v-g),end:v+g},y=Math.floor((r.end-r.start)/2),n=h.getFragmentRequestForTime(M,E,v,{ignoreIsFinished:!0}),i(v,s,a,n)}function r(){v=NaN,_=null,y=NaN,E=null,T=!1,S=NaN,M=null,A=null}function i(e,t,n,r){var a;if(null===r)a=h.generateFragmentRequestForTime(M,E,e),i(e,t,n,a);else{var o=function s(r){c.off(d["default"].CHECK_FOR_EXISTENCE_COMPLETED,s,this),r.exists?t(r.request,e):n(r.request,e)};c.on(d["default"].CHECK_FOR_EXISTENCE_COMPLETED,o,this),A.checkForExistence(r)}}function a(e,t){var n,r,u;return T?void l(!1,t):(u=t-v,n=u>0?v-u:v+Math.abs(u)+y,void(n<_.start&&n>_.end?R((0,o["default"])(f).create(null,I)):(r=h.getFragmentRequestForTime(M,E,n,{ignoreIsFinished:!0}),i(n,s,a,r))))}function s(e,t){var n,r,a=e.startTime;if(!T){if(!E.fragmentDuration)return void R((0,o["default"])(f).create(a,I));if(T=!0,_.end=a+2*y,t===v)return r=t+S,n=h.getFragmentRequestForTime(M,E,r,{ignoreIsFinished:!0}),void i(r,function(){l(!0,r)},function(){R((0,o["default"])(f).create(r,I))},n)}l(!0,t)}function l(e,t){var n,r,u;e?_.start=t:_.end=t,n=Math.floor(_.end-_.start)<=S,n?R((0,o["default"])(f).create(e?t:t-S,I)):(u=(_.start+_.end)/2,r=h.getFragmentRequestForTime(M,E,u,{ignoreIsFinished:!0}),i(u,s,a,r))}var f=this.context,c=(0,u["default"])(f).getInstance(),h=e.adapter,p=e.timelineConverter,m=void 0,v=void 0,_=void 0,y=void 0,E=void 0,T=void 0,S=void 0,I=void 0,R=void 0,A=void 0,M=void 0;return m={execute:n,reset:r},t(),m}Object.defineProperty(t,"__esModule",{value:!0});var a=n(7),o=r(a),s=n(3),u=r(s),l=n(2),d=r(l),f=n(1),c=r(f),g=43200;i.__dashjs_factory_name="LiveEdgeBinarySearchRule",t["default"]=c["default"].getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(e,t){var n=e.getTrackInfo(),a=n.DVRWindow.end,s=o["default"].DEFAULT;if(n.useCalculatedLiveEdgeTime){var u=i.getExpectedLiveEdge();i.setExpectedLiveEdge(a),t((0,o["default"])(r).create(u,s))}else t((0,o["default"])(r).create(a,s))}var n=void 0,r=this.context,i=e.timelineConverter;return n={execute:t}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(7),o=r(a),s=n(1),u=r(s);i.__dashjs_factory_name="LiveEdgeWithTimeSynchronizationRule",t["default"]=u["default"].getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){f=(0,c["default"])(i).create({updateEventName:u["default"].SERVICE_LOCATION_BLACKLIST_CHANGED,loadFailedEventName:u["default"].FRAGMENT_LOADING_COMPLETED}),g=(0,m["default"])(i).create({blacklistController:f}),p=(0,h["default"])(i).create({blacklistController:f}),v=g}function t(e){v=s.getIsDVB(e)?p:g}function n(e){var t=e.baseUrls,n=e.selectedIdx;if(!isNaN(n))return t[n];var r=v.select(t);return r?(e.selectedIdx=t.indexOf(r),r):void a.trigger(u["default"].URL_RESOLUTION_FAILED,{error:new Error(y,E)})}function r(){f.reset()}var i=this.context,a=(0,o["default"])(i).getInstance(),s=(0,d["default"])(i).getInstance(),l=void 0,f=void 0,g=void 0,p=void 0,v=void 0;return l={chooseSelectorFromManifest:t,select:n,reset:r},e(),l}Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),o=r(a),s=n(2),u=r(s),l=n(11),d=r(l),f=n(95),c=r(f),g=n(142),h=r(g),p=n(141),m=r(p),v=n(1),_=r(v),y=1,E="Failed to resolve a valid URL";i.__dashjs_factory_name="BaseURLSelector";var T=_["default"].getClassFactory(i);T.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=y,T.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE=E,t["default"]=T},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){o=!1}function t(){var e="WebKitMediaSource"in window,t="MediaSource"in window;return e||t}function n(){return o}function r(e){o=e}function i(e,t){var n=e.canPlayType(t);return"probably"===n||"maybe"===n}var a=void 0,o=void 0;return a={supportsMediaSource:t,supportsEncryptedMedia:n,supportsCodec:i,setEncryptedMediaSupported:r},e(),a}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a);i.__dashjs_factory_name="Capabilities",t["default"]=o["default"].getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e){return e&&d&&d.boxes&&0!==d.boxes.length?u(d.fetch(e)):null}function t(e){for(var t,n=d.fetchAll(e),r=[],i=0,a=n.length;a>i;i++)t=u(n[i]),t&&r.push(t);return r}function n(e){d=e}function r(){if(!d||!d.boxes||!d.boxes.length)return null;var e=d.boxes[d.boxes.length-1].type,n=t(e);return n[n.length-1]}function i(){return d._cursor.offset}function a(){f={offset:"_offset",size:"size",type:"type"},c={references:"references",timescale:"timescale",earliest_presentation_time:"earliest_presentation_time",first_offset:"first_offset"},g={reference_type:"reference_type",referenced_size:"referenced_size",subsegment_duration:"subsegment_duration"},h={id:"id",value:"value",timescale:"timescale",scheme_id_uri:"scheme_id_uri",presentation_time_delta:"presentation_time_delta",event_duration:"event_duration",message_data:"message_data"},p={timescale:"timescale"},m={sequence_number:"sequence_number"},v={base_data_offset:"base_data_offset",sample_description_index:"sample_description_index",default_sample_duration:"default_sample_duration",default_sample_size:"default_sample_size",default_sample_flags:"default_sample_flags",flags:"flags"},_={version:"version",baseMediaDecodeTime:"baseMediaDecodeTime",flags:"flags"},y={sample_count:"sample_count",first_sample_flags:"first_sample_flags",data_offset:"data_offset",flags:"flags",samples:"samples"},E={sample_size:"sample_size",sample_duration:"sample_duration",sample_composition_time_offset:"sample_composition_time_offset"}}function s(e,t,n){for(var r in n)t[r]=e[n[r]]}function u(e){if(!e)return null;var t,n,r=new o["default"];switch(s(e,r,f),e.hasOwnProperty("_incomplete")&&(r.isComplete=!e._incomplete),r.type){case"sidx":if(s(e,r,c),r.references)for(t=0,n=r.references.length;n>t;t++)s(e.references[t],r.references[t],g);break;case"emsg":s(e,r,h);break;case"mdhd":s(e,r,p);break;case"mfhd":s(e,r,m);break;case"tfhd":s(e,r,v);break;case"tfdt":s(e,r,_);break;case"trun":if(s(e,r,y),r.samples)for(t=0,n=r.samples.length;n>t;t++)s(e.samples[t],r.samples[t],E)}return r}var l=void 0,d=void 0,f=void 0,c=void 0,g=void 0,h=void 0,p=void 0,m=void 0,v=void 0,_=void 0,y=void 0,E=void 0;return l={getBox:e,getBoxes:t,setData:n,getLastBox:r,getOffset:i},a(),l}Object.defineProperty(t,"__esModule",{value:!0});var a=n(156),o=r(a),s=n(1),u=r(s);i.__dashjs_factory_name="IsoFile",t["default"]=u["default"].getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e,t){return JSON.stringify(e)===JSON.stringify(t)}var t=void 0;return t={areSimpleEquivalent:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a);i.__dashjs_factory_name="ObjectUtils",t["default"]=o["default"].getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e){e&&e.videoModel&&(W=e.videoModel)}function t(e,t,n){var a=void 0,s=void 0,u=void 0,f=void 0,c="",g=new l["default"]([],"",!1);if(P=g.xml_str2json(e),!P)throw"TTML document could not be parsed";W.getTTMLRenderingDiv()&&(f="html");var m=i(P,"http://www.w3.org/ns/ttml");if(m&&o(P,m),a=P.tt,!a)throw"TTML document lacks tt element";if(s=a.head,!s)throw"TTML document lacks head element";if(s.layout&&(x=s.layout.region_asArray),s.styling&&(L=s.styling.style_asArray),u=a.body,!u)throw"TTML document lacks body element";var v=I(),_=W.getElement().clientWidth,y=W.getElement().clientHeight,T=[_/v[0],y/v[1]];j["font-size"]=T[1]+"px;";var S=[];if(x)for(var b=0;b<x.length;b++)S.push(E(JSON.parse(JSON.stringify(x[b])),T));var D=i(P.tt,"http://www.w3.org/ns/ttml#parameter");P.tt.hasOwnProperty(D+":frameRate")&&(P.tt.frameRate=parseInt(P.tt[D+":frameRate"],10));var w=[],N=P.tt.body_asArray[0].__children;if(N.forEach(function(e){var i=e.div.p_asArray;if(i&&0!==i.length){var a,o,s,u;i.forEach(function(i){if(i.hasOwnProperty("begin")&&i.hasOwnProperty("end"))a=r(i.begin),o=r(i.end);else{if(!i.span.hasOwnProperty("begin")||!i.span.hasOwnProperty("end"))throw c="TTML document has incorrect timing value";s=r(i.span.begin),u=r(i.span.end)}var l=s||a,g=u||o;if("undefined"!=typeof t&&"undefined"!=typeof n){if(t>g||l>n)return void O("TTML: Cue interval "+l+"-"+g+" outside sample interval "+t+"-"+n+". Dropped");var m=!1,E=l,I=g;t>l&&(m=!0,l=t),g>n&&(m=!0,g=n),m&&O("TTML: Clipped cue "+E+"-"+I+" to "+l+"-"+g)}if(void 0!==i["smpte:backgroundImage"])for(var b=P.tt.head.metadata.image_asArray,D=0;D<b.length;D++)"#"+b[D]["xml:id"]==i["smpte:backgroundImage"]&&w.push({start:l,end:g,id:b[D]["xml:id"],data:"data:image/"+b[D].imagetype.toLowerCase()+";base64, "+b[D].__text,type:"image"});else if("html"===f){U={},B={},F={};var N="";if((i.hasOwnProperty("id")||i.hasOwnProperty("xml:id"))&&(N=i["xml:id"]||i.id),(isNaN(a)||isNaN(o))&&(isNaN(s)||isNaN(u)))throw c="TTML document has incorrect timing value";var L=M(i,e.div,T),x=C(i,T),k=x[1];x=x[0];var j=document.createElement("div");j.className=k;var K=i.__children,Y=A(K,T);Y.className="cueDirUniWrapper",d("unicode-bidi",x)&&(Y.style.cssText+=h("unicode-bidi",x),p("unicode-bidi",x)),d("direction",x)&&(Y.style.cssText+=h("direction",x),p("direction",x)),d("padding-left",x)&&d("padding-right",x)&&(Y.innerHTML=R(Y,x)),d("padding-left",x)&&d("padding-right",x)&&(p("padding-left",x),p("padding-right",x));var H="";if(d("regionID",L)){var G=h("regionID",L);H=G.slice(G.indexOf(":")+1,G.length-1)}x&&(j.style.cssText=x.join(" ")+"display:flex;"),L&&(L=L.join(" ")),j.appendChild(Y);var q=document.createElement("div");q.appendChild(j),q.id="subtitle_"+N,q.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+L,0===Object.keys(F).length&&(F.defaultFontSize="100"),w.push({start:l,end:g,type:"html",cueHTMLElement:q,regions:S,regionID:H,cueID:N,videoHeight:y,videoWidth:_,cellResolution:v,fontSize:F||{defaultFontSize:"100"},lineHeight:U,linePadding:B})}else{var V="",z=i.__children;z.length&&z.forEach(function(e){if(e.hasOwnProperty("span")){var t=e.span.__children;t.forEach(function(e){t.hasOwnProperty("metadata")||(e.hasOwnProperty("#text")?V+=e["#text"].replace(/[\r\n]+/gm," ").trim():"br"in e&&(V+="\n"))})}else V+=e.hasOwnProperty("br")?"\n":e["#text"].replace(/[\r\n]+/gm," ").trim()}),w.push({start:l,end:g,data:V,type:"text"})}})}else c="TTML document does not contain any cues"}),""!==c&&O(c),w.length>0)return w;throw c}function n(){N=/^([0-9][0-9]+):([0-5][0-9]):([0-5][0-9])|(60)(\.([0-9])+)?$/,F={},U={},B={},k={top:"85%;",left:"5%;",width:"90%;",height:"10%;","align-items":"flex-start;",overflow:"visible;","-ms-writing-mode":"lr-tb, horizontal-tb;","-webkit-writing-mode":"horizontal-tb;","-moz-writing-mode":"horizontal-tb;","writing-mode":"horizontal-tb;"},j={color:"rgb(255,255,255);",direction:"ltr;","font-family":"monospace, sans-serif;","font-style":"normal;","line-height":"normal;","font-weight":"normal;","text-align":"start;","justify-content":"flex-start;","text-decoration":"none;","unicode-bidi":"normal;","white-space":"normal;",width:"100%;"},K={monospace:"font-family: monospace;",sansSerif:"font-family: sans-serif;",serif:"font-family: serif;",monospaceSansSerif:"font-family: monospace, sans-serif;",monospaceSerif:"font-family: monospace, serif;",proportionalSansSerif:"font-family: Arial;",proportionalSerif:"font-family: Times New Roman;","default":"font-family: monospace, sans-serif;"},Y={right:["justify-content: flex-end;","text-align: right;"],start:["justify-content: flex-start;","text-align: start;"],center:["justify-content: center;","text-align: center;"],end:["justify-content: flex-end;","text-align: end;"],left:["justify-content: flex-start;","text-align: left;"]},H={start:"text-align: start;",center:"text-align: center;",end:"text-align: end;",auto:""},G={wrap:"white-space: normal;",noWrap:"white-space: nowrap;"},q={normal:"unicode-bidi: normal;",embed:"unicode-bidi: embed;",bidiOverride:"unicode-bidi: bidi-override;"},V={before:"align-items: flex-start;",center:"align-items: center;",after:"align-items: flex-end;"},z={lrtb:"-webkit-writing-mode: horizontal-tb;writing-mode: horizontal-tb;",rltb:"-webkit-writing-mode: horizontal-tb;writing-mode: horizontal-tb;direction: rtl;unicode-bidi: bidi-override;",tbrl:"-webkit-writing-mode: vertical-rl;writing-mode: vertical-rl;-webkit-text-orientation: upright;text-orientation: upright;",tblr:"-webkit-writing-mode: vertical-lr;writing-mode: vertical-lr;-webkit-text-orientation: upright;text-orientation: upright;",lr:"-webkit-writing-mode: horizontal-tb;writing-mode: horizontal-tb;",rl:"-webkit-writing-mode: horizontal-tb;writing-mode: horizontal-tb;direction: rtl;",tb:"-webkit-writing-mode: vertical-rl;writing-mode: vertical-rl;-webkit-text-orientation: upright;text-orientation: upright;"}}function r(e){var t,n,r,i=N.test(e);if(!i)return NaN;if(t=e.split(":"),n=parseFloat(t[0])*c+parseFloat(t[1])*g+parseFloat(t[2]),t[3]){if(r=P.tt.frameRate,!r||isNaN(r))return NaN;n+=parseFloat(t[3])/r}return n}function i(e,t){var n=Object.keys(e).filter(function(n){return("xmlns"===n.split(":")[0]||"xmlns"===n.split(":")[1])&&e[n]===t}).map(function(e){return e.split(":")[2]||e.split(":")[1]});return 1!=n.length?null:n[0]}function o(e,t){for(var n in e)if(e.hasOwnProperty(n)){if(("object"===a(e[n])||e[n]instanceof Object)&&!Array.isArray(e[n]))o(e[n],t);else if(Array.isArray(e[n]))for(var r=0;r<e[n].length;r++)o(e[n][r],t);var i=n.slice(n.indexOf(t)+t.length+1);e[i]=e[n],delete e[n]}}function s(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function u(e){var t=e.slice(1),n=t.match(/.{2}/g),r=parseFloat(parseInt(parseInt(n[3],16)/255*1e3,10)/1e3),i=n.slice(0,3).map(function(e){return parseInt(e,16)});return"rgba("+i.join(",")+","+r+");"}function d(e,t){for(var n=0;n<t.length;n++)if(t[n].indexOf(e)>-1)return!0;return!1}function h(e,t){for(var n=0;n<t.length;n++)if(t[n].indexOf(e)>-1)return t[n];return null}function p(e,t){t.splice(t.indexOf(h(e,t)),1)}function m(e,t){for(var n=0;n<e.length;n++)for(var r=0;r<t.length;r++)e[n]&&e[n].split(":")[0].indexOf(t[r].split(":")[0])>-1&&e.splice(n,1);return e.concat(t)}function v(e,t){var n=[];for(var r in e)if(e.hasOwnProperty(r)){var i=r.replace("ebutts:","");i=i.replace("xml:",""),i=i.replace("tts:",""),i=s(i),e[i]=e[r],delete e[r]}if("line-padding"in e){var a=parseFloat(e["line-padding"].slice(e["line-padding"].indexOf(":")+1,e["line-padding"].indexOf("c")));"id"in e&&(B[e.id]=a);var o=a*t[0]+"px;";n.push("padding-left:"+o),n.push("padding-right:"+o)}if("font-size"in e){var l=parseFloat(e["font-size"].slice(e["font-size"].indexOf(":")+1,e["font-size"].indexOf("%")));"id"in e&&(F[e.id]=l);var f=l/100*t[1]+"px;";n.push("font-size:"+f)}if("line-height"in e)if("normal"===e["line-height"])n.push("line-height: normal;");else{var c=parseFloat(e["line-height"].slice(e["line-height"].indexOf(":")+1,e["line-height"].indexOf("%")));"id"in e&&(U[e.id]=c);var g=c/100*t[1]+"px;";n.push("line-height:"+g)}"font-family"in e&&(e["font-family"]in K?n.push(K[e["font-family"]]):n.push("font-family:"+e["font-family"]+";")),"text-align"in e&&e["text-align"]in Y&&(n.push(Y[e["text-align"]][0]),n.push(Y[e["text-align"]][1])),"multi-row-align"in e&&(d("text-align",n)&&"auto"!=e["multi-row-align"]&&p("text-align",n),e["multi-row-align"]in H&&n.push(H[e["multi-row-align"]]));var h;return"background-color"in e&&(e["background-color"].indexOf("#")>-1&&e["background-color"].length-1===8?(h=u(e["background-color"]),n.push("background-color: "+h)):n.push("background-color:"+e["background-color"]+";")),"color"in e&&(e.color.indexOf("#")>-1&&e.color.length-1===8?(h=u(e.color),n.push("color: "+h)):n.push("color:"+e.color+";")),"wrap-option"in e&&(e["wrap-option"]in G?n.push(G[e["wrap-option"]]):n.push("white-space:"+e["wrap-option"])),"unicode-bidi"in e&&(e["unicode-bidi"]in q?n.push(q[e["unicode-bidi"]]):n.push("unicode-bidi:"+e["unicode-bidi"])),"font-style"in e&&n.push("font-style:"+e["font-style"]+";"),"font-weight"in e&&n.push("font-weight:"+e["font-weight"]+";"),"direction"in e&&n.push("direction:"+e.direction+";"),"text-decoration"in e&&n.push("text-decoration:"+e["text-decoration"]+";"),P.tt.hasOwnProperty("xml:space")&&"preserve"===P.tt["xml:space"]&&n.push("white-space: pre;"),n}function _(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r["xml:id"]===t||r.id===t)return r}return null}function y(e,t){var n=[],r=e.match(/\S+/g);return r.forEach(function(e){var r=_(L,e);if(r){var i=v(JSON.parse(JSON.stringify(r)),t);n=n.concat(i)}}),n}function E(e,t){var n=[];for(var r in e){var i=r.replace("tts:","");i=i.replace("xml:",""),i=s(i),e[i]=e[r],i!==r&&delete e[r]}if("extent"in e){var a=e.extent.split(/\s/);n.push("width: "+a[0]+";"),n.push("height: "+a[1]+";")}if("origin"in e){var o=e.origin.split(/\s/);n.push("left: "+o[0]+";"),n.push("top: "+o[1]+";")}if("display-align"in e&&n.push(V[e["display-align"]]),"writing-mode"in e&&n.push(z[e["writing-mode"]]),"style"in e){var u=y(e.style,t);n=n.concat(u)}return"padding"in e&&n.push("padding:"+e.padding+";"),"overflow"in e&&n.push("overflow:"+e.overflow+";"),"show-background"in e&&n.push("show-background:"+e["show-background"]+";"),"id"in e&&n.push("regionID:"+e.id+";"),n}function T(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r["xml:id"]===t||r.id===t)return r}return null}function S(e,t){var n=[],r=e.match(/\S+/g);return r.forEach(function(e){var r=T(x,e);if(r){var i=E(JSON.parse(JSON.stringify(r)),t);n=n.concat(i)}}),n}function I(){var e=[32,15];return P.tt.hasOwnProperty("ttp:cellResolution")?P.tt["ttp:cellResolution"].split(" ").map(parseFloat):e}function R(e,t){for(var n=h("padding-left",t),r=h("padding-right",t),i=n.concat(" "+r+" "),a="",o="",s="",u=Array.prototype.slice.call(e.children),l=e.getElementsByClassName("lineBreak")[0],d=u.indexOf(l),f=[];-1!=d;)f.push(d),d=u.indexOf(l,d+1);var c="</span>",g="<br>",p='<span class="spanPadding" style="-webkit-box-decoration-break: clone; ';if(f.length)f.forEach(function(e,t){if(0===t){for(var n="",r=0;e>r;r++)a+=u[r].outerHTML,0===r&&(n=i.concat(u[r].style.cssText));a=p+n+'">'+a}for(var l="",d=e+1;d<u.length;d++)o+=u[d].outerHTML,d===u.length-1&&(l+=i.concat(u[d].style.cssText));o=p+l+'">'+o,a&&o&&t===f.length-1?s+=a+c+g+o+c:a&&o&&t!==f.length-1?s+=a+c+g+o+c+g:a&&!o?s+=a+c:!a&&o&&t===f.length-1?s+=o+c:!a&&o&&t!==f.length-1&&(s+=o+c+g)});else{for(var m="",v=0;v<u.length;v++)m+=u[v].style.cssText;s=p+i+m+'">'+e.innerHTML+c}return s}function A(e,t){var n=document.createElement("div");return e.forEach(function(e){if(!e.hasOwnProperty("metadata"))if(e.hasOwnProperty("span")){var r=e.span.__children,i=document.createElement("span");if(e.span.hasOwnProperty("style")){var a=y(e.span.style,t);i.className="spanPadding "+e.span.style,i.style.cssText=a.join(" ")}r.forEach(function(e){if(!r.hasOwnProperty("metadata"))if(e.hasOwnProperty("#text")){var t=document.createTextNode(e["#text"]);i.appendChild(t)}else if("br"in e){i.hasChildNodes()&&n.appendChild(i);var a=document.createElement("br");a.className="lineBreak",n.appendChild(a);var o=document.createElement("span");
o.className=i.className,o.style.cssText=i.style.cssText,i=o}}),n.appendChild(i)}else if(e.hasOwnProperty("br")){var o=document.createElement("br");o.className="lineBreak",n.appendChild(o)}else if(e.hasOwnProperty("#text")){var s=document.createElement("span");s.textContent=e["#text"],n.appendChild(s)}}),n}function M(e,t,n){var r,i,a=[],o=e.region,s=t.region;return s&&(r=S(s,n)),o?(i=a.concat(S(o,n)),a=r?m(r,i):i):r&&(a=r),b(a,k),a}function C(e,t){var n,r,i,a=[],o=e.style,s=P.tt.body.style,u=P.tt.body.div.style,l="";return s&&(n=y(s,t),l="paragraph "+s),u&&(r=y(u,t),n?(r=m(n,r),l+=" "+u):l="paragraph "+u),o?(i=y(o,t),n&&r?(a=m(r,i),l+=" "+o):n?(a=m(n,i),l+=" "+o):r?(a=m(r,i),l+=" "+o):(a=i,l="paragraph "+o)):n&&!r?a=n:!n&&r&&(a=r),b(a,j),[a,l]}function b(e,t){for(var n in t)t.hasOwnProperty(n)&&(d(n,e)||e.push(n+":"+t[n]))}var D=this.context,O=(0,f["default"])(D).getInstance().log,w=void 0,N=void 0,P=void 0,L=void 0,x=void 0,F=void 0,U=void 0,B=void 0,k=void 0,j=void 0,K=void 0,Y=void 0,H=void 0,G=void 0,q=void 0,V=void 0,z=void 0,W=void 0;return w={parse:t,setConfig:e},n(),w}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},o=n(1),s=r(o),u=n(33),l=r(u),d=n(4),f=r(d),c=3600,g=60;i.__dashjs_factory_name="TTMLParser",t["default"]=s["default"].getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){d=/(?:\r\n|\r|\n)/gm,f=/-->/,c=/(^[\s]+|[\s]+$)/g,g=/\s\b/g}function t(e){var t,i,o=[];e=e.split(d),t=e.length,i=-1;for(var u=0;t>u;u++){var l=e[u];if(l.length>0&&"WEBVTT"!==l&&l.match(f)){var g=r(l),h=g.cuePoints,p=g.styles,m=a(e,u+1),v=n(h[0].replace(c,"")),_=n(h[1].replace(c,""));!isNaN(v)&&!isNaN(_)&&v>=i&&_>v?""!==m?(i=v,o.push({start:v,end:_,data:m,styles:p})):s("Skipping cue due to empty/malformed cue text"):s("Skipping cue due to incorrect cue timing")}}return o}function n(e){var t=e.split(":"),n=t.length-1;return e=60*parseInt(t[n-1],10)+parseFloat(t[n]),2===n&&(e+=3600*parseInt(t[0],10)),e}function r(e){var t=e.split(f),n=t[1].split(g);return n.shift(),t[1]=n[0],n.shift(),{cuePoints:t,styles:i(n)}}function i(e){var t={};return e.forEach(function(e){if(e.split(/:/).length>1){var n=e.split(/:/)[1];n&&-1!=n.search(/%/)&&(n=parseInt(n.replace(/%/,""),10)),(e.match(/align/)||e.match(/A/))&&(t.align=n),(e.match(/line/)||e.match(/L/))&&(t.line=n),(e.match(/position/)||e.match(/P/))&&(t.position=n),(e.match(/size/)||e.match(/S/))&&(t.size=n)}}),t}function a(e,t){for(var n,r=t,i="",a="";""!==e[r]&&r<e.length;)r++;if(n=r-t,n>1)for(var o=0;n>o;o++){if(a=e[t+o],a.match(f)){i="";break}i+=a,o!==n-1&&(i+="\n")}else a=e[t],a.match(f)||(i=a);return decodeURI(i)}var o=this.context,s=(0,u["default"])(o).getInstance().log,l=void 0,d=void 0,f=void 0,c=void 0,g=void 0;return l={parse:t},e(),l}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),s=n(4),u=r(s);i.__dashjs_factory_name="VTTParser",t["default"]=o["default"].getSingletonFactory(i)},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function i(){n(this,i),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.qualityIndex=NaN};t["default"]=r},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function i(){n(this,i),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN};t["default"]=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(31),u=r(s),l=function(e){function t(e){i(this,t);var n=a(this,Object.getPrototypeOf(t).call(this));return n.url=e||null,n.checkForExistenceOnly=!0,n}return o(t,e),t}(u["default"]);t["default"]=l},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function i(){n(this,i),this.offset=NaN,this.type=null,this.size=NaN,this.isComplete=!0};t["default"]=r},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function i(){n(this,i),this.DVRWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null};t["default"]=r},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function i(){n(this,i),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.lang=null,this.viewpoint=null,this.accessibility=null,this.audioChannelConfiguration=null,this.roles=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null};t["default"]=r},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function i(){n(this,i),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[],this.BolaState=[]};t["default"]=r},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function i(){n(this,i),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0,this.isFirst=!0};t["default"]=r},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function i(){n(this,i),this.video=null,this.captionData=null,this.label=null,this.lang=null,this.defaultTrack=!1,this.kind=null,this.isFragmented=!1,this.isEmbedded=!1};t["default"]=r},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function i(){n(this,i),this.id=null,this.quality=null,this.DVRWindow=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null};t["default"]=r},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function i(){n(this,i),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null};t["default"]=r},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function i(){n(this,i),this._s=void 0};t["default"]=r},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function i(){n(this,i),this.t=null,this.level=null};t["default"]=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=n(15),o=r(a),s=function u(){i(this,u),this.target=null,this.state=o["default"].BUFFER_EMPTY};t["default"]=s},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function i(){n(this,i),this.time=null,this.range=null,this.manifestInfo=null};t["default"]=r},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function i(){n(this,i),this.time=null,this.droppedFrames=null};t["default"]=r},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function i(){n(this,i),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.trackInfo=[]};r.StreamInfo=function(){function e(){n(this,e),this.id=null,this.index=null,this.start=null,this.duration=null}return e}(),r.TrackInfo=function(){function e(){n(this,e),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null}return e}(),t["default"]=r},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function i(){n(this,i),this.t=null,this.mt=null,this.to=null,this.lto=null};t["default"]=r},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function i(){n(this,i),this.loadingRequests=[],this.executedRequests=[]};t["default"]=r},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function i(){n(this,i),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null};t["default"]=r},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function i(){n(this,i),this.tcpid=null,this.dest=null,this.topen=null,this.tclose=null,this.tconnect=null};t["default"]=r},function(e,t){Object.getPrototypeOf||(Object.getPrototypeOf=function(e){if(e!==Object(e))throw TypeError("Object.getPrototypeOf called on non-object");return e.__proto__||e.constructor.prototype||Object.prototype}),"function"!=typeof Object.getOwnPropertyNames&&(Object.getOwnPropertyNames=function(e){if(e!==Object(e))throw TypeError("Object.getOwnPropertyNames called on non-object");var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(t);return n}),"function"!=typeof Object.create&&(Object.create=function(e,t){function n(){}if("object"!=typeof e)throw TypeError();n.prototype=e;var r=new n;if(e&&(r.constructor=n),void 0!==t){if(t!==Object(t))throw TypeError();Object.defineProperties(r,t)}return r}),function(){if(!Object.defineProperty||!function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}()){var e=Object.defineProperty;Object.defineProperty=function(t,n,r){if(e)try{return e(t,n,r)}catch(i){}if(t!==Object(t))throw TypeError("Object.defineProperty called on non-object");return Object.prototype.__defineGetter__&&"get"in r&&Object.prototype.__defineGetter__.call(t,n,r.get),Object.prototype.__defineSetter__&&"set"in r&&Object.prototype.__defineSetter__.call(t,n,r.set),"value"in r&&(t[n]=r.value),t}}}(),"function"!=typeof Object.defineProperties&&(Object.defineProperties=function(e,t){if(e!==Object(e))throw TypeError("Object.defineProperties called on non-object");var n;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&Object.defineProperty(e,n,t[n]);return e}),Object.keys||(Object.keys=function(e){if(e!==Object(e))throw TypeError("Object.keys called on non-object");var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(t);return n}),Function.prototype.bind||(Function.prototype.bind=function(e){function t(){}if("function"!=typeof this)throw TypeError("Bind must be called on a function");var n=[].slice,r=n.call(arguments,1),i=this,a=function(){return i.apply(this instanceof t?this:e,r.concat(n.call(arguments)))};return t.prototype=i.prototype,a.prototype=new t,a}),Array.isArray=Array.isArray||function(e){return Boolean(e&&"[object Array]"===Object.prototype.toString.call(Object(e)))},Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(void 0===this||null===this)throw TypeError();var t=Object(this),n=t.length>>>0;if(0===n)return-1;var r=0;if(arguments.length>0&&(r=Number(arguments[1]),isNaN(r)?r=0:0!==r&&r!==1/0&&r!==-(1/0)&&(r=(r>0||-1)*Math.floor(Math.abs(r)))),r>=n)return-1;for(var i=r>=0?r:Math.max(n-Math.abs(r),0);n>i;i++)if(i in t&&t[i]===e)return i;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(e){if(void 0===this||null===this)throw TypeError();var t=Object(this),n=t.length>>>0;if(0===n)return-1;var r=n;arguments.length>1&&(r=Number(arguments[1]),r!==r?r=0:0!==r&&r!==1/0&&r!==-(1/0)&&(r=(r>0||-1)*Math.floor(Math.abs(r))));for(var i=r>=0?Math.min(r,n-1):n-Math.abs(r);i>=0;i--)if(i in t&&t[i]===e)return i;return-1}),Array.prototype.every||(Array.prototype.every=function(e){if(void 0===this||null===this)throw TypeError();var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw TypeError();var r,i=arguments[1];for(r=0;n>r;r++)if(r in t&&!e.call(i,t[r],r,t))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(e){if(void 0===this||null===this)throw TypeError();var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw TypeError();var r,i=arguments[1];for(r=0;n>r;r++)if(r in t&&e.call(i,t[r],r,t))return!0;return!1}),Array.prototype.forEach||(Array.prototype.forEach=function(e){if(void 0===this||null===this)throw TypeError();var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw TypeError();var r,i=arguments[1];for(r=0;n>r;r++)r in t&&e.call(i,t[r],r,t)}),Array.prototype.map||(Array.prototype.map=function(e){if(void 0===this||null===this)throw TypeError();var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw TypeError();var r=[];r.length=n;var i,a=arguments[1];for(i=0;n>i;i++)i in t&&(r[i]=e.call(a,t[i],i,t));return r}),Array.prototype.filter||(Array.prototype.filter=function(e){if(void 0===this||null===this)throw TypeError();var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw TypeError();var r,i=[],a=arguments[1];for(r=0;n>r;r++)if(r in t){var o=t[r];e.call(a,o,r,t)&&i.push(o)}return i}),Array.prototype.reduce||(Array.prototype.reduce=function(e){if(void 0===this||null===this)throw TypeError();var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw TypeError();if(0===n&&1===arguments.length)throw TypeError();var r,i=0;if(arguments.length>=2)r=arguments[1];else for(;;){if(i in t){r=t[i++];break}if(++i>=n)throw TypeError()}for(;n>i;)i in t&&(r=e.call(void 0,r,t[i],i,t)),i++;return r}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(e){if(void 0===this||null===this)throw TypeError();var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw TypeError();if(0===n&&1===arguments.length)throw TypeError();var r,i=n-1;if(arguments.length>=2)r=arguments[1];else for(;;){if(i in this){r=this[i--];break}if(--i<0)throw TypeError()}for(;i>=0;)i in t&&(r=e.call(void 0,r,t[i],i,t)),i--;return r}),String.prototype.trim||(String.prototype.trim=function(){return String(this).replace(/^\s+/,"").replace(/\s+$/,"")}),Date.now||(Date.now=function(){return Number(new Date)}),Date.prototype.toISOString||(Date.prototype.toISOString=function(){function e(e){return("00"+e).slice(-2)}function t(e){return("000"+e).slice(-3)}return this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"."+t(this.getUTCMilliseconds())+"Z"})},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){e.exports=flowplayer}]);